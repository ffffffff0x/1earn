# ä¿¡æ¯æ”¶é›†

<p align="center">
    <img src="../../../../../assets/img/å®‰å…¨/ç¬”è®°/RedTeam/ä¿¡æ¯æ”¶é›†/ä¿¡æ¯æ”¶é›†/1.png" width="70%">
</p>

> æ³¨ : ç¬”è®°ä¸­æ‹“æ‰‘å›¾ xmind æºæ–‡ä»¶åœ¨å…¶å›¾ç‰‡ç›®å½•ä¸‹

---

## å…è´£å£°æ˜

`æœ¬æ–‡æ¡£ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨,è¯·å‹¿ä½¿ç”¨æ–‡ä¸­çš„æŠ€æœ¯æºç ç”¨äºéæ³•ç”¨é€”,ä»»ä½•äººé€ æˆçš„ä»»ä½•è´Ÿé¢å½±å“,ä¸æœ¬äººæ— å…³.`

---

# å¤§çº²

* **[æ¼æ´ä¿¡æ¯](#æ¼æ´ä¿¡æ¯)**
    * [DAST](#dast)
        * [webæ¼æ‰«](#webæ¼æ‰«)
            * [ä¸»åŠ¨æ¼æ‰«](#ä¸»åŠ¨æ¼æ‰«)
            * [è¢«åŠ¨æ¼æ‰«](#è¢«åŠ¨æ¼æ‰«)
        * [ç»¼åˆæ¼æ‰«](#ç»¼åˆæ¼æ‰«)
    * [IAST](#iast)
    * [SAST](#sast)
    * [SRCå†å²æ¼æ´)](#srcå†å²æ¼æ´)
    * [æœåŠ¡-ç»„ä»¶-åè®®](#æœåŠ¡-ç»„ä»¶-åè®®)

* **[æœç´¢å¼•æ“Hacking](#æœç´¢å¼•æ“hacking)**

* **[ç½‘ç»œä¸ä¸»æœº](#ç½‘ç»œä¸ä¸»æœº)**
    * [IPæ‰«æ](#ipæ‰«æ)
    * [MACæ‰«æ](#macæ‰«æ)
    * [ç«¯å£æ‰«æ](#ç«¯å£æ‰«æ)
    * [ä¸»æœºä¿¡æ¯](#ä¸»æœºä¿¡æ¯)
    * [åŸŸä¿¡æ¯](#åŸŸä¿¡æ¯)
        * [åŸŸç¯å¢ƒ](#åŸŸç¯å¢ƒ)
            * [SPNæ‰«æ](#spnæ‰«æ)
        * [åŸŸæ§](#åŸŸæ§)
    * [å·¥æ§èµ„äº§](#å·¥æ§èµ„äº§)

* **[ç½‘ç«™](#ç½‘ç«™)**
    * [çœŸå®IP](#çœŸå®ip)
    * [å­åŸŸ](#å­åŸŸ)
    * [ç›®å½•å¤‡ä»½](#ç›®å½•å¤‡ä»½)
    * [æŒ‡çº¹](#æŒ‡çº¹)
    * [æ—ç«™](#æ—ç«™)
    * [å†å²å¿«ç…§](#å†å²å¿«ç…§)
    * [whoisä¸å¤‡æ¡ˆ](#whoisä¸å¤‡æ¡ˆ)

* **[å¦ç±»](#å¦ç±»)**
    * [æˆªå›¾](#æˆªå›¾)

* **[OSINT](#osint)**

---

# æ¼æ´ä¿¡æ¯

> æ¼æ‰«å·¥å…·å¥½,ç‰¢å­è¿›çš„æ—©

## DAST

`åŠ¨æ€åº”ç”¨æµ‹è¯•`

### webæ¼æ‰«

**æ¼æ‰«é¶æœº**
- http://testphp.vulnweb.com/ - WVS PHP+Ajax æ¼æ´æ‰«æå™¨æµ‹è¯•å¹³å°
- http://testphp.vulnweb.com/AJAX/ - WVS Ajax æ¼æ´æ‰«æå™¨æµ‹è¯•å¹³å°
- http://testfire.net/ - IBM Appscan æµ‹è¯•å¹³å°
- http://demo.aisec.cn/demo/aisec/ - Sec æ¼æ´æ‰«æå™¨æµ‹è¯•å¹³å°
- http://testaspnet.vulnweb.com/ - WVS .Net æ¼æ´æ‰«æå™¨æµ‹è¯•å¹³å°
- http://testasp.vulnweb.com/ - WVS ASP æ¼æ´æ‰«æå™¨æµ‹è¯•å¹³å°
- http://zero.webappsecurity.com/

---

#### ä¸»åŠ¨æ¼æ‰«

**å·¥å…·**
- **[AWVS-acunetix](https://www.acunetix.com/vulnerability-scanner/)**
    - æ–‡ç« 
        - [ç¼–å†™ AWVS è„šæœ¬æ¢æµ‹web services](http://gv7.me/articles/2017/Writing-AWVS-scripts-to-detect-Web-Services/)
        - [è®ºå¦‚ä½•åå‡»ç”¨ AWVS çš„é»‘å®¢](https://www.freebuf.com/news/136476.html)
    - è§£å¯†è„šæœ¬
        - [fnmsd/awvs_script_decode](https://github.com/fnmsd/awvs_script_decode) - è§£å¯†å¥½çš„AWVS10.5 data/script/ç›®å½•ä¸‹çš„è„šæœ¬
        - [gatlindada/awvs-decode](https://github.com/gatlindada/awvs-decode) - AWVS è§£ç /è§£å¯†æ–¹æ³•ï¼Œä»…15è¡Œä»£ç ï¼ï¼æ— é¡»ä»»ä½•ä¾èµ–ä»»ä½•å·¥å…·
    - awvs13
        docker éƒ¨ç½²æ–¹æ¡ˆæ¥è‡ª <sup>[[å›½å…‰åšå®¢](https://www.sqlsec.com/2020/04/awvs.html)]</sup>
        ```bash
        docker pull secfa/docker-awvs   # pull æ‹‰å–ä¸‹è½½é•œåƒ
        docker run -it -d -p 13443:3443 secfa/docker-awvs   # å°†Dockerçš„3443ç«¯å£æ˜ å°„åˆ°ç‰©ç†æœºçš„ 13443ç«¯å£

        # å®¹å™¨çš„ç›¸å…³ä¿¡æ¯
        # awvs13 username: admin@admin.com
        # awvs13 password: Admin123
        # AWVSç‰ˆæœ¬ï¼š13.0.200217097
        # æµè§ˆå™¨è®¿é—®ï¼šhttps://127.0.0.1:13443/ å³å¯
        ```

- **[al0ne/Vxscan](https://github.com/al0ne/Vxscan) - python3 å†™çš„ç»¼åˆæ‰«æå·¥å…·,ä¸»è¦ç”¨æ¥æ•æ„Ÿæ–‡ä»¶æ¢æµ‹** - æŒ‡çº¹+ç«¯å£+ç›®å½•ç»“åˆ,åå‘ä¿¡æ¯æ³„éœ²,æ¼æ´æ‰«æç»“æœè¾ƒå°‘
- **nikto** - æ•ˆæœä¸€èˆ¬
    ```
    nikto -host http://xxx.xxx.xxx.xx:8080/
    ```
- **[boy-hack/POC-T](https://github.com/boy-hack/POC-T)** - é€‚åˆæ‰¹é‡ä»»åŠ¡,é€Ÿåº¦å¯ä»¥
    - [åˆ· SRC ç»éªŒä¹‹æ‰¹é‡åŒ–æ‰«æå®è·µ](https://www.freebuf.com/sectool/176562.html)
- **[netsparker](https://www.netsparker.com)**

---

#### è¢«åŠ¨æ¼æ‰«

**ç›¸å…³æ–‡ç« **
- [HTTPè¢«åŠ¨æ‰«æä»£ç†çš„é‚£äº›äº‹](https://www.freebuf.com/articles/web/212382.html)

**å·¥å…·**
- **[chaitin/xray](https://github.com/chaitin/xray) - é•¿äº­çš„æ´é‰´æ¼æ‰«ç¤¾åŒºç‰ˆ**
    ```bash
    xray webscan --listen 127.0.0.1:7777 --html-output proxy.html
    ```
- **[w-digital-scanner/w13scan](https://github.com/w-digital-scanner/w13scan)** - ä¸€æ¬¾æ’ä»¶åŒ–åŸºäºæµé‡åˆ†æçš„æ‰«æå™¨ï¼Œé€šè¿‡ç¼–å†™æ’ä»¶å®ƒä¼šä»è®¿é—®æµé‡ä¸­è‡ªåŠ¨æ‰«æï¼ŒåŸºäº Python3ã€‚
    ```bash
    python3 w13scan.py -s 127.0.0.1:7777 --html # ç«¯å£å¯çœç•¥ï¼Œé»˜è®¤ä¸º7778,å¼€å¯--htmlå³å®æ—¶ç”ŸæˆhtmlæŠ¥å‘Š
    ```

---

### ç»¼åˆæ¼æ‰«

**å·¥å…·**
- **[Nessus](https://www.tenable.com/downloads/nessus)** - æ•ˆæœğŸ‚ğŸº,ä»·æ ¼ğŸ‚ğŸº
    - æŠ¥å‘Šç¿»è¯‘
        - [FunnyKun/NessusReportInChinese](https://github.com/FunnyKun/NessusReportInChinese)
        - [Bypass007/Nessus_to_report](https://github.com/Bypass007/Nessus_to_report)
    - è¾“å‡ºæ¸²æŸ“
        - [Ebryx/Nessus_Map](https://github.com/Ebryx/Nessus_Map) - æ¸²æŸ“ .nessus æ–‡ä»¶
        - [0bs1d1an/sr2t](https://gitlab.com/0bs1d1an/sr2t) - å°†æ‰«ææŠ¥å‘Šè½¬æ¢ä¸ºè¡¨æ ¼æ ¼å¼
- **[ysrc/xunfeng](https://github.com/ysrc/xunfeng)** - å·¡é£æ˜¯ä¸€æ¬¾é€‚ç”¨äºä¼ä¸šå†…ç½‘çš„æ¼æ´å¿«é€Ÿåº”æ€¥ï¼Œå·¡èˆªæ‰«æç³»ç»Ÿã€‚
- **[Goby](https://gobies.org/)** - ç™½å¸½æ±‡æçš„å·¥å…·,å®æˆ˜ä¸­å°è¯•äº†å†…ç½‘æ‰«æ,é€Ÿåº¦æŒºå¿«,å·¥å…·è‡ªèº«æ¼æ´åº“å¤ªå°‘äº†

---

## IAST

`äº¤äº’å¼åº”ç”¨æµ‹è¯•`

**å·¥å…·**
- https://github.com/btraceio/btrace
- https://newrelic.com/

---

## SAST

`é™æ€åº”ç”¨æµ‹è¯•`

**å·¥å…·**
- Fortify Sca

---

## SRCå†å²æ¼æ´

- [#SRC-ä¼—æµ‹æ”¶é›†](../../../Power-PenTest.md#SRC-ä¼—æµ‹æ”¶é›†)

---

## æœåŠ¡-ç»„ä»¶-åè®®

- [Web_CVEæ¼æ´è®°å½•](../Webå®‰å…¨/Web_CVEæ¼æ´è®°å½•.md)
- [è½¯ä»¶æœåŠ¡å®‰å…¨](../è½¯ä»¶æœåŠ¡å®‰å…¨.md)
- [åè®®å®‰å…¨](../åè®®å®‰å…¨.md)

---

# æœç´¢å¼•æ“Hacking

**ç¬”è®°**
- [æœç´¢å¼•æ“ Hacking ç¬”è®°](./æœç´¢å¼•æ“Hacking.md)

---

# ç½‘ç»œ-ä¸»æœº

**TTL æ¥åˆ¤æ–­ç›®çš„ä¸»æœºçš„æ“ä½œç³»ç»Ÿç±»å‹**

ä¸‹é¢æ˜¯é»˜è®¤æ“ä½œç³»ç»Ÿçš„ TTL:
```bash
1ã€WINDOWS NT/2000   TTL:128
2ã€WINDOWS 95/98     TTL:32
3ã€UNIX              TTL:255
4ã€LINUX             TTL:64
5ã€WIN7              TTL:64
```

**ä¿®æ”¹æœ¬æœºç”µè„‘ä¸Šé¢çš„é»˜è®¤ TTL å€¼**

é€šè¿‡ä¿®æ”¹æœ¬æœºä¸Šçš„ TTL å€¼å¯ä»¥æ··æ·†æ”»å‡»è€…çš„åˆ¤æ–­(å½“ç„¶,å¾ˆå°‘æœ‰ç”¨æˆ·ä¼šè¿™ä¹ˆåš).TTL å€¼åœ¨æ³¨å†Œè¡¨çš„ä½ç½®æ˜¯: `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters` å…¶ä¸­æœ‰ä¸ª DefaultTTL çš„ DWORD å€¼,å…¶æ•°æ®å°±æ˜¯é»˜è®¤çš„ TTL å€¼äº†,æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ DefaultTTL é‡Œé¢çš„ TTL é»˜è®¤å€¼,ä½†ä¸èƒ½å¤§äºåè¿›åˆ¶çš„ 255.

**èµ„äº§æ‰«æå·¥å…·**
- [JE2Se/AssetScan](https://github.com/JE2Se/AssetScan) - èµ„äº§æ¢æµ‹å·¥å…·ï¼Œæ£€æµ‹å­˜æ´»ï¼Œæ£€æµ‹é£é™©ç«¯å£ï¼Œå¸¸è§„ç«¯å£ï¼Œå…¨ç«¯å£æ¢æµ‹ç­‰ç­‰ï¼Œå¯¹æ¢æµ‹çš„ç«¯å£çš„è„†å¼±é¢è¿›è¡Œå®‰å…¨åˆ†æè¿›è¡Œ - è°ƒç”¨ masscan ç«¯å£æ‰«+ç®€æ˜“æ¼æ‰«+æŠ¥è¡¨ç”Ÿæˆ
- [LangziFun/LangNetworkTopology3](https://github.com/LangziFun/LangNetworkTopology3) - IP/IPæ®µèµ„äº§æ‰«æ-->æ‰«æå¼€æ”¾ç«¯å£è¯†åˆ«è¿è¡ŒæœåŠ¡éƒ¨ç½²ç½‘ç«™-->è‡ªåŠ¨åŒ–æ•´ç†æ‰«æç»“æœ-->è¾“å‡ºå¯è§†åŒ–æŠ¥è¡¨+æ•´ç†ç»“æœ - æœ¬è´¨è¿˜æ˜¯è°ƒç”¨ masscan+ç”ŸæˆæŠ¥è¡¨ å®é™…ä½¿ç”¨æ•ˆæœä¸ä½³

---

## IPæ‰«æ

**å·¥å…·**
- [alexxy/netdiscover: netdiscover](https://github.com/alexxy/netdiscover) - å†…ç½‘ä¸­å®æµ‹æ•ˆæœä¸å¥½,æ¯”è¾ƒåƒåœ¾,ä¸å»ºè®®ä½¿ç”¨
- [nbtscan - NETBIOS nameserver scanner](http://unixwiz.net/tools/nbtscan.html) - å†…ç½‘ä¸­å®æµ‹æ•ˆæœä¸å¥½
- nmap - å†…ç½‘ä¸­å®æµ‹,IP æ¢æ´»é€Ÿåº¦è¾ƒæ…¢
    ```
    nmap -sP <ç½‘æ®µ>/24
    ```

---

## MACæ‰«æ

**å·¥å…·**
- [ç§‘æ¥ MAC åœ°å€æ‰«æå™¨](http://www.colasoft.com.cn/download/capsa_tool_cmac.php)
- arp-scan
    ```
    arp-scan -l
    ```

---

## ç«¯å£æ‰«æ

**Tips**

1. æœ‰æ—¶å€™æ‰«æä¸»æœºä¼šç¢°åˆ°æ˜¾ç¤ºå¤§é‡å¼€æ”¾ç«¯å£,è¿™ç§å¯èƒ½éƒ½æ˜¯è™šçš„,æ˜¯ waf åœ¨èµ·ä½œç”¨.
2. nmap åœ¨æœ‰äº›åœºæ™¯ä¸‹ä¸ä¸€å®šèƒ½æŠŠæ‰€æœ‰å¼€æ”¾ç«¯å£æ‰«å‡º,è¿™æ—¶å€™æ¢ä¸€ä¸ªå·¥å…·è¯´ä¸å®šæœ‰å¥‡æ•ˆ.

```bash
# scanning the 65535 ports
for port in {1..65535};do curl -s http://host:$port;done
for port in {1..65535};do wget -nv http://host:$port;done

# scanning the 65535 ports with raw http request
for port in {1..65535}; do
    echo >/dev/tcp/host/$port &&
        echo "port $port is open" ||
        echo "port $port is closed"
done
```

**ç¬”è®°**
- [ç«¯å£å®‰å…¨](./ç«¯å£å®‰å…¨.md)

**ç«¯å£ä¿¡æ¯**
- [Service Name and Transport Protocol Port Number Registry](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml)

**å·¥å…·**
- nmap
    - [nmap ç¬”è®°](../../../å·¥å…·/Nmap.md)
- [masscan](https://github.com/robertdavidgraham/masscan)
    ```bash
    # webå¸¸ç”¨
    masscan 127.0.0.0/24 -p80,161,443,873,2181,6379,7001,8000,8009,8080,9000,9009,9090,9200,9300,10000,50070 > results.txt

    # è¿œç¨‹ç™»å½•
    masscan 127.0.0.0/24 -p22,23,3389,5632,5800,5900,5901 > results.txt

    # æ–‡ä»¶æœåŠ¡
    masscan 127.0.0.0/24 -p20,21,445,873,2049 > results.txt

    # æ•°æ®åº“
    masscan 127.0.0.0/24 -p1433,1521,3306,4100,5000,5432,5984,6379,11211,27017,27018 > results.txt

    # å•ç«¯å£æ‰«æ
    masscan 127.0.0.0/24 -p443

    # å¤šç«¯å£æ‰«æ æ‰«æ 80 æˆ– 443 ç«¯å£çš„ B ç±»å­ç½‘
    masscan 127.0.0.0/24 -p80,443

    # æ‰«æä¸€ç³»åˆ—ç«¯å£ æ‰«æ 22 åˆ° 25 ç«¯å£çš„ B ç±»å­ç½‘
    masscan 127.0.0.0/24 -p22-25

    # å¿«é€Ÿæ‰«æ
    masscan 127.0.0.0/24 --top-ports 100 -rate 100000

    # æ’é™¤ç›®æ ‡
    masscan 127.0.0.0/24 --top-ports 100 --excludefile exclude.txt

    # ç»“æœä¿å­˜
    masscan 127.0.0.0/24 --top-ports 100 > results.txt
    ```
- msf
    ```bash
    set scanner/portscan/tcp
    set rhosts <ip/CIDR>
    set ports <port>
    set THREADS <s>
    set TIMEOUT <s>
    run
    ```
- [gnebbia/halive](https://github.com/gnebbia/halive) - å¿«é€Ÿå¯¹ URL æ¢æ´»,å¯ä»¥é…åˆç«¯å£æ‰«æå·¥å…·æ‰¹é‡æ£€æµ‹.
- [hdm/nextnet](https://github.com/hdm/nextnet) - ä¸“é—¨æ‰«æ 137 ç«¯å£å­˜æ´»ä¸»æœº
- [hellogoldsnakeman/masnmapscan-V1.0](https://github.com/hellogoldsnakeman/masnmapscan-V1.0) - ä¸€æ¬¾ç«¯å£æ‰«æå™¨ã€‚æ•´åˆäº† masscan å’Œ nmap ä¸¤æ¬¾æ‰«æå™¨. - å®é™…ä½¿ç”¨æ•ˆæœä¸€èˆ¬

---

## ä¸»æœºä¿¡æ¯

- [Linuxä¸»æœºä¿¡æ¯æ”¶é›†](../../../../è¿ç»´/Linux/ç¬”è®°/ä¿¡æ¯.md)
- [Windowsä¸»æœºä¿¡æ¯æ”¶é›†](../../../../è¿ç»´/Windows/ç¬”è®°/ä¿¡æ¯.md)

---

## åŸŸä¿¡æ¯

**åŸŸä¿¡æ¯æ”¶é›†ç›¸å…³å·¥å…·/è„šæœ¬**
- [PowerSploit](https://github.com/PowerShellMafia/PowerSploit/tree/master/Recon)
- [BloodHound](https://github.com/BloodHoundAD/BloodHound) - åŸŸç¯å¢ƒåˆ†æå·¥å…·
    - å‚è€ƒæ–‡ç«  : [åŸŸæ¸—é€åˆ†æå·¥å…·BloodHound 1.5.2å…¥é—¨å®æˆ˜](https://www.freebuf.com/sectool/179002.html)
- [impacket](https://github.com/SecureAuthCorp/impacket) - ä¸€ä¸ªç½‘ç»œåè®®å·¥å…·åŒ…
    ```bash
    git clone https://github.com/CoreSecurity/impacket.git
    cd impacket/
    python setup.py install
    cd impacket/examples
    ```
    - Ping.py

        ä¸€ä¸ªç®€å•çš„ ICMP ping è„šæœ¬ï¼Œä½¿ç”¨ ICMP echo å’Œ echo-reply æ•°æ®åŒ…æ£€æŸ¥ä¸»æœºçŠ¶æ€ã€‚
        ```
        ./ping.py [Source IP] [Destination IP]
        ```
    - Lookupsid.py

        é€šè¿‡ [MS-LSAT] MSRPC æ¥å£çš„ Windows SID bruteforcer ç¤ºä¾‹ï¼Œæ—¨åœ¨æŸ¥æ‰¾è¿œç¨‹ç”¨æˆ·/ç»„ã€‚
        ```
        ./lookupsid.py test/Administrator:Abcd1234@192.168.1.100
        ```
    - Rpcdump.py

        è¯¥è„šæœ¬å°†è½¬å‚¨åœ¨ç›®æ ‡ä¸Šæ³¨å†Œçš„ RPC ç«¯ç‚¹å’Œå­—ç¬¦ä¸² bindings åˆ—è¡¨ã€‚å®ƒä¹Ÿä¼šå°è¯•å°†å®ƒä»¬ä¸ä¸€äº›çŸ¥åçš„ç«¯ç‚¹è¿›è¡ŒåŒ¹é…ã€‚
        ```
        ./rpcdump.py test/Administrator:Abcd1234@192.168.1.100
        ```
    - Samrdump.py

        ä¸ MSRPC å¥—ä»¶ä¸­çš„å®‰å…¨å¸æˆ·ç®¡ç†å™¨è¿œç¨‹æ¥å£é€šä¿¡çš„åº”ç”¨ç¨‹åºã€‚å®ƒå°†ä¸ºæˆ‘ä»¬åˆ—å‡ºç›®æ ‡ç³»ç»Ÿä¸Šçš„ç”¨æˆ·å¸æˆ·ï¼Œå¯ç”¨èµ„æºå…±äº«ä»¥åŠé€šè¿‡æ­¤æœåŠ¡å¯¼å‡ºçš„å…¶ä»–æ•æ„Ÿä¿¡æ¯
        ```
        ./samrdump.py test/Administrator:Abcd1234@192.168.1.100
        ```
    - Wmiquery.py

        å®ƒå…è®¸å‘å‡º WQL æŸ¥è¯¢å¹¶è·å–ç›®æ ‡ç³»ç»Ÿ WMI å¯¹è±¡çš„æè¿°ä¿¡æ¯ã€‚
        ```
        ./wmiquery.py test/Administrator:Abcd1234@192.168.1.100
        ```
    - getArch.py

        è¯¥è„šæœ¬å°†è¿æ¥ç›®æ ‡ï¼ˆæˆ–ç›®æ ‡åˆ—è¡¨ä¸Šçš„ï¼‰è®¡ç®—æœºï¼Œå¹¶ä½¿ç”¨å·²è®°å½•çš„ MSRPC ç‰¹å¾æ”¶é›†ç”±ï¼ˆabï¼‰å®‰è£…çš„æ“ä½œç³»ç»Ÿæ¶æ„ç±»å‹ã€‚
        ```
        ./getArch.py -target 192.168.1.100
        ```

---

### åŸŸç¯å¢ƒ

**è·å–å½“å‰è®¡ç®—æœºåï¼Œå…¨åï¼Œç”¨æˆ·åï¼Œç³»ç»Ÿç‰ˆæœ¬ï¼Œå·¥ä½œç«™åŸŸï¼Œç™»é™†åŸŸ**
```
net view
net config Workstation
klist
whoami/all
wmic useraccount get name,sid
```

**æŸ¥è¯¢æ‰€æœ‰åŸŸä¸»æœºå**
```
dsquery computer
```

**æŸ¥çœ‹æ‰€æœ‰åŸŸ**
```
net view /domain
```

**æŸ¥çœ‹åŸŸä¸­çš„ç”¨æˆ·å**
```
net user /domain
dsquery user
```

**æŸ¥è¯¢åŸŸç»„åç§°**
```
net group /domain
```

**æŸ¥è¯¢åŸŸè”ç³»äºº**
```
dsquery contact
```

**æŸ¥è¯¢åŸŸä¸­æ‰€æœ‰çš„ç»„**
```
dsquery group
```

**æŸ¥è¯¢åŸŸä¸­æ‰€æœ‰çš„ç»„ç»‡å•å…ƒ**
```
dsquery ou
```

**æŸ¥è¯¢åŸŸä¸­æ‰€æœ‰çš„ç«™ç‚¹**
```
dsquery site
```

**æŸ¥è¯¢æŒ‡å®šåŸŸä¸»æœºå**
```
dsquery computer -name win* -desc desktop -limit 0
```

**æŸ¥è¯¢nå‘¨æœªæ´»åŠ¨çš„åŸŸä¸»æœºå**
```
dsquery computer -inactive n -limit 0
```

**æŸ¥è¯¢nå¤©å†…æœªæ›´æ”¹å¯†ç çš„åŸŸä¸»æœºå**
```
dsquery computer -stalepwd n
```

**æŸ¥è¯¢æŒ‡å®šåŸŸçš„åŸŸä¸»æœºå**
```
dsquery computer -s ip -u username -p password -limit 0
```

**æŸ¥è¯¢åŸŸä¸­çš„é…é¢è§„èŒƒ**
```
dsquery quota
```

**æŸ¥è¯¢åŸŸä¸­çš„åˆ†åŒºå¯¹è±¡**
```
dsquery partition
```

**æŸ¥çœ‹åŸŸæ—¶é—´**
```
net time /domain
```

#### SPNæ‰«æ

SPN æ˜¯æœåŠ¡åœ¨ä½¿ç”¨ Kerberos èº«ä»½éªŒè¯çš„ç½‘ç»œä¸Šçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ å®ƒç”±æœåŠ¡ç±»ã€ä¸»æœºåå’Œç«¯å£ç»„æˆã€‚ åœ¨ä½¿ç”¨ Kerberos èº«ä»½éªŒè¯çš„ç½‘ç»œä¸­ï¼Œå¿…é¡»åœ¨å†…ç½®è®¡ç®—æœºå¸æˆ·ï¼ˆå¦‚ NetworkService æˆ– LocalSystemï¼‰æˆ–ç”¨æˆ·å¸æˆ·ä¸‹ä¸ºæœåŠ¡å™¨æ³¨å†Œ SPNã€‚ å¯¹äºå†…ç½®å¸æˆ·ï¼ŒSPN å°†è‡ªåŠ¨è¿›è¡Œæ³¨å†Œã€‚ ä½†æ˜¯ï¼Œå¦‚æœåœ¨åŸŸç”¨æˆ·å¸æˆ·ä¸‹è¿è¡ŒæœåŠ¡ï¼Œåˆ™å¿…é¡»ä¸ºè¦ä½¿ç”¨çš„å¸æˆ·æ‰‹åŠ¨æ³¨å†Œ SPNã€‚

SPN æ‰«æçš„ä¸»è¦å¥½å¤„æ˜¯ï¼ŒSPN æ‰«æä¸éœ€è¦è¿æ¥åˆ°ç½‘ç»œä¸Šçš„æ¯ä¸ªIPæ¥æ£€æŸ¥æœåŠ¡ç«¯å£,SPN é€šè¿‡ LDAP æŸ¥è¯¢å‘åŸŸæ§æ‰§è¡ŒæœåŠ¡å‘ç°ï¼Œspn æŸ¥è¯¢æ˜¯ kerberos ç¥¨æ®è¡Œä¸ºä¸€éƒ¨åˆ†,ï¼ŒåŸŸå†…çš„ä¸»æœºéƒ½èƒ½æŸ¥è¯¢ SPNï¼Œå› æ­¤æ¯”è¾ƒéš¾æ£€æµ‹ SPN æ‰«æã€‚æ‰€ä»¥åœ¨åŸŸå†…ä¸ç”¨åšç«¯å£æ‰«æä¹Ÿå¯ä»¥éšè”½åœ°æ¢æµ‹åŸŸå†…çš„æœåŠ¡ã€‚å½“åˆ©ç”¨ SPN æ‰«ææ‰¾åˆ°åŸŸç®¡ç™»å½•è¿‡çš„ç³»ç»Ÿï¼Œå¯¹æ¸—é€æƒé™æ‰©å±•æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚

è¦ä½¿ç”¨ Active Directory ä½œä¸º Kerberos å®ç°ï¼Œå¯ä»¥ä½¿ç”¨ `setspn` å‘½ä»¤æ¥æ³¨å†Œ SPNã€‚è¦è¿è¡Œæ­¤å‘½ä»¤ï¼Œå¿…é¡»æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š
- å¿…é¡»ç™»å½•åˆ°åŸŸæ§åˆ¶å™¨
- å¿…é¡»è¿è¡Œæå‡äº†ç‰¹æƒçš„å‘½ä»¤æç¤ºç¬¦ï¼ˆä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼‰
- å¿…é¡»æ˜¯ Domain Admins ç»„çš„æˆå‘˜ï¼ˆæˆ–è€…åŸŸç®¡ç†å‘˜å·²æˆäºˆæ‚¨é€‚å½“çš„è®¸å¯æƒï¼‰

SPN åˆ†ä¸ºä¸¤ç§ï¼š
- å½“ä¸€ä¸ªæœåŠ¡çš„æƒé™ä¸º Local System æˆ– Network Serviceï¼Œåˆ™ SPN æ³¨å†Œåœ¨åŸŸå†…æœºå™¨å¸æˆ·(Computers)ä¸‹
- å½“ä¸€ä¸ªæœåŠ¡çš„æƒé™ä¸ºä¸€ä¸ªåŸŸç”¨æˆ·ï¼Œåˆ™ SPN æ³¨å†Œåœ¨åŸŸç”¨æˆ·å¸æˆ·(Users)ä¸‹

---

ä¸€äº›æ³¨æ„çš„æœåŠ¡ :
- AGPMServerï¼šé€šå¸¸å…·æœ‰æ‰€æœ‰ GPO çš„å®Œå…¨æ§åˆ¶æƒã€‚
- MSSQL/MSSQLSvcï¼šå…·æœ‰ç®¡ç†å‘˜æƒé™çš„ SQL æœåŠ¡å™¨é€šå¸¸ä¼šæœ‰ä¸€äº›æœ‰è¶£çš„æ•°æ®ã€‚
- FIMServiceï¼šé€šå¸¸å¯¹å¤šä¸ª AD æ—å…·æœ‰ç®¡ç†æƒé™ã€‚
- STSï¼šVMWare SSO æœåŠ¡ï¼Œå¯ä»¥æä¾›è®¿é—® VMWare çš„åé—¨ã€‚

å¯¹äº RC4 åŠ å¯†çš„ä½¿ç”¨ tgsrepcrack è§£å¯†

å¯¹äº AES åŠ å¯†çš„ä½¿ç”¨ Kirbi2john è½¬æ¢ä¸º hashï¼Œé€šè¿‡ hashcat çˆ†ç ´

**æ¡ˆä¾‹**

ç”¨æˆ· AAA è¦è®¿é—® MSSQL æœåŠ¡çš„èµ„æºï¼Œè¿›è¡Œåˆ° Kerberos è®¤è¯çš„ç¬¬å››æ­¥(TGS-REP)æ—¶ï¼ŒKDC æŸ¥è¯¢ MSSQL æœåŠ¡çš„ SPNï¼Œè‹¥è¯¥ SPN æ³¨å†Œåœ¨æœºå™¨è´¦æˆ·(Computers)ä¸‹ï¼ŒTGS å°†ä¼šæŸ¥è¯¢æ•°æ®åº“ä¸­æ‰€æœ‰æœºå™¨è´¦æˆ·(Computers)çš„ ServicePrincipalName å±æ€§ï¼Œæ‰¾åˆ°å¯¹åº”çš„è´¦æˆ·ï¼Œä½¿ç”¨è¯¥è´¦æˆ·çš„ NTLM Hash å¯¹ `Client/Server Session Key`ã€`Client Info`ï¼ˆåŒ…å«Client IDï¼‰ã€`TimeStamp` åŠ å¯†å¾—åˆ° `Client-To-Server Ticket`ï¼ˆä¹Ÿç§°ä¸º ST ç¥¨æ®ï¼‰ã€‚è‹¥æŸ¥è¯¢æœåŠ¡çš„ SPN æ³¨å†Œåœ¨åŸŸç”¨æˆ·è´¦æˆ·(Users)ä¸‹ï¼ŒTGS å°†ä¼šæŸ¥è¯¢æ•°æ®åº“ä¸­æ‰€æœ‰åŸŸç”¨æˆ·è´¦æˆ·(Users)çš„ `ServicePrincipalName` å±æ€§ï¼Œæ‰¾åˆ°å¯¹åº”çš„è´¦æˆ·ï¼Œä½¿ç”¨è¯¥è´¦æˆ·çš„ NTLM Hash å¯¹ Client/Server Session Keyã€`Client Info`ï¼ˆåŒ…å« Client IDï¼‰ã€`TimeStamp` åŠ å¯†å¾—åˆ° `Client-To-Server Ticket`ï¼ˆä¹Ÿç§°ä¸º ST ç¥¨æ®ï¼‰

**å†…ç½®å·¥å…· setspn æŸ¥è¯¢**

setspn æ˜¯ Windows å†…ç½®å·¥å…·ï¼Œå¯ä»¥æ£€ç´¢ç”¨æˆ·è´¦æˆ·å’ŒæœåŠ¡ä¹‹é—´çš„æ˜ å°„ï¼Œæ­¤å·¥å…·å¯ä»¥æ·»åŠ ã€åˆ é™¤ã€æŸ¥çœ‹ SPN çš„æ³¨å†Œæƒ…å†µã€‚

ä¸ºè´¦æˆ· god.org/dbadmin æ³¨å†Œ SPNMSSQLSvc/SqlServer.god.orgï¼š
```
setspn -A MSSQLSvc/SqlServer.god.org dbadmin
```

æŸ¥çœ‹ SPNï¼š
```
//æŸ¥çœ‹å½“å‰åŸŸå†…çš„æ‰€æœ‰SPN
setspn.exe -q */*

//æŸ¥çœ‹ god åŸŸå†…çš„æ‰€æœ‰SPN
setspn.exe -T god -q */*

//æŸ¥çœ‹ dbadmin è´¦æˆ·çš„ SPN
setspn -l dbadmin
```

> ä»¥ CN å¼€å¤´çš„æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªè´¦æˆ·ï¼Œç´§è·Ÿä¸‹é¢çš„ä¿¡æ¯æ˜¯ä¸è¯¥è´¦æˆ·æœ‰å…³çš„SPNã€‚

æœºå™¨è´¦æˆ·(Computers)ä¸ºï¼š
```
CN=OWA2010CN-GOD,OU=Domain Controllers,DC=god,DC=org
CN=MARY-PC,CN=Computers,DC=god,DC=org
CN=SQLSERVER,CN=Computers,DC=god,DC=org
...
```

åŸŸç”¨æˆ·è´¦æˆ·(Users)ä¸ºï¼š
```
CN=krbtgt,CN=Users,DC=god,DC=org
CN=dbadmin,CN=Users,DC=god,DC=org
```

> æ³¨å†Œåœ¨åŸŸç”¨æˆ·è´¦æˆ·ä¸‹çš„ SPNMSSQLSvc/SqlServer.god.org å’Œ kadmin/changepw

**SPNæ‰«æç›¸å…³å·¥å…·**
- **GetUserSPNs**
    - https://github.com/nidem/kerberoast
        ```
        .\GetUserSPNs.ps1
        cscript.exe GetUserSPNs.vbs         åˆ©ç”¨ GetUserSPNs.vbs è¿›è¡Œ SPN ä¿¡æ¯æŸ¥è¯¢
        ```

- **PowerView**
    - https://github.com/PowerShellMafia/PowerSploit/tree/master/Recon
        ```powershell
        PS C:\Users\Administrator\Desktop\Recon> Import-Module .\PowerView.ps1
        PS C:\Users\Administrator\Desktop\Recon> Get-NetUser -SPN
        ```

- **Powershell AD Recon**
    - https://github.com/PyroTek3/PowerShell-AD-Recon
        ```powershell
        //å¦‚æŸ¥çœ‹MSSQLï¼ˆå…¶ä»–çš„åŒç†ï¼‰ï¼š

        //å¯¼å…¥è„šæœ¬
        Import-Module .\Discover-PSMSSQLServers.ps1
        //æŸ¥æ‰¾MSSQLæ‰€æœ‰å®ä¾‹
        Discover-PSMSSQLServers
        ```

- **PowerShellery**
    - https://github.com/nullbind/Powershellery
        ```powershell
        PS C:\Users\dbadmin\Desktop\Get-SPN> Import-Module .\Get-SPN.psm1
        PS C:\Users\dbadmin\Desktop\Get-SPN> Get-SPN -type service -search "*"

        //æŸ¥æ‰¾æ‰€æœ‰çš„SPNæœåŠ¡
        Get-SPN -type service -search "*" -List yes | Format-Table
        //æŸ¥æ‰¾MSSQLæœåŠ¡
        Get-SPN -type service -search "MSSQLSvc*" -List yes
        //è‹¥åœ¨ä¸€ä¸ªéåŸŸç³»ç»Ÿä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰§è¡Œ
        Get-SPN -type service -search "*" -List yes -DomainController åŸŸæ§IP -Credential domainuser| Format-Table -Autosize
        ```

- **RiskySPN**
    - https://github.com/cyberark/RiskySPN
        ```powershell
        Import-Module .\RiskySPNs.psm1
        Find-PotentiallyCrackableAccounts
        ```

- **Adfind**
    - http://www.joeware.net/freetools/tools/adfind/
        ```
        Adfind -f "ServicePrincipalName=MSSQLSvc*"
        Adfind -h åŸŸæ§åœ°å€ -sc spn:*
        ```

**ç›¸å…³æ–‡ç« **
- [Locate and Attack Domain SQL Servers without Scanning](https://blog.netspi.com/locate-and-attack-domain-sql-servers-without-scanning/) - é€šè¿‡ SPN æ‰«æåŸŸå†… MSSQL æœåŠ¡
- [SPN Scanning â€“ Service Discovery without Network Port Scanning](https://adsecurity.org/?p=1508)

---

### åŸŸæ§

**æŸ¥æ‰¾åŸŸç®¡ç†å‘˜**
```
net group "Domain Admins" /domain
```

**æŸ¥æ‰¾åŸŸæ§**
```
ping test.com               æŸ¥çœ‹åŸŸæ§çš„ IP
net time /domain            æŸ¥çœ‹æ—¶é—´,åŸŸæ§æœºå™¨å
nltest /DCLIST:test.com     æŸ¥çœ‹åŸŸæ§åå­—
net group "Domain Controllers" /domain
dsquery server
```

---

## å·¥æ§èµ„äº§

**ç›¸å…³æ–‡ç« **
- [å·¥æ§èµ„äº§å—…æ¢ä¸åˆ†æå®è·µ](https://www.freebuf.com/articles/ics-articles/209786.html)

**ç›¸å…³å·¥å…·**
- nmap
    - [nmapå·¥æ§æ¢æµ‹è„šæœ¬](../../../å·¥å…·/Nmap.md#å·¥æ§æ¢æµ‹)
- [ISF](https://github.com/dark-lbp/isf)
    ```
    scanners/s7comm_scan        é€‰æ‹© S7 æ‰«ææ’ä»¶
    scanners/vxworks_6_scan     é€‰æ‹© vxworks æ‰«ææ’ä»¶
    scanners/cip_scan           é€‰æ‹© cip_scan æ‰«ææ’ä»¶
    ```
- [plcscan](https://code.google.com/archive/p/plcscan/) - é€šè¿‡ s7comm æˆ– modbus åè®®æ‰«æ PLC è®¾å¤‡çš„å·¥å…·ã€‚
- msf
    ```bash
    auxiliary/scanner/scada/modbusdetect
    ```

---

# ç½‘ç«™

**æ•™ç¨‹/æ¡ˆä¾‹**
- [webæ¸—é€ç¬¬ä¸€æ­¥ä¹‹ä¿¡æ¯æœé›†[å­åŸŸ,æ—ç«™,Cæ®µ,ASå·...]](https://klionsec.github.io/2014/12/12/subdomain-info-serarch/)
- [WEBå®‰å…¨å…¥é—¨ç³»åˆ—ä¹‹ä¿¡æ¯æ”¶é›†](https://www.secpulse.com/archives/74312.html)
- [ã€è½¬ã€‘æµ…æå‰æœŸä¿¡æ¯æ”¶é›†æ–¹æ³•](http://www.nifengi.com/2017/10/18/%e3%80%90%e8%bd%ac%e3%80%91%e6%b5%85%e6%9e%90%e5%89%8d%e6%9c%9f%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86%e6%96%b9%e6%b3%95/)
- [[åŸåˆ›]å®‰å…¨æ”»åŸå¸ˆç³»åˆ—æ–‡ç« ï¼ä¿¡æ¯æ”¶é›†å·¥å…·ç¯‡-ã€WEBå®‰å…¨ã€-çœ‹é›ªå®‰å…¨è®ºå›](https://bbs.pediy.com/thread-217016.htm)
- [æ¸—é€æµ‹è¯•--01ä¿¡æ¯æœé›†](http://zjw.dropsec.xyz/%E6%B8%97%E9%80%8F/2017/08/03/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-01%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86.html)
- [â€å®‰å…¨çº¿â€œå¤§å‹ç›®æ ‡æ¸—é€](https://paper.tuisec.win/detail/ad2ddfc0965abe6)

**å·¥å…·**
- [smicallef/spiderfoot](https://github.com/smicallef/spiderfoot) - SpiderFoot æ˜¯ä¸€ä¸ª Python ç¼–å†™çš„å…è´¹å¼€æºçš„ç½‘ç«™ä¿¡æ¯æ”¶é›†ç±»å·¥å…·ï¼Œå¹¶ä¸”æ”¯æŒè·¨å¹³å°è¿è¡Œï¼Œé€‚ç”¨äº Linuxã€*BSD å’Œ Windows ç³»ç»Ÿã€‚æä¾›äº† GUI ç•Œé¢ã€‚å¯ä»¥è·å–ç½‘ç«™å­åŸŸã€ç”µå­é‚®ä»¶åœ°å€ã€web æœåŠ¡å™¨ç‰ˆæœ¬ç­‰ç­‰ä¿¡æ¯ã€‚

## çœŸå®IP

**æ–‡ç« **
- [ç»•è¿‡ CDN æŸ¥æ‰¾ç½‘ç«™çœŸå® IP](https://xiaix.me/rao-guo-cdncha-zhao-wang-zhan-zhen-shi-ip/)
- [ç»•è¿‡ cdn,æŸ¥æ‰¾çœŸå® IP | å†°ç¾½ã®åšå®¢](https://www.bingyublog.com/2018/03/25/%E7%BB%95%E8%BF%87cdn%EF%BC%8C%E6%9F%A5%E6%89%BE%E7%9C%9F%E5%AE%9EIP/)
- [èŠèŠ CDN çš„è¯¯åŒº - r34l!ty - ä¸è´Ÿå‹‡å¾€](http://rinige.com/index.php/archives/772/)
- [ç½‘ç«™çœŸå® IP å‘ç°æ‰‹æ®µæµ…è°ˆ - å®‰å…¨å®¢,å®‰å…¨èµ„è®¯å¹³å°](https://www.anquanke.com/post/id/163348)
- [å¦‚ä½•å¯»æ‰¾éšè—åœ¨ CloudFlare æˆ– TOR èƒŒåçš„çœŸå®åŸå§‹ IP - å˜¶å¼ RoarTalk](https://www.4hou.com/technology/13713.html)
- [CloudFlair: Bypassing Cloudflare using Internet-wide scan data](https://blog.christophetd.fr/bypassing-cloudflare-using-internet-wide-scan-data/)

**å·¥å…·**
- [pielco11/fav-up](https://github.com/pielco11/fav-up) - ä» favicon å›¾æ ‡æŸ¥çœŸå® IP çš„å·¥å…·,éœ€è¦ Shodan API(ä»˜è´¹çš„)
- [christophetd/CloudFlair](https://github.com/christophetd/cloudflair) - é€šè¿‡ä½¿ç”¨ Censys çš„æ•°æ®æŸ¥æ‰¾çœŸå® IP çš„å·¥å…·,éœ€è¦ Censys API
- [3xp10it/xcdn](https://github.com/3xp10it/xcdn) - å°è¯•æ‰¾å‡º cdn èƒŒåçš„çœŸå® ip çš„å·¥å…·
- [greycatz/CloudUnflare](https://github.com/greycatz/CloudUnflare) - ç”¨äºç»•è¿‡ Cloudflare ä¾¦æŸ¥çœŸå® IP åœ°å€.
- [boy-hack/w8fuckcdn](https://github.com/boy-hack/w8fuckcdn) - é€šè¿‡æ‰«æå…¨ç½‘ç»•è¿‡ CDN è·å–ç½‘ç«™ IP åœ°å€,å»ºè®®å‚è€ƒæ€è·¯,ä¸å»ºè®®å®æˆ˜å®ç”¨

**tips**
- Nslookup

    `nslookup + åŸŸå`

- phpinfo

- åˆ©ç”¨é‚®ä»¶æœåŠ¡å™¨æ‰¾åˆ°çœŸå® IP

    Web è·Ÿ Email æœåŠ¡å±åŒæœåŠ¡å™¨çš„æƒ…å†µä¸‹å¯ä»¥é€šè¿‡ Email æ¥æŸ¥è¯¢ç›®æ ‡çœŸå® IP åœ°å€ï¼Œä½†å¦‚æœ Web è·Ÿ Email å±ä¸åŒæœåŠ¡å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šè¿‡ Email å¾—åˆ°çš„å¯èƒ½åªæ˜¯é‚®ä»¶æœåŠ¡å™¨çš„ IP åœ°å€ã€‚

- å¤šåœ° ping åŸŸå

    åˆ©ç”¨åœ¨çº¿ç½‘ç«™æœåŠ¡å¤šåœ° ping æµ‹è¯•
    - [pingå·¥å…·](../../../../Plan/Web-Tools.md#pingå·¥å…·)

- "å¸¸è¯†"åˆ¤æ–­

    åœ¨åæŸ¥ç½‘ç«™ ip æ—¶,å¦‚æœæ­¤ç½‘ç«™æœ‰ 1000 å¤šä¸ªä¸åŒåŸŸå,é‚£ä¹ˆè¿™ä¸ª ip å¤šåŠä¸æ˜¯çœŸå® ip.

    å¦‚æœä¸€ä¸ª asp æˆ–è€… asp.net ç½‘ç«™è¿”å›çš„å¤´å­—æ®µçš„ server ä¸æ˜¯ IISã€è€Œæ˜¯ Nginx,é‚£ä¹ˆå¤šåŠæ˜¯ç”¨äº† nginx åå‘ä»£ç†,è€Œä¸æ˜¯çœŸå® ip.

    å¦‚æœ ip å®šä½æ˜¯åœ¨å¸¸è§ cdn æœåŠ¡å•†çš„æœåŠ¡å™¨ä¸Š,é‚£ä¹ˆæ˜¯çœŸå® ip çš„å¯èƒ½æ€§å°±å¾®ä¹å…¶å¾®äº†.

- å­åŸŸåæŸ¥æ‰¾

    åˆ©ç”¨ä¸€äº›åœ¨çº¿æŸ¥è¯¢çš„ç½‘ç«™,ä¾‹å¦‚ https://dnsdb.io/zh-cn/ åªéœ€è¾“å…¥ baidu.com type:A å°±èƒ½æ”¶é›†ç™¾åº¦çš„å­åŸŸåå’Œ ip

    Google æœç´¢ Google site:baidu.com -www å°±èƒ½æŸ¥çœ‹é™¤ www å¤–çš„å­åŸŸå

    æ€»ç»“:æ”¶é›†å­åŸŸååå°è¯•ä»¥è§£æ ip ä¸åœ¨ CDN ä¸Šçš„ ip è§£æä¸»ç«™,çœŸå® ip æˆåŠŸè¢«è·å–åˆ°.

- å†å² DNS è§£æè®°å½•

    > ä¸Šé¢ä¸‹é¢è¿™ä¹ˆå¤šæ–¹æ³•é‡Œï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æˆåŠŸç‡è¾ƒé«˜çš„äº†

    é€šè¿‡æŸ¥è¯¢å†å²çš„ DNS è§£æ IP,æœ‰å¯èƒ½å¾—åˆ°çœŸå® IP
    - [DNSè®°å½•](../../../../Plan/Web-Tools.md#DNSè®°å½•)

- SSL è¯ä¹¦
    - [CloudFlair: Bypassing Cloudflare using Internet-wide scan data](https://blog.christophetd.fr/bypassing-cloudflare-using-internet-wide-scan-data/)
    - https://www.censys.io

- æŸ¥è¯¢ç½‘ç«™æ ‡é¢˜æ‰¾åˆ°çœŸå® IP

    æœ‰æè®®é€šè¿‡éå†å…¨çƒ IP ç«¯å£åŒ¹é…æ ‡é¢˜æ¥æ‰¾æº IP çš„æ–¹æ³•,å¤ªä¸åˆ‡å®é™…äº†,ä¸å…¶è¿™æ ·ä¸å¦‚ç›´æ¥åˆ° shodan æœç´¢ç½‘ç«™æ ‡é¢˜ Title,è¿™æ ·è¯´ä¸å®šè¿˜æ›´å¿«.

- F5 LTM è§£ç æ³•

    å½“æœåŠ¡å™¨ä½¿ç”¨ F5 LTM åšè´Ÿè½½å‡è¡¡æ—¶,é€šè¿‡å¯¹ set-cookie å…³é”®å­—çš„è§£ç çœŸå® ip ä¹Ÿå¯è¢«è·å–,ä¾‹å¦‚:Set-Cookie: BIGipServerpool_8.29_8030=487098378.24095.0000,å…ˆæŠŠç¬¬ä¸€å°èŠ‚çš„åè¿›åˆ¶æ•°å³ 487098378 å–å‡ºæ¥,ç„¶åå°†å…¶è½¬ä¸ºåå…­è¿›åˆ¶æ•° 1d08880a,æ¥ç€ä»åè‡³å‰,ä»¥æ­¤å–å››ä½æ•°å‡ºæ¥,ä¹Ÿå°±æ˜¯ 0a.88.08.1d,æœ€åä¾æ¬¡æŠŠä»–ä»¬è½¬ä¸ºåè¿›åˆ¶æ•° 10.136.8.29,ä¹Ÿå°±æ˜¯æœ€åçš„çœŸå® ip.

    å…¶å®æˆ‘å°±åƒé—®ä¸€å¥,ä½ å®¶ç¥–ä¼ çš„ F5 è®¾å¤‡ä¸æ›´æ–°çš„å—ï¼Ÿ

- DDOS æ¶ˆè€—

    æˆ‘çœ‹è¿‡ä¸å°‘æ–‡ç« å°†é€šè¿‡ DDOS æ¥æ¶ˆè€—å¯¹æ–¹æµé‡,åªè¦æŠŠæµé‡æ‰“å…‰ï¼Œå°±ä¼šå›æ»šåˆ°åŸå§‹ IPï¼Œè¿˜ç‰¹åˆ«æ‹¿ cloudflare ä¸¾ä¾‹ï¼Œè¯´æ˜ä¸‹, cf å…è´¹ç‰ˆ ddos æ— é™é‡é˜²æŠ¤,ä¸è¿‡éƒ¨åˆ†å›½å†… CDN æ˜¯å¯ä»¥çš„ã€‚

- æ‹¿ä¸‹ CDN èŠ‚ç‚¹æœåŠ¡å™¨çš„æƒé™

    ç¦»è°±,ä½ è¿˜ä¸å¦‚ç¤¾å·¥ç®¡ç†å‘˜æœåŠ¡å™¨ IP åœ°å€æ¥å¾—å¿«å‘¢

---

## å­åŸŸ

å­åŸŸåæ‰«æå°½é‡é€šè¿‡ç¬¬ä¸‰æ–¹å¹³å°è¿›è¡Œæ”¶é›†ã€‚

**æ–‡ç« **
- [Subdomain Recon](https://echocipher.github.io/2019/07/24/Subdomain-Recon/)

**å­¦ä¹ èµ„æ–™**
- [appsecco/bugcrowd-levelup-subdomain-enumeration](https://github.com/appsecco/bugcrowd-levelup-subdomain-enumeration) - æ­¤èµ„æ–™åº“åŒ…å«äº†åœ¨ Bugcrowd LevelUp 2017 è™šæ‹Ÿä¼šè®®ä¸Šè¿›è¡Œçš„æ¼”è®² â€œç¥ç§˜çš„å­åŸŸæšä¸¾æŠ€æœ¯â€ ä¸­çš„æ‰€æœ‰æ¼”è®²ææ–™ï¼Œè§†é¢‘å’Œè„šæœ¬ã€‚

**å·¥å…·**
- [shmilylty/OneForAll](https://github.com/shmilylty/OneForAll) - éå¸¸ä¼˜ç§€çš„å­åŸŸåçˆ†ç ´å·¥å…·,æ¨è
    ```
    python3 oneforall.py --target example.com run
    ```
- [Threezh1/JSFinder](https://github.com/Threezh1/JSFinder) - é€šè¿‡åœ¨ js æ–‡ä»¶ä¸­æå– URL,å­åŸŸå
- [LangziFun/LangSrcCurise](https://github.com/LangziFun/LangSrcCurise) - æŒç»­æ€§çš„å­åŸŸåç›‘æ§
- [tomnomnom/assetfinder](https://github.com/tomnomnom/assetfinder) - GOè¯­è¨€ç¼–å†™,ä»ç¤¾äº¤ç½‘ç«™ã€å¨èƒæœç´¢å¼•æ“è·å–å­åŸŸçš„å·¥å…·
- [infosec-au/altdns](https://github.com/infosec-au/altdns) - ç”Ÿæˆå¤§é‡çš„å­åŸŸåˆ—è¡¨,é…åˆçˆ†ç ´å·¥å…·ä½¿ç”¨
- [Edu4rdSHL/findomain](https://github.com/Edu4rdSHL/findomain) - Rustè¯­è¨€ç¼–å†™çš„å­åŸŸæšä¸¾å·¥å…·
- [OWASP/Amass](https://github.com/OWASP/Amass) - å¤šåŠŸèƒ½ä¿¡æ¯æ”¶é›†å·¥å…·
- [lijiejie/subDomainsBrute](https://github.com/lijiejie/subDomainsBrute) - æœ¬å·¥å…·ç”¨äºæ¸—é€æµ‹è¯•ç›®æ ‡åŸŸåæ”¶é›†ã€‚é«˜å¹¶å‘DNSæš´åŠ›æšä¸¾
- [bit4woo/teemo](https://github.com/bit4woo/Teemo) - åŸŸåæ”¶é›†åŠæšä¸¾å·¥å…·
- [ring04h/wydomain](https://github.com/ring04h/wydomain) - pythonè¯­è¨€ç¼–å†™çš„å­åŸŸæšä¸¾å·¥å…·
- [fwaeytens/dnsenum](https://github.com/fwaeytens/dnsenum) - ä¸€ä¸ªæšä¸¾DNSä¿¡æ¯çš„ perl è„šæœ¬
- [mschwager/fierce](https://github.com/mschwager/fierce) - ä¸€ä¸ª DNS ä¾¦æŸ¥å·¥å…·ï¼Œç”¨äºæŸ¥æ‰¾éè¿ç»­ IP ç©ºé—´ã€‚
- [OJ/gobuster](https://github.com/OJ/gobuster) - go å†™çš„æšä¸¾å·¥å…·å¯çˆ†ç ´ç›®å½•ã€DNSã€è™šæ‹Ÿä¸»æœºå,é€Ÿåº¦æå¿«
- [esecuritylab/kostebek](https://github.com/esecuritylab/kostebek) - ä¸€ç§ä½¿ç”¨å…¬å¸å•†æ ‡ä¿¡æ¯æ¥å‘ç°å…¶åŸŸåçš„ä¾¦å¯Ÿå·¥å…·
- [MilindPurswani/Syborg](https://github.com/MilindPurswani/Syborg) - ä¸€ä¸ªé€’å½’ DNS åŸŸæšä¸¾å™¨ï¼Œå®ƒæ—¢ä¸æ˜¯ä¸»åŠ¨çš„ä¹Ÿä¸æ˜¯å®Œå…¨è¢«åŠ¨çš„ã€‚è¯¥å·¥å…·ä»…æ„é€ ä¸€ä¸ªåŸŸåï¼Œç„¶åä½¿ç”¨æŒ‡å®šçš„DNSæœåŠ¡å™¨æŸ¥è¯¢è¯¥åŸŸåã€‚
- [guelfoweb/knock](https://github.com/guelfoweb/knock) - python ç¼–å†™çš„ DNS æšä¸¾å·¥å…·ï¼Œæ”¯æŒå¯¹ VirusTotal å­åŸŸçš„æŸ¥è¯¢
- [tismayil/rsdl](https://github.com/tismayil/rsdl) - goè¯­è¨€ç¼–å†™,é‡‡ç”¨ ping æ–¹å¼çš„å­åŸŸæ‰«æå·¥å…·
- [joinsec/BadDNS](https://github.com/joinsec/BadDNS) - BadDNS æ˜¯ä¸€æ¬¾ä½¿ç”¨ Rust å¼€å‘çš„ä½¿ç”¨å…¬å…± DNS æœåŠ¡å™¨è¿›è¡Œå¤šå±‚å­åŸŸåæ¢æµ‹çš„æé€Ÿå·¥å…·ã€‚
    ```
    ./baddns -t target.txt -s domaindict-170W.txt -d depthdict.txt
    ```

**Tips**

- é€šè¿‡ HTTPS è¯ä¹¦æŸ¥è¯¢
    è§ [Censys](./æœç´¢å¼•æ“Hacking.md#Censys)

- ä»ä»£ç æ‰˜ç®¡ç½‘ç«™æˆ–åœ¨çº¿æœåŠ¡å•†æŸ¥è¯¢
    è§ [Github](./æœç´¢å¼•æ“Hacking.md#Github)

- ç¬¬ä¸‰æ–¹ç½‘ç«™æ¥å£æŸ¥è¯¢
    - https://www.riskiq.com/ - å†…å®¹éœ€æ³¨å†Œå¯è§
    - https://www.shodan.io/ - æ— éœ€æ³¨å†Œ
    - https://findsubdomains.com - å†…å®¹éœ€æ³¨å†Œå¯è§
    - censys.io - æ— éœ€æ³¨å†Œ
    - https://www.zoomeye.org/ - æ— éœ€æ³¨å†Œ
    - https://fofa.so/ - æ— éœ€æ³¨å†Œ
    - https://www.threatcrowd.org/ - æ— éœ€æ³¨å†Œ
    - https://dnsdumpster.com/ - æ— éœ€æ³¨å†Œ
    - https://securitytrails.com/ - æ— éœ€æ³¨å†Œ
    - https://viewdns.info/ - æ— éœ€æ³¨å†Œ
    - https://www.dnsdb.io/zh-cn/ - éƒ¨åˆ†å†…å®¹éœ€æ³¨å†Œå¯è§

- åœ¨çº¿ api
    ```bash
    https://dns.bufferover.run/dns?q=baidu.com  # è°ƒç”¨çš„ Rapid7 æ•°æ®
    ```
    - æ›´å¤šå¼€æ”¾ api å‚è€ƒ : https://opendata.rapid7.com/apihelp/
    - å¼€æ”¾æ•°æ®ä¸‹è½½ : https://opendata.rapid7.com/

---

## ç›®å½•å¤‡ä»½

**å­—å…¸**

å­—å…¸èµ„æºè§ Power-PenTest [Web å­—å…¸](../../../Power-PenTest.md#å­—å…¸) éƒ¨åˆ†

**æ–‡ç« **
- [ç†Ÿç»ƒä½¿ç”¨å„ç±»æ•æ„Ÿç›®å½•æ–‡ä»¶æ‰«æå·¥å…·](https://klionsec.github.io/2014/12/16/dirscan-tools/)

**å·¥å…·**
- [ffuf/ffuf](https://github.com/ffuf/ffuf) - go å†™çš„ web fuzz å·¥å…·,å¾ˆå¥½ç”¨,æ¨è
    ```
    ./ffuf -mc 200,301 -t 50 -w dic.txt -u http://testphp.vulnweb.com/FUZZ
    ```
- [wfuzz](../../../å·¥å…·/Wfuzz.md)
- [OJ/gobuster](https://github.com/OJ/gobuster) - go å†™çš„æšä¸¾å·¥å…·å¯çˆ†ç ´ç›®å½•ã€DNSã€è™šæ‹Ÿä¸»æœºå,æŠ¥é”™è¾ƒå¤š
    ```
    ./gobuster dir -u http://testphp.vulnweb.com/ -w dic.txt
    ```
- [nccgroup/dirble](https://github.com/nccgroup/dirble) - rust å†™çš„ç›®å½•æ‰«æå·¥å…·,æ•ˆæœä¸€èˆ¬
    ```
    ./dirble http://testphp.vulnweb.com/ -w dic.txt
    ```
- [maurosoria/dirsearch](https://github.com/maurosoria/dirsearch) - python å†™çš„ç›®å½•æ‰«æå·¥å…·,æ•ˆæœä¸€èˆ¬
- [Nekmo/dirhunt](https://github.com/Nekmo/dirhunt) - python å†™çš„ç›®å½•æ‰«æå·¥å…·,æ•ˆæœä¸€èˆ¬
- [Xyntax/DirBrute](https://github.com/Xyntax/DirBrute) - python å†™çš„ç›®å½•æ‰«æå·¥å…·,æ•ˆæœä¸€èˆ¬,ä¸”é•¿æœŸæœªæ›´æ–°
- [H4ckForJob/dirmap](https://github.com/H4ckForJob/dirmap) - python å†™çš„ web ç›®å½•ã€æ–‡ä»¶æ‰«æå·¥å…·
- [tomnomnom/waybackurls](https://github.com/tomnomnom/waybackurls) - æå– Wayback Machine å·²çŸ¥çš„åŸŸä¸‹æ‰€æœ‰ URL
    ```bash
    cat domains.txt | waybackurls > urls
    ```
- [0Kee-Team/crawlergo](https://github.com/0Kee-Team/crawlergo)
    ```bash
    # å‡è®¾ä½ çš„ chromium å®‰è£…åœ¨ /tmp/chromium/ ï¼Œå¼€å¯æœ€å¤§10æ ‡ç­¾é¡µï¼Œçˆ¬å– AWVS é¶åœº
    ./crawlergo -c /tmp/chromium/chrome -t 10 http://testphp.vulnweb.com/

    # ä½¿ç”¨ä»£ç†
    ./crawlergo -c /tmp/chromium/chrome -t 10 --request-proxy socks5://127.0.0.1:7891 http://testphp.vulnweb.com/

    # json è¾“å‡º
    ./crawlergo --output-json out.json -c /tmp/chromium/chrome -t 10 http://testphp.vulnweb.com/
    cat out.json | jq '.req_list' > out2.json
    cat out2.json | jq '.[].url' > url.txt
    sed -i 's/.//' url.txt && sed -i 's/.$//g' url.txt
    ```
    - [timwhitez/crawlergo_x_XRAY](https://github.com/timwhitez/crawlergo_x_XRAY) - crawlergo åŠ¨æ€çˆ¬è™«ç»“åˆé•¿äº­ XRAY æ‰«æå™¨çš„è¢«åŠ¨æ‰«æåŠŸèƒ½
    - [ox01024/Xray_and_crwlergo_in_server](https://github.com/ox01024/Xray_and_crwlergo_in_server) - xray ä¸ crwlergo è”åŠ¨+server é…±æ¨é€

**Tips**

- ä½¿ç”¨ burp çš„ Intruder çˆ†ç ´æ¨¡å—æ‰«æç›®å½•ä¹Ÿæ˜¯ä»¥ä¸€ç§å¾ˆå¥½çš„é€‰æ‹©ï¼Œå½“å…¶ä»–æ‰«æå™¨æ²¡æœ‰ç»“æœæ—¶ä¸å¦¨å°è¯•ä¸€ä¸‹ã€‚

---

## æŒ‡çº¹

**åœ¨çº¿å·¥å…·**
- [æŒ‡çº¹](../../../../Plan/Web-Tools.md#æŒ‡çº¹)

**æ–‡ç« **
- [WAF æŒ‡çº¹æ¢æµ‹åŠè¯†åˆ«æŠ€æœ¯](https://www.freebuf.com/articles/web/21744.html)
- [é˜»ç¢è·å–çœŸå®ç½‘ç»œæŒ‡çº¹](http://b404.xyz/2018/01/27/hidden-the-network/)

**å·¥å…·**
- [urbanadventurer/WhatWeb](https://github.com/urbanadventurer/WhatWeb) - è¯†åˆ«ç½‘ç«™çš„å·¥å…·,å¯¹å›½å¤–çš„ç¯å¢ƒç”¨èµ·æ¥æŒºå‡†,å›½å†…å»ºè®®è¿˜æ˜¯äº‘æ‚‰
- [tanjiti/FingerPrint](https://github.com/tanjiti/FingerPrint) - web åº”ç”¨æŒ‡çº¹è¯†åˆ«
- [webanalyzer/rules](https://github.com/webanalyzer/rules) - é€šç”¨çš„æŒ‡çº¹è¯†åˆ«è§„åˆ™
- [TideSec/TideFinger](https://github.com/TideSec/TideFinger) - æŒ‡çº¹è¯†åˆ«å°å·¥å…·
- Wappalyzer
    - [firefox æ‰©å±•](https://addons.mozilla.org/zh-CN/firefox/addon/wappalyzer/)
    - [chrome æ‰©å±•](https://chrome.google.com/webstore/detail/wappalyzer/gppongmhjkpfnbhagpmjfkannfbllamg)
- Shodan
    - [firefox æ‰©å±•](https://addons.mozilla.org/zh-CN/firefox/addon/shodan_io/)
    - [chrome æ‰©å±•](https://chrome.google.com/webstore/detail/shodan/jjalcfnidlmpjhdfepjhjbhnhkbgleap)

---

## æ—ç«™

**åœ¨çº¿å·¥å…·**
- [æ—ç«™](../../../../Plan/Web-Tools.md#æ—ç«™)

---

## å†å²å¿«ç…§

**åœ¨çº¿å·¥å…·**
- http://2tool.top/
- https://archive.org/

**ä¾‹å­**
```
https://webcache.googleusercontent.com/search?q=cache:www.baidu.com
```

---

## whoisä¸å¤‡æ¡ˆ

**åœ¨çº¿ whois æŸ¥è¯¢**
- [whoisæŸ¥è¯¢](../../../../Plan/Web-Tools.md#whoisæŸ¥è¯¢)

**åœ¨çº¿å¤‡æ¡ˆæŸ¥è¯¢**
- [å¤‡æ¡ˆæŸ¥è¯¢](../../../../Plan/Web-Tools.md#å¤‡æ¡ˆæŸ¥è¯¢)

**whois å·¥å…·**
- http://www.freebuf.com/articles/network/107372.html

---

# å¦ç±»
## æˆªå›¾

**å·¥å…·**
- [FortyNorthSecurity/EyeWitness](https://github.com/FortyNorthSecurity/EyeWitness) - è·å–ç½‘ç«™çš„å±å¹•æˆªå›¾,æä¾›ä¸€äº›æœåŠ¡å™¨æ ‡å¤´ä¿¡æ¯,å¹¶åœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¯†åˆ«é»˜è®¤å‡­æ®.(è¦ä¸‹çš„ä¾èµ–æŒºå¤šçš„,æ¯”è¾ƒè´¹åŠŸå¤«)
- [michenriksen/aquatone](https://github.com/michenriksen/aquatone) - ç”¨äºå¯¹å¤§é‡ä¸»æœºä¸Šçš„ç½‘ç«™è¿›è¡Œå¯è§†åŒ–æ£€æŸ¥çš„å·¥å…·
- [Nmap-Tools/NSE/http-screenshot.nse](https://github.com/SpiderLabs/Nmap-Tools/blob/master/NSE/http-screenshot.nse) - å¯ä»¥æˆªå›¾çš„ Nmap è„šæœ¬
- [TheKingOfDuck/domain_screen](https://github.com/TheKingOfDuck/domain_screen) - æ‰¹é‡é‡‡é›†ç«™ç‚¹åŸºç¡€ä¿¡æ¯&æˆªå›¾ã€‚

---

# OSINT

ä¸è¦è„¸çš„æ¨èä¸‹è‡ªå·±çš„é¡¹ç›®,å˜¿å˜¿å˜¿ğŸ˜Š

- [Digital-Privacy](https://github.com/ffffffff0x/Digital-Privacy#OSINT) - ä¸€ä¸ªå…³äºæ•°å­—éšç§æœé›†ã€ä¿æŠ¤ã€æ¸…ç†é›†ä¸€ä½“çš„æ–¹æ¡ˆ,å¤–åŠ å¼€æºä¿¡æ¯æ”¶é›†(OSINT)å¯¹æŠ—
