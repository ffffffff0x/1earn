```
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                           â–ˆâ–ˆ       â–ˆâ–ˆ
â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–ˆâ–ˆ                                         â–‘â–ˆâ–ˆ      â–‘â–‘
â–‘â–ˆâ–ˆ   â–‘â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–‘â–ˆâ–ˆ       â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ
â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆ  â–ˆ â–‘â–ˆâ–ˆ â–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–‘â–‘â–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆ â–ˆâ–ˆ
â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–‘  â–‘â–ˆâ–ˆ   â–‘â–ˆâ–ˆ â–‘â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆ â–‘ â–‘â–‘â–‘â–‘â–‘ â–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆ â–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆ â–‘â–‘â–ˆâ–ˆâ–ˆ
â–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆ   â–‘â–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆâ–‘â–‘â–‘â–‘  â–‘â–ˆâ–ˆ         â–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆ â–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆ  â–ˆâ–ˆâ–‘â–ˆâ–ˆ
â–‘â–ˆâ–ˆ      â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–‘ â–‘â–‘â–‘â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆ         â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆ â–ˆâ–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ â–‘â–‘â–ˆâ–ˆ
â–‘â–‘        â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–‘    â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘â–‘          â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘ â–‘â–‘â–‘   â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘   â–‘â–‘
```

`Linux ä¸‹å„ç§å¸¸è§æœåŠ¡çš„æ­å»º/é…ç½®æŒ‡å—`

`å¤§éƒ¨åˆ†é€‚ç”¨äº Centos7`

`ç›®å‰ä¸»è¦ä»¥å®‰è£…æ­å»ºä¸ºä¸»,æ›´æ·±ä¸€æ­¥çš„é…ç½®è¯·è‡ªè¡Œç ”ç©¶`

`æ³¨:å¦‚æœä½ çš„æœåŠ¡å™¨ä¸åœ¨å›½å¤–,è¯·ä½ ä¸€å®šè¦å­¦ä¹ ä¸€ä¸‹ç»™æœåŠ¡å™¨åŠ é€Ÿçš„æ–¹æ³•ğŸ¤£ğŸ˜‚ğŸ¤£`

<p align="center">
     <a href="https://www.wikiart.org/en/gustave-caillebotte/the-garden-at-petit-gennevilliers"><img src="../../../assets/img/è¿ç»´/Linux/Power-Linux.jpg" width="70%"></a>
</p>

---

## å¤§çº²

`æ³¨: æœªå¯¹ gitbook é¡µé¢é“¾æ¥è·³è½¬è¿›è¡Œä¼˜åŒ–,è§è°…`

**ğŸ¥©å¸¸è§æœåŠ¡**

* [Lvm](#Lvm)
* [Net](#Net)
* [RAID](#RAID)
* [Vim](#Vim)

**ğŸœç½‘ç»œæœåŠ¡**

* [AdguardTeam](#AdguardTeam)
* [Chrony](#Chrony)
* [cloud-torrent](#cloud-torrent)
* [DHCP](#DHCP)
* [DNS](#DNS)
* [Kicktart](#Kicktart)
* [OpenVPN](#OpenVPN)
* [proxychains](#proxychains)
* [SSH](#SSH)

**ğŸ¦webæœåŠ¡-ä¸­é—´ä»¶**

* [Apache](#Apache)
* [Caddy](#Caddy)
* [npm & Node](#npm&Node)
* [Nexus](#Nexus)
* [Nginx](#Nginx)
* [PHP](#PHP)
* [phpMyAdmin](#phpMyAdmin)
* [RabbitMQ](#RabbitMQ)
* [Tomcat](#Tomcat)
* [Wordpress](#Wordpress)
* [Mijisou](#Mijisou)

**ğŸ‰æ•°æ®åº“**

* [Relational](#Relational)
  * [Oracle](#Oracle)
  * [Mariadb](#Mariadb)
  * [MySQL](#MySQL)
  * [Postgresql](#Postgresql)
* [Document](#Document)
  * [MongoDB](#MongoDB)
* [Key-value](#Key-value)
  * [Redis](#Redis)
  * [Memcached](#Memcached)
* [å›¾å½¢](#å›¾å½¢)
  * [Neo4j](#Neo4j)

**ğŸ£æ–‡ä»¶æœåŠ¡**

* [filebrowser](#filebrowser)
* [NFS](#NFS)
* [Samba](#Samba)
* [Vsftp](#Vsftp)

**ğŸ—ç¼–ç¨‹è¯­è¨€**

* [C](#C)
* [Go](#Go)
* [JDK](#JDK)
* [Python3](#Python3)
* [Ruby](#Ruby)

**ğŸç³»ç»Ÿç›‘ç®¡**

* [BaoTa](#BaoTa)
* [Jenkins](#Jenkins)
* [Jumpserver](#Jumpserver)
* [Loganalyzer](#Loganalyzer)
* [Supervisor](#Supervisor)
* [Webmin](#Webmin)
* [Zabbix](#Zabbix)

**ğŸŒ­è™šæ‹ŸåŒ–**

* [Docker](#Docker)

**ğŸ¯å®‰å…¨æœåŠ¡**

* [ClamAV](#ClamAV)
* [Fail2ban](#Fail2ban)

---

# å¸¸è§æœåŠ¡
## Lvm

```bash
fdiskÂ â€l		# æŸ¥çœ‹ç£ç›˜æƒ…å†µ
fdiskÂ /dev/sdb	# åˆ›å»ºç³»ç»Ÿåˆ†åŒº
	n
	p
	1
	åé¢éƒ½æ˜¯é»˜è®¤,ç›´æ¥å›è½¦

	t	# è½¬æ¢åˆ†åŒºæ ¼å¼
	8e

	w	# å†™å…¥åˆ†åŒºè¡¨
```

**å·ç»„**

åˆ›å»ºä¸€ä¸ªåä¸º datastore çš„å·ç»„,å·ç»„çš„PEå°ºå¯¸ä¸º 16MBï¼›
```bash
pvcreateÂ /dev/sdb1	# åˆå§‹åŒ–ç‰©ç†å·
vgcreateÂ â€sÂ 16MÂ datastoreÂ /dev/sdb1 # åˆ›å»ºç‰©ç†å·
```

**é€»è¾‘å·**

é€»è¾‘å·çš„åç§°ä¸º database æ‰€å±å·ç»„ä¸º datastore,è¯¥é€»è¾‘å·ç”± 50 ä¸ª PE ç»„æˆï¼›
```bash
lvcreateÂ â€lÂ 50Â â€nÂ databaseÂ datastore
```

é€»è¾‘å·çš„åç§°ä¸ºdatabaseæ‰€å±å·ç»„ä¸ºdatastore,è¯¥é€»è¾‘å·å¤§å°ä¸º8GBï¼›
```bash
lvcreateÂ â€LÂ 8GÂ â€nÂ databaseÂ datastore
lvdisplay
```

**æ ¼å¼åŒ–**

å°†æ–°å»ºçš„é€»è¾‘å·æ ¼å¼åŒ–ä¸º XFS æ–‡ä»¶ç³»ç»Ÿ,è¦æ±‚åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶èƒ½å¤Ÿè‡ªåŠ¨æŒ‚åœ¨åˆ° /mnt/database ç›®å½•.
```bash
mkfs.xfsÂ /dev/datastore/database
mkdirÂ /mnt/database
```
```vim
viÂ /etc/fstab
/dev/datastore/databaseÂ /mnt/database/Â xfsÂ defaultsÂ 0Â 0
```

é‡å¯éªŒè¯
```bash
shutdown -r now
mountÂ |Â grepÂ '^/dev'
```

**æ‰©å®¹**

å°† database é€»è¾‘å·æ‰©å®¹è‡³ 15GB ç©ºé—´å¤§å°,ä»¥æ»¡è¶³ä¸šåŠ¡éœ€æ±‚.
```bash
lvextend -L 15G /dev/datastore/database
lvs	# ç¡®è®¤æœ‰è¶³å¤Ÿç©ºé—´
resize2fs /dev/datastore/database
lvdisplay
```

---

## Net

**centos é…ç½®ç½‘å¡**
```vim
vim /etc/sysconfig/network-scripts/ifcfg-eth0

DEVICE="enoXXXXXX"
BOOTPROTO=static  # ä½¿ç”¨é™æ€ IP,è€Œä¸æ˜¯ç”± DHCP åˆ†é… IP
IPADDR=172.16.102.61
PREFIX=24
ONBOOT=yes
GATEWAY=172.16.102.254
HOSTNAME=dns1.abc.com
DNS1=223.5.5.5
```

**ä¿®æ”¹ä¸»æœºå**
```vim
vim /etc/hosts

127.0.0.1  test localhost # ä¿®æ”¹ localhost.localdomain ä¸º test,shutdown -r now é‡å¯ä½¿ä¿®æ”¹ç”Ÿæ•ˆ
```

**ä¿®æ”¹ DNS**
```vim
vim /etc/resolv.conf

nameserver 8.8.8.8
```
`service network restart`

---

## RAID

**å®‰è£…**

`yum remove mdadm`	# å»ºè®®å…ˆæŠŠåŸæœ¬çš„å¸æ‰é‡è£…

`yum install mdadm`

**åˆ†åŒº**
```bash
fdisk /dev/sdb
n åˆ›å»º
p ä¸»åˆ†åŒº
æ¥ä¸‹æ¥ä¸€è·¯å›è½¦é€‰é»˜è®¤å€¼
w å†™å…¥

fdisk /dev/sdc
n åˆ›å»º
p ä¸»åˆ†åŒº
æ¥ä¸‹æ¥ä¸€è·¯å›è½¦é€‰é»˜è®¤å€¼
w å†™å…¥
```

**åˆ›å»ºé˜µåˆ—**
- RAID1

	`mdadm -Cv /dev/md0 -a yes -l1 -n2 /dev/sd[b,c]1`
	- -Cv: åˆ›å»ºä¸€ä¸ªé˜µåˆ—å¹¶æ‰“å°å‡ºè¯¦ç»†ä¿¡æ¯.
	- /dev/md0: é˜µåˆ—åç§°.
	-aã€€: åŒæ„åˆ›å»ºè®¾å¤‡,å¦‚ä¸åŠ æ­¤å‚æ•°æ—¶å¿…é¡»å…ˆä½¿ç”¨ mknod å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ª RAID è®¾å¤‡,ä¸è¿‡æ¨èä½¿ç”¨ -a yes å‚æ•°ä¸€æ¬¡æ€§åˆ›å»ºï¼›
	- -l1 (l as in "level"): æŒ‡å®šé˜µåˆ—ç±»å‹ä¸º RAID-1 .
	- -n2: æŒ‡å®šæˆ‘ä»¬å°†ä¸¤ä¸ªåˆ†åŒºåŠ å…¥åˆ°é˜µåˆ—ä¸­å»,åˆ†åˆ«ä¸º/dev/sdb1 å’Œ /dev/sdc1

- RAID5

	`mdadm -Cv /dev/md0 -a yes -l5 -n3 /dev/sd[b,c,d]1`

	å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹è¿›åº¦ï¼š

	`cat /proc/mdstat`

	å¦å¤–ä¸€ä¸ªè·å–é˜µåˆ—ä¿¡æ¯çš„æ–¹æ³•æ˜¯ï¼š

	`mdadm -D /dev/md0`

**æ ¼å¼åŒ–ä¸º xfs**

`mkfs.xfs /dev/md0`

**ä»¥ UUID çš„å½¢å¼å¼€æœºè‡ªåŠ¨æŒ‚è½½**
```bash
mkdirÂ /data/ftp_data
blkid	/dev/md0 # æŸ¥ UUID å€¼
```
```vim
vimÂ /etc/fstab
UUID=XXXXXXXXXXXXXXXXXXXXXXXXXXÂ    /data/ftp_data Â xfsÂ defaultsÂ 0Â 0
```
```bash
shutdown -r now # é‡å¯éªŒè¯
mountÂ |Â grepÂ '^/dev'
```

---

## Vim

**å¸¸ç”¨æ“ä½œ**
```
Normal æ¨¡å¼ä¸‹ i è¿›å…¥ insert æ¨¡å¼
:wq å­˜ç›˜+é€€å‡º
dd åˆ é™¤å½“å‰è¡Œ,å¹¶å­˜å…¥å‰ªåˆ‡æ¿
p ç²˜è´´
:qï¼å¼ºåˆ¶é€€å‡º
:wqï¼å¼ºåˆ¶ä¿å­˜é€€å‡º
:w !sudo tee %  æ—  root æƒé™,ä¿å­˜ç¼–è¾‘çš„æ–‡ä»¶
:saveas <path/to/file> å¦å­˜ä¸º
æŒ‰ä¸‹ / å³å¯è¿›å…¥æŸ¥æ‰¾æ¨¡å¼,è¾“å…¥è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å¹¶æŒ‰ä¸‹å›è½¦. Vim ä¼šè·³è½¬åˆ°ç¬¬ä¸€ä¸ªåŒ¹é….æŒ‰ä¸‹ n æŸ¥æ‰¾ä¸‹ä¸€ä¸ª,æŒ‰ä¸‹ N æŸ¥æ‰¾ä¸Šä¸€ä¸ª.
:%s/foo/bar ä»£è¡¨æ›¿æ¢ foo ä¸º bar
insert æ¨¡å¼æŒ‰ ESC é”®,è¿”å› Normal æ¨¡å¼
```

**å¸¸ç”¨é…ç½®**

`sudo vim /etc/vim/vimrc` æˆ– `sudo vim /etc/vimrc`
æœ€åé¢ç›´æ¥æ·»åŠ ä½ æƒ³æ·»åŠ çš„é…ç½®,ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„ (ä¸å»ºè®®ç›´æ¥å¤åˆ¶è¿™ä¸ªè´§ç½‘ä¸Šçš„,è¦ç†è§£æ¯ä¸ªçš„å«ä¹‰åŠæœ‰ä»€ä¹ˆç”¨,æ ¹æ®è‡ªå·±éœ€è¦æ¥è°ƒæ•´)
```vim
set number # æ˜¾ç¤ºè¡Œå·
set nobackup # è¦†ç›–æ–‡ä»¶æ—¶ä¸å¤‡ä»½
set cursorline # çªå‡ºæ˜¾ç¤ºå½“å‰è¡Œ
set ruler # åœ¨å³ä¸‹è§’æ˜¾ç¤ºå…‰æ ‡ä½ç½®çš„çŠ¶æ€è¡Œ
set shiftwidth=4 # è®¾å®š > å‘½ä»¤ç§»åŠ¨æ—¶çš„å®½åº¦ä¸º 4
set softtabstop=4 # ä½¿å¾—æŒ‰é€€æ ¼é”®æ—¶å¯ä»¥ä¸€æ¬¡åˆ æ‰ 4 ä¸ªç©ºæ ¼
set tabstop=4 # è®¾å®š tab é•¿åº¦ä¸º 4(å¯ä»¥æ”¹)
set smartindent # å¼€å¯æ–°è¡Œæ—¶ä½¿ç”¨æ™ºèƒ½è‡ªåŠ¨ç¼©è¿›
set ignorecase smartcase # æœç´¢æ—¶å¿½ç•¥å¤§å°å†™,ä½†åœ¨æœ‰ä¸€ä¸ªæˆ–ä»¥ä¸Šå¤§å†™å­—æ¯æ—¶ä» ä¿æŒå¯¹å¤§å°å†™æ•æ„Ÿ

ä¸‹é¢è¿™ä¸ªæ²¡è§‰å¾—å¾ˆæœ‰ç”¨,åœ¨ä»£ç å¤šçš„æ—¶å€™ä¼šæ¯”è¾ƒå¥½
#set showmatch # æ’å…¥æ‹¬å·æ—¶,çŸ­æš‚åœ°è·³è½¬åˆ°åŒ¹é…çš„å¯¹åº”æ‹¬å·
#set matchtime=2 # çŸ­æš‚è·³è½¬åˆ°åŒ¹é…æ‹¬å·çš„æ—¶é—´
```

**ä½¿ç”¨ vim å¯¹æ¯”æ–‡ä»¶**

`vimdiff  FILE_LEFT  FILE_RIGHT`

**è§£å†³ ssh å vim ä¸­ä¸èƒ½ä½¿ç”¨å°é”®ç›˜çš„é—®é¢˜**
- xshell

  æ›´æ”¹çš„æ–¹æ³•: åœ¨ç»ˆç«¯è®¾ç½®ä¸­é€‰æ‹©ç»ˆç«¯ç±»å‹ä¸º linux

- ubuntu
  ```bash
  sudo apt-get remove vim-common
  sudo apt-get install vim
  ```

**[SpaceVim - æ¨¡å—åŒ–çš„ Vim IDE](https://spacevim.org/cn/)**

---

# ç½‘ç»œæœåŠ¡
## AdguardTeam

`ä¸€ä¸ª DNS å»å¹¿å‘Šã€å»è·Ÿè¸ªçš„æœåŠ¡`

**é¡¹ç›®åœ°å€**
- https://github.com/AdguardTeam/AdGuardHome

**å®‰è£…**
```bash
mkdir -p /opt/adguard && cd /opt/adguard
wget https://github.com/AdguardTeam/AdGuardHome/releases/download/v0.95-hotfix/AdGuardHome_v0.95-hotfix_linux_amd64.tar.gz
tar -xzvf AdGuardHome_v0.94_linux_amd64.tar.gz
cd AdGuardHome
./AdGuardHome -s install

systemctl stop firewalld
```

**å…¶ä»–ç®¡ç†å‘½ä»¤**
```bash
./AdGuardHome -s uninstall
./AdGuardHome -s start
./AdGuardHome -s stop
./AdGuardHome -s restart
./AdGuardHome -s status
```
æ— è¯¯çš„è¯è®¿é—®æœåŠ¡å™¨ IP+ç«¯å£ 3000 å°±å¯ä»¥çœ‹åˆ°ç®¡ç†é¡µé¢äº†

---

## Chrony

`ä¸€ä¸ªæ—¶é—´åŒæ­¥è½¯ä»¶,å¯ç”¨äºæ­å»ºç±» NTP æ—¶é—´æœåŠ¡`

**å®˜ç½‘**
- https://chrony.tuxfamily.org/

**ç®€ä»‹**

å®ƒç”±ä¸¤ä¸ªç¨‹åºç»„æˆï¼šchronyd å’Œ chronyc.

chronyd æ˜¯ä¸€ä¸ªåå°è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹,ç”¨äºè°ƒæ•´å†…æ ¸ä¸­è¿è¡Œçš„ç³»ç»Ÿæ—¶é’Ÿå’Œæ—¶é’ŸæœåŠ¡å™¨åŒæ­¥.å®ƒç¡®å®šè®¡ç®—æœºå¢å‡æ—¶é—´çš„æ¯”ç‡,å¹¶å¯¹æ­¤è¿›è¡Œè¡¥å¿.

chronyc æ˜¯ç”¨æ¥ç›‘æ§ chronyd æ€§èƒ½å’Œé…ç½®å…¶å‚æ•°ç¨‹åº

**å®‰è£…**
```bash
yum install chrony
```

**é…ç½®æ–‡ä»¶**
```vim
vim /etc/chrony.conf

server time1.aliyun.com iburst
server time2.aliyun.com iburst
server time3.aliyun.com iburst
server time4.aliyun.com iburst
server time5.aliyun.com iburst
server time6.aliyun.com iburst
server time7.aliyun.com iburst
# æˆ–
server time1.google.com iburst
server time2.google.com iburst
server time3.google.com iburst
server time4.google.com iburst
```

**å¯æœåŠ¡**
```bash
systemctl stop ntpd
systemctl disable ntpd

systemctl enable chronyd.service
systemctl start chronyd.service
```

**æŸ¥çœ‹åŒæ­¥çŠ¶æ€**
```bash
chronyc sourcestats # æ£€æŸ¥ ntp æºæœåŠ¡å™¨çŠ¶æ€
chronyc sources -v  # æ£€æŸ¥ ntp è¯¦ç»†åŒæ­¥çŠ¶æ€

chronyc # è¿›å…¥äº¤äº’æ¨¡å¼
  activity
```

---

## cloud-torrent

`web torrent ä¸‹è½½æœåŠ¡`

**é¡¹ç›®åœ°å€**
- https://github.com/jpillora/cloud-torrent

**å®‰è£…**

`curl https://i.jpillora.com/cloud-torrent! | bash`

**è¿è¡Œ**

`cloud-torrent -o`

`æˆ‘æ—¥,å°±è¿™ä¹ˆç®€å•`

---

## DHCP

**å®‰è£…**

`yum install dhcp`

**å¤åˆ¶ä¸€ä»½ç¤ºä¾‹**

`cp /usr/share/doc/dhcp-4.1.1/dhcpd.conf.sample /etc/dhcp/dhcpd.conf`

**ä¿®æ”¹é…ç½®æ–‡ä»¶**
```vim
vim /etc/dhcp/dhcpd.conf

ddns-update-style interim;      # è®¾ç½® DNS çš„åŠ¨æ€æ›´æ–°æ–¹å¼ä¸º interim
option domain-name "abc.edu";
option domain-name-servers  8.8.8.8;           # æŒ‡å®š DNS æœåŠ¡å™¨åœ°å€
default-lease-time  43200;                          # æŒ‡å®šé»˜è®¤ç§Ÿçº¦çš„æ—¶é—´é•¿åº¦,å•ä½ä¸ºç§’
max-lease-time  86400;  # æŒ‡å®šæœ€å¤§ç§Ÿçº¦çš„æ—¶é—´é•¿åº¦

# ä»¥ä¸‹ä¸ºæŸåŒºåŸŸçš„ IP åœ°å€èŒƒå›´

subnet 192.168.1.0 netmask 255.255.255.0 {         # å®šä¹‰ DHCP ä½œç”¨åŸŸ
	range  192.168.1.20 192.168.1.100;                # æŒ‡å®šå¯åˆ†é…çš„ IP åœ°å€èŒƒå›´
	option routers  192.168.1.254;                       # æŒ‡å®šè¯¥ç½‘æ®µçš„é»˜è®¤ç½‘å…³
}
```
```bash
dhcpd -t    # æ£€æµ‹è¯­æ³•æœ‰æ— é”™è¯¯
service dhcpd start    # å¼€å¯ dhcp æœåŠ¡

firewall-cmd --zone=public --add-service=dhcp --permanent
firewall-cmd --reload # è®°å¾—é˜²ç«å¢™æ”¾è¡Œ

cat /var/lib/dhcpd/dhcpd.leases # æŸ¥çœ‹ç§Ÿçº¦æ–‡ä»¶,äº†è§£ç§Ÿç”¨æƒ…å†µ
```
---

## DNS

**å®‰è£…**

`yum install bind-*`

**ä¸»é…ç½®æ–‡ä»¶**
```vim
vim /etc/named.conf

options {
    listen-on port 53 { any; };
    listen-on-v6 port 53 { any; };
    allow-query     { any; };
}
```

**åŒºåŸŸé…ç½®æ–‡ä»¶**
```vim
vim /etc/named.rfc1912.zones

zone "abc.com" IN {
        type master;
        file "abc.localhost";
};

zone "1.1.1.in-addr.arpa" IN {
        type master;
        file "abc.loopback";
};

zone "2.1.1.in-addr.arpa" IN {
        type master;
        file "www.loopback";
};
```

**åˆ›å»ºåŒºåŸŸæ•°æ®æ–‡ä»¶**
```bash
cd /var/named/
cp named.localhost abc.localhost
cp named.loopback abc.loopback
cp named.loopback www.loopback

chown named abc.localhost
chown named abc.loopback
chown named www.loopback
```

**åŸŸåæ­£å‘åå‘è§£æé…ç½®æ–‡ä»¶**
```vim
vim /var/named/abc.localhost

$TTL 1D
@      IN SOA  @ rname.invalid. (
                                      	0      ; serial
                                      	1D      ; refresh
                                      	1H      ; retry
                                      	1W      ; expire
                                      	3H )    ; minimum
      	NS     @
     		A      127.0.0.1
	    	AAAA   ::1
ftp    	A      1.1.1.1
www     A      1.1.2.1
```
```vim
vim /var/named/abc.loopback

$TTL 1D
@	IN SOA  @ rname.invalid. (
  	                                    0 ; serial
                                      	1D ; refresh
                                      	1H ; retry
                                      	1W ; expire
                                      	3H ) ; minimum
      	NS 		@
      	A 		127.0.0.1
      	AAAA	::1
      	PTR 	localhost.
1 PTR ftp.abc.com.
```
```vim
vim /var/named/www.loopback

$TTL 1D
@ 		IN SOA  @ rname.invalid. (
  	                                    0 ; serial
                                      	1D ; refresh
                                      	1H ; retry
                                      	1W ; expire
                                      	3H ) ; minimum
      	NS 		@
      	A 		127.0.0.1
      	AAAA	::1
      	PTR 	localhost.
1 PTR www.abc.com.
```

**å¯æœåŠ¡**
```bash
named-checkconf
named-checkzone abc.com abc.localhost
named-checkzone abc.com abc.loopback
named-checkzone abc.com www.loopback
service named restart

setenforce 0  # å…³é—­ selinux
firewall-cmd --zone=public --add-service=dns --permanent
firewall-cmd --reload
```

**æ›´å¤šé…ç½®æ¡ˆä¾‹**

è§ [dns.md](./å®éªŒ/dns.md)

---

## Kicktart

`æ˜¯ Kicktart ä¸æ˜¯ kickstarter,è¿™ç©æ„ä¸èƒ½ä¼—ç­¹,è¿™æ˜¯ç”¨äºè”ç½‘å®‰è£…ç³»ç»Ÿæ—¶ç»™ PXE æœåŠ¡æä¾›åº”ç­”æ–‡ä»¶çš„`

- è°ƒç”¨æœåŠ¡:PXE + TFTP +FTP + DHCP + Kickstart
- ç¯å¢ƒ:VMWARE
- 1å°æ— äººå€¼å®ˆç³»ç»Ÿâ€”â€”RHEL 7â€”â€”192.168.10.10
- 1å°å®¢æˆ·ç«¯â€”â€”æœªå®‰è£…æ“ä½œç³»ç»Ÿ

æ³¨ï¼švmware ä¸­åšå®éªŒéœ€è¦åœ¨è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ä¸­å°† dhcp æœåŠ¡å…³é—­

**é…ç½® DHCP**

DHCP æœåŠ¡ç¨‹åºç”¨äºä¸ºå®¢æˆ·ç«¯ä¸»æœºåˆ†é…å¯ç”¨çš„ IP åœ°å€,è€Œä¸”è¿™æ˜¯æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¸»æœºè¿›è¡Œæ–‡ä»¶ä¼ è¾“çš„åŸºç¡€

`yum -y install dhcp`

```vim
# è¿™é‡Œä½¿ç”¨çš„é…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ªä¸»è¦åŒºåˆ«ï¼šå…è®¸äº† BOOTP å¼•å¯¼ç¨‹åºåè®®,æ—¨åœ¨è®©å±€åŸŸç½‘å†…æš‚æ—¶æ²¡æœ‰æ“ä½œç³»ç»Ÿçš„ä¸»æœºä¹Ÿèƒ½è·å–é™æ€ IP åœ°å€ï¼›åœ¨é…ç½®æ–‡ä»¶çš„æœ€ä¸‹é¢åŠ è½½äº†å¼•å¯¼é©±åŠ¨æ–‡ä»¶ pxelinux.0 (è¿™ä¸ªæ–‡ä»¶ä¼šåœ¨ä¸‹é¢çš„æ­¥éª¤ä¸­åˆ›å»º) ,å…¶ç›®çš„æ˜¯è®©å®¢æˆ·ç«¯ä¸»æœºè·å–åˆ° IP åœ°å€åä¸»åŠ¨è·å–å¼•å¯¼é©±åŠ¨æ–‡ä»¶,è‡ªè¡Œè¿›å…¥ä¸‹ä¸€æ­¥çš„å®‰è£…è¿‡ç¨‹.
vim /etc/dhcp/dhcpd.conf

allow booting;
allow bootp;
ddns-update-style interim;
ignore client-updates;
subnet 192.168.0.0 netmask 255.255.255.0 {
        option subnet-mask 255.255.255.0;
        option domain-name-servers 192.168.10.10;
        range dynamic-bootp 192.168.10.100 192.168.10.200;
        default-lease-time 21600;
        max-lease-time 43200;
        next-server 192.168.10.10;
        filename "pxelinux.0";
}
```
```bash
systemctl restart dhcpd
systemctl enable dhcpd
```

**é…ç½® TFTP æœåŠ¡**

é…ç½® TFTP æœåŠ¡ç¨‹åº,ä¸ºå®¢æˆ·ç«¯ä¸»æœºæä¾›å¼•å¯¼åŠé©±åŠ¨æ–‡ä»¶.å½“å®¢æˆ·ç«¯ä¸»æœºæœ‰äº†åŸºæœ¬çš„é©±åŠ¨ç¨‹åºä¹‹å,å†é€šè¿‡ vsftpd æœåŠ¡ç¨‹åºå°†å®Œæ•´çš„å…‰ç›˜é•œåƒæ–‡ä»¶ä¼ è¾“è¿‡å».
```bash
yum -y install tftp-server xinetd
```
```vim
vim /etc/xinetd.d/tftp

service tftp
{
        socket_type = dgram
        protocol = udp
        wait = yes
        user = root
        server = /usr/sbin/in.tftpd
        server_args = -s /var/lib/tftpboot
        disable = no
        per_source = 11
        cps = 100 2
        flags = IPv4
}
```
```bash
systemctl restart xinetd
systemctl enable xinetd
firewall-cmd --permanent --add-port=69/udp  # æ”¾è¡Œ tftp
firewall-cmd --reload
```

**é…ç½® SYSLinux æœåŠ¡**

SYSLinux æ˜¯ä¸€ä¸ªç”¨äºæä¾›å¼•å¯¼åŠ è½½çš„æœåŠ¡ç¨‹åº.ä¸å…¶è¯´ SYSLinux æ˜¯ä¸€ä¸ªæœåŠ¡ç¨‹åº,ä¸å¦‚è¯´æ›´éœ€è¦é‡Œé¢çš„å¼•å¯¼æ–‡ä»¶,åœ¨å®‰è£…å¥½ SYSLinux æœåŠ¡ç¨‹åºè½¯ä»¶åŒ…å,/usr/share/syslinux ç›®å½•ä¸­ä¼šå‡ºç°å¾ˆå¤šå¼•å¯¼æ–‡ä»¶.
```bash
yum -y install syslinux

# é¦–å…ˆæŠŠ SYSLinux æä¾›çš„å¼•å¯¼æ–‡ä»¶å¤åˆ¶åˆ° TFTP æœåŠ¡ç¨‹åºçš„é»˜è®¤ç›®å½•ä¸­,ä¹Ÿå°±æ˜¯ pxelinux.0,è¿™æ ·å®¢æˆ·ç«¯ä¸»æœºå°±èƒ½å¤Ÿé¡ºåˆ©åœ°è·å–åˆ°å¼•å¯¼æ–‡ä»¶.å¦å¤–åœ¨ RHEL 7 ç³»ç»Ÿå…‰ç›˜é•œåƒä¸­ä¹Ÿæœ‰ä¸€äº›éœ€è¦è°ƒå–çš„å¼•å¯¼æ–‡ä»¶.
cd /var/lib/tftpboot
cp /usr/share/syslinux/pxelinux.0 .
mkdir /media/cdrom
mount /dev/cdrom /media/cdrom
# ç¡®è®¤å…‰ç›˜é•œåƒå·²ç»è¢«æŒ‚è½½åˆ° /media/cdrom ç›®å½•å,ä½¿ç”¨å¤åˆ¶å‘½ä»¤å°†å…‰ç›˜é•œåƒä¸­è‡ªå¸¦çš„ä¸€äº›å¼•å¯¼æ–‡ä»¶ä¹Ÿå¤åˆ¶åˆ° TFTP æœåŠ¡ç¨‹åºçš„é»˜è®¤ç›®å½•ä¸­.
cp /media/cdrom/images/pxeboot/{vmlinuz,initrd.img} .
cp /media/cdrom/isolinux/{vesamenu.c32,boot.msg} .

# åœ¨ TFTP æœåŠ¡ç¨‹åºçš„ç›®å½•ä¸­æ–°å»º pxelinux.cfg ç›®å½•,è™½ç„¶è¯¥ç›®å½•çš„åå­—å¸¦æœ‰åç¼€,ä½†ä¾ç„¶ä¹Ÿæ˜¯ç›®å½•,è€Œéæ–‡ä»¶ï¼å°†ç³»ç»Ÿå…‰ç›˜ä¸­çš„å¼€æœºé€‰é¡¹èœå•å¤åˆ¶åˆ°è¯¥ç›®å½•ä¸­,å¹¶å‘½åä¸º default.è¿™ä¸ª default æ–‡ä»¶å°±æ˜¯å¼€æœºæ—¶çš„é€‰é¡¹èœå•.
mkdir pxelinux.cfg
cp /media/cdrom/isolinux/isolinux.cfg pxelinux.cfg/default
```
```vim
# é»˜è®¤çš„å¼€æœºèœå•ä¸­æœ‰ä¸¤ä¸ªé€‰é¡¹,è¦ä¹ˆæ˜¯å®‰è£…ç³»ç»Ÿ,è¦ä¹ˆæ˜¯å¯¹å®‰è£…ä»‹è´¨è¿›è¡Œæ£€éªŒ.æ—¢ç„¶æˆ‘ä»¬å·²ç»ç¡®å®šé‡‡ç”¨æ— äººå€¼å®ˆçš„æ–¹å¼å®‰è£…ç³»ç»Ÿ,è¿˜éœ€è¦ä¸ºæ¯å°ä¸»æœºæ‰‹åŠ¨é€‰æ‹©ç›¸åº”çš„é€‰é¡¹,æœªå…ä¸æˆ‘ä»¬çš„ä¸»æ—¨ (æ— äººå€¼å®ˆå®‰è£…) ç›¸æ‚–.ç°åœ¨æˆ‘ä»¬ç¼–è¾‘è¿™ä¸ª default æ–‡ä»¶,æŠŠç¬¬ 1 è¡Œçš„ default å‚æ•°ä¿®æ”¹ä¸º linux,è¿™æ ·ç³»ç»Ÿåœ¨å¼€æœºæ—¶å°±ä¼šé»˜è®¤æ‰§è¡Œé‚£ä¸ªåç§°ä¸º linux çš„é€‰é¡¹äº†.å¯¹åº”çš„ linux é€‰é¡¹å¤§çº¦åœ¨ 64 è¡Œ,æˆ‘ä»¬å°†é»˜è®¤çš„å…‰ç›˜é•œåƒå®‰è£…æ–¹å¼ä¿®æ”¹æˆ FTP æ–‡ä»¶ä¼ è¾“æ–¹å¼,å¹¶æŒ‡å®šå¥½å…‰ç›˜é•œåƒçš„è·å–ç½‘å€ä»¥åŠ Kickstart åº”ç­”æ–‡ä»¶çš„è·å–è·¯å¾„

# ä¿®æ”¹ç¬¬ 1 è¡Œå’Œç¬¬ 64 è¡Œ
vim pxelinux.cfg/default

1 default linux
64 append initrd=initrd.img inst.stage2=ftp://192.168.10.10 ks=ftp://192.168.10.10/pub/ks.cfg quiet
```

**é…ç½® VSftpd æœåŠ¡**
```bash
yum -y install vsftpd

systemctl restart vsftpd
systemctl enable vsftpd
ln -s '/usr/lib/systemd/system/vsftpd.service' '/etc/systemd/system/multi-user.target.wants/vsftpd.service'

cp -rvf /media/cdrom/* /var/ftp
firewall-cmd --permanent --add-service=ftp
firewall-cmd --reload
setsebool -P ftpd_connect_all_unreserved=on
```

**åˆ›å»º KickStart åº”ç­”æ–‡ä»¶**
```bash
cp ~/anaconda-ks.cfg /var/ftp/pub/ks.cfg
chmod +r /var/ftp/pub/ks.cfg
```
```vim
#ä¿®æ”¹ç¬¬ 7ã€27ã€35 è¡Œ
vim /var/ftp/pub/ks.cfg

url --url=ftp://192.168.0.105
timezone Asia/Shanghai --isUtc
clearpart --all --initlabel
# å¦‚æœè§‰å¾—ç³»ç»Ÿé»˜è®¤è‡ªå¸¦çš„åº”ç­”æ–‡ä»¶å‚æ•°è¾ƒå°‘,ä¸èƒ½æ»¡è¶³ç”Ÿäº§ç¯å¢ƒçš„éœ€æ±‚,åˆ™å¯ä»¥é€šè¿‡ Yum è½¯ä»¶ä»“åº“æ¥å®‰è£… system-config-kickstart è½¯ä»¶åŒ….è¿™æ˜¯ä¸€æ¬¾å›¾å½¢åŒ–çš„ Kickstart åº”ç­”æ–‡ä»¶ç”Ÿæˆå·¥å…·,å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ç”Ÿæˆè‡ªå®šä¹‰çš„åº”ç­”æ–‡ä»¶,ç„¶åå°†ç”Ÿæˆçš„æ–‡ä»¶æ”¾åˆ° /var/ftp/pub ç›®å½•ä¸­å¹¶å°†åå­—ä¿®æ”¹ä¸º ks.cfg å³å¯.
```

**Reference**
- [ç¬¬19ç«  ä½¿ç”¨ PXE+Kickstart æ— äººå€¼å®ˆå®‰è£…æœåŠ¡.](https://www.linuxprobe.com/chapter-19.html)

---

## OpenVPN

**å®˜ç½‘**
- https://openvpn.net/

**docker å®‰è£…**
```bash
systemctl start docker
docker pull kylemanna/openvpn:2.4
mkdir -p /data/openvpn
docker run -v /data/openvpn:/etc/openvpn --rm kylemanna/openvpn:2.4 ovpn_genconfig -u udp://<ä½ çš„IP>
```

**ç”Ÿæˆå¯†é’¥æ–‡ä»¶**
```bash
docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn:2.4 ovpn_initpki
è¾“å…¥ç§é’¥å¯†ç  (è¾“å…¥æ—¶æ˜¯çœ‹ä¸è§çš„) ï¼š
Enter PEM pass phrase:12345678
å†è¾“å…¥ä¸€é
Verifying - Enter PEM pass phrase:12345678
è¾“å…¥ä¸€ä¸ª CA åç§° (æˆ‘è¿™é‡Œç›´æ¥å›è½¦)
Common Name (eg: your user, host, or server name) [Easy-RSA CA]:
è¾“å…¥åˆšæ‰è®¾ç½®çš„ç§é’¥å¯†ç  (è¾“å…¥å®Œæˆåä¼šå†è®©è¾“å…¥ä¸€æ¬¡)
Enter pass phrase for /etc/openvpn/pki/private/ca.key:12345678
```

**ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦ (è¿™é‡Œçš„ user æ”¹æˆä½ æƒ³è¦çš„åå­—) **
```bash
docker run -v /data/openvpn:/etc/openvpn --rm -it kylemanna/openvpn:2.4 easyrsa build-client-full user nopass

è¾“å…¥åˆšæ‰è®¾ç½®çš„å¯†ç 
Enter pass phrase for /etc/openvpn/pki/private/ca.key:12345678
```

**å¯¼å‡ºå®¢æˆ·ç«¯é…ç½®**
```bash
mkdir -p /data/openvpn/conf
docker run -v /data/openvpn:/etc/openvpn --rm kylemanna/openvpn:2.4 ovpn_getclient user > /data/openvpn/conf/user.ovpn
```

**å¯åŠ¨ OpenVPN æœåŠ¡**
```bash
docker run --name openvpn -v /data/openvpn:/etc/openvpn -d -p 1194:1194/udp --cap-add=NET_ADMIN kylemanna/openvpn:2.4

service firewalld stop
```

**å°†ç™»å½•çš„è¯ä¹¦ä¸‹è½½åˆ°æœ¬åœ°**
```bash
yum install lrzsz -y
sz /data/openvpn/conf/whsir.ovpn
```

åœ¨ openvpn çš„å®‰è£…ç›®å½•ä¸‹,æœ‰ä¸ª config ç›®å½•,å°†æœåŠ¡å™¨ä¸Šçš„ user.ovpn,æ”¾åœ¨è¯¥ç›®å½•ä¸‹,è¿è¡Œ OpenVPN GUI,å³é”® whsir è¿æ¥ connect

**Reference**
- [é€šè¿‡ docker æ­å»º openvpn](https://blog.whsir.com/post-2809.html)

---

## proxychains

`é€šè¿‡ DLL æ³¨å…¥,ä½¿ç›®æ ‡ç¨‹åºèµ°ä»£ç†`

**é¡¹ç›®åœ°å€**
- https://github.com/rofl0r/proxychains-ng

**å®‰è£…**
```bash
git clone https://github.com/rofl0r/proxychains-ng.git
cd proxychains-ng
./configure
make && make install
cp ./src/proxychains.conf /etc/proxychains.conf
cd .. && rm -rf proxychains-ng
```

**ç¼–è¾‘é…ç½®**
```bash
vim /etc/proxychains.conf

socks5 127.0.0.1 1080 # æ”¹æˆä½ æ‡‚çš„
```

**ä½¿ç”¨**

åœ¨éœ€è¦ä»£ç†çš„å‘½ä»¤å‰åŠ ä¸Š proxychains4 ,å¦‚ï¼š`proxychains4 wget https://www.google.com/`

---

## SSH

**å®˜ç½‘**
- https://www.ssh.com

ä¸€èˆ¬ä¸»æœºå®‰è£…å®Œæ¯•å SSH æ˜¯é»˜è®¤å¼€å¯çš„,ä½¿ç”¨ `/etc/init.d/ssh status` æŸ¥çœ‹ä¸»æœº SSH çŠ¶æ€

**Kali/Manjaro**

å®‰è£…å®Œæ¯•åä¼šè‡ªåŠ¨å¯åŠ¨,ä½†æ˜¯æ²¡æœ‰é…ç½®é…ç½®æ–‡ä»¶ä¼šæ— æ³•ç™»é™†,ä¿®æ”¹ä¸‹é…ç½®æ–‡ä»¶
```vim
vim /etc/ssh/sshd_config

PasswordAuthentication yes
PermitRootLogin yes
```
```bash
service ssh restart # å¯åŠ¨ssh
systemctl enable ssh  # è®¾ç½®ä¸ºå¼€æœºè‡ªå¯

# æˆ–

/etc/init.d/ssh start # å¯åŠ¨ssh
update-rc.d ssh enable  # è®¾ç½®ä¸ºå¼€æœºè‡ªå¯
```
è‹¥åœ¨ä½¿ç”¨å·¥å…·ç™»å½•æ—¶,å½“è¾“å®Œç”¨æˆ·åå¯†ç åæç¤º SSH æœåŠ¡å™¨æ‹’ç»äº†å¯†ç ,å°±å†è¯•ä¸€é.

è¿™æ—¶ä¸è¦ç€æ€¥,åªéœ€è¦åœ¨ Kali æ§åˆ¶ç«¯å£é‡æ–°ç”Ÿæˆä¸¤ä¸ªç§˜é’¥å³å¯.
```bash
ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key
ssh-keygen -t dsa -f /etc/ssh/ssh_host_rsa_key
```

**Ubuntu**

å¦‚æœæ²¡æœ‰å°±è£…ä¸€ä¸‹,å¦‚æœä½ åªæ˜¯æƒ³ç™»é™†åˆ«çš„æœºå™¨çš„ SSH åªéœ€è¦å®‰è£… openssh-client (ubuntu æœ‰é»˜è®¤å®‰è£…,å¦‚æœæ²¡æœ‰åˆ™ `sudo
apt-get install openssh-client`) ,å¦‚æœè¦ä½¿æœ¬æœºå¼€æ”¾ SSH æœåŠ¡å°±éœ€è¦å®‰è£… openssh-server
```bash
apt install openssh-client=1:7.2p2-4ubuntu2.8
apt install openssh-server=1:7.2p2-4ubuntu2.8
apt install ssh
```
`service ssh restart` ç„¶åé‡å¯ SSH æœåŠ¡

**åŠ å›º**

æœ¬éƒ¨åˆ†å†…å®¹ç§»æ­¥[Secure-Linux](./Secure-Linux#SSH) SSH éƒ¨åˆ†

**æ’é”™**

0. å…ˆæ’æŸ¥æ˜¯ä¸æ˜¯å®¢æˆ·ç«¯(è‡ªå·±)çš„é—®é¢˜,å†æ’æŸ¥æ˜¯ä¸æ˜¯æœåŠ¡ç«¯(å¯¹é¢)çš„é—®é¢˜,æœ€ååœ¨æ’æŸ¥æ˜¯ä¸æ˜¯ä¼ è¾“ä¸­(ä¸­é—´)çš„é—®é¢˜.
1. ping è¯•è¯•,å¦‚æœç½‘ç»œå±‚å¯é€š,é‚£ä¹ˆå¤§æ¦‚ç‡æ˜¯åº”ç”¨å±‚çš„é—®é¢˜,æ£€æŸ¥ SSH é…ç½®,æ˜¯å¦æœ‰ç™½åå•é™åˆ¶,æˆ–è€…ä½ ä»–å¨˜çš„æ„å¤§åˆ©é˜²ç«å¢™æˆ–selinuxå°±æ²¡æ”¾è¡Œ
2. å‡è®¾è¿™ä¹ˆä¸€ç§æƒ…å†µ,åº”ç”¨å±‚é…ç½®æ­£å¸¸,ä¸»æœºä¸€åˆ‡æ­£å¸¸,ä½†è·¯ç”±å™¨/äº¤æ¢æœºåœ¨ ACL ä¸Šç¦ç”¨äº† SSH çš„æµé‡,è¿™æ ·å°±æ˜¯ä¼ è¾“å±‚çš„é—®é¢˜äº†.å†…ç½‘ IPS/IDS é˜»æ–­åŒç†.
3. éº»çƒ¦ä½ çœ‹ä¸‹è´¦å·å¯†ç æ˜¯ä¸æ˜¯å†™é”™äº†è°¢è°¢.æˆ–è€…æ˜¯ä¸æ˜¯é™åˆ¶åªä½¿ç”¨å¯†é’¥ç™»é™†çš„.

**motd**
- [Mithrilwoodrat/FBI-WARNING-in-console](https://github.com/Mithrilwoodrat/FBI-WARNING-in-console)
- [abcfy2/motd](https://github.com/abcfy2/motd)
- `vim /etc/motd`

```
                   _ooOoo_
                  o8888888o
                  88" . "88
                  (| -_- |)
                  O\  =  /O
               ____/`---'\____
             .'  \\|     |//  `.
            /  \\|||  :  |||//  \
           /  _||||| -:- |||||-  \
           |   | \\\  -  /// |   |
           | \_|  ''\---/''  |   |
           \  .-\__  `-`  ___/-. /
         ___`. .'  /--.--\  `. . __
      ."" '<  `.___\_<|>_/___.'  >'"".
     | | :  `- \`.;`\ _ /`;.`/ - ` : | |
     \  \ `-.   \_ __\ /__ _/   .-` /  /
======`-.____`-.___\_____/___.-`____.-'======
                   `=---='

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
           ä½›ç¥–ä¿ä½‘       æ°¸ä¸æ­»æœº
           å¿ƒå¤–æ— æ³•       æ³•å¤–æ— å¿ƒ
```
```
  _      `-._     `-.     `.   \      :      /   .'     .-'     _.-'      _
   `--._     `-._    `-.    `.  `.    :    .'  .'    .-'    _.-'     _.--'
        `--._    `-._   `-.   `.  \   :   /  .'   .-'   _.-'    _.--'
  `--.__     `--._   `-._  `-.  `. `. : .' .'  .-'  _.-'   _.--'     __.--'
  __    `--.__    `--._  `-._ `-. `. \:/ .' .-' _.-'  _.--'    __.--'    __
    `--..__   `--.__   `--._ `-._`-.`_=_'.-'_.-' _.--'   __.--'   __..--'
  --..__   `--..__  `--.__  `--._`-q(-_-)p-'_.--'  __.--'  __..--'   __..--
        ``--..__  `--..__ `--.__ `-'_) (_`-' __.--' __..--'  __..--''
  ...___        ``--..__ `--..__`--/__/  \--'__..--' __..--''        ___...
        ```---...___    ``--..__`_(<_   _/)_'__..--''    ___...---'''
  ```-----....._____```---...___(__\_\_|_)/__)___...---'''_____.....-----'''
```
```
############################################################################################################&
############################################################################################################&
############################################################################################################&
############################################################################################################&
############################################################################################################&
############################################################################################################&
############################################################################################################&
##########################################################@#################################################&
#####################################################$;`.:|%@###############################################&
#################################################$:....`:;;!$##$;::!@#######################################&
##############################################|`......':'':;|&%:':;:::'%####################################&
###########################################$'........``......`:;!;'`.''..'$#################################&
#######################################@$!`.........``........`'`...'::'...`|###############################&
###################################|'.`:'.........``.............``.....`'`...!#############################&
###############################&;....:;...............``..........``.......':`..;$@#########################&
############################@!.....`;:................``............``.....```'`..';$#######################&
##########################&:......'!'..........``.....``.............``.....``.`'`.```%#####################&
########################&:.......:;`..........''......`...............``......``.':`.`.`$###################&
######################@;........':`..........''......``................```.....``..''.`. '&#################&
#####################!........:!:`..........`'`......``..................`......``..``...  :@###############&
###################$'.....`!$%|!`...........':`..........''..............`'......``..``..`.  !##############&
##################!.....;$&%||!:...........`'``......``''`'`..............;;.....``...''..`.  .%############&
#######@%;|$@###@;....!&&%|||%;...........````.......`'':`  ..............`'......``...''..`. '|%@##########&
########&|!$%|&&;...`|$$$||||;`...........````.......```:.   .....................``....''.... `$###########&
#########$|$|!%||;.`:|%%|!||!'``.........``.``.......:!!|!`   ..............  ....::.....''..`` '&##########&
#########@$|%%|||%%%%%|||!|%;;!`.........``.``...'%&@@$|!;|&#&' ............  ....`:'.....``..'' ;##########&
###########$%%|!!%$%$%|||!||%%:.........``..``.`|&&!'.'$###!  |%. ..........   ....``.....``..`;:'$#########&
##########@$$%|!!!;:|%||||%$$!`........``....``:%!.`;@#######%.`;.   `......    ... .`..``.'`.'|&%$#########&
##########&%$$|!|%:.;%|%$||$$;.........``....''``..:$###@%$@##| ..     .`.`.   .|####|`.''.''.`%############&
##########&$$%$|!|:.;%!!$&&@&;........``.....`'....!##@@! .%##&`          .   ':``  .!|'`'`''.`%############&
##########@$&$$||%:.;%||$@|'''........``......''...|@####$$###$`             ..;#####!::`'`''.'|############&
#########%;%%$&%|;..;|'      .`......``.......`;'.``;&@#######;               ;######@!''.`:'.:;|###########&
########$'..`!%%!`.`         .'......``.......'`.``.  !#####&'                |##$';##$!:.`!;.:::&##########&
#######&:........`.          `;;.....''.......'`  :'                         .%#@$`:@#@%:.';:;:..!##########&
######&:..'`.....`.           `!:...``........'`                              ;#######%;'..`::`..'%#########&
#####&:.!|`......`.         . .`''..`'........'`                               !#####&'`'`.`'`....;@########&
####$:|#%`........`           .`..'````.......'`                                 '|!`   `;'...``..`%########&
###@@##$'..........`        . .`....`'`.......'`                                          ''..:!'..:&#######&
######$'............`.        .`.....``.......'.          '`...`'''`                      `'...|#!..!#######&
#####%`...............'`      .`..............`.                     !|                   ':...:&#&:.|######&
####%`...................`::` .`.::...........'`                    .|;                   ::....!###&:|#####&
###|..............``..........`'`;:...........'`                    ':                   ;;``...`%####@@####&
#@;.....````......''''.........`:'`...........'`         ..        ..                  .:`'%$:...'$#########&
%`...`';|:   .`....'` ':.......`:`''..........'`           `'   .`.                  `;'..!###&:..'$########&
#########&'     .`.'`   `;`...;%;':!'.........'`                                  .;:.....!######|`'$#######&
#&' `!@###|        `:.    .::':' .'::`........:'                              `;:`........|&&######@|$######&
##&'      '.        ..       '''    '!'.......;&&|'                     ';!;'''..........`%;`$##############&
###$`                         .:.     ::......:|%$%'          `%&&$!`...````.`'........'''!' :@#############&
                                        ''....'!|%$&$$$$&&$!: :|;!!:....``''.''`.......':;:   !###@#########&
#&'                                      ':`..'|%||%||||||%|;!|$&|!:.````:|:.||`......'`.;'   .%#&!$########&
####@;                                     ;;.'!|!||!|||||%|!||%$|!:```'!&|'!&|'.....'` `;`    :@%.!########&
####@$%!.                                   :|:;$|%$%%%%$$%!|%%$$$|:``!%|%!!$%!'....:'  ::      !; :@#######&
####&'                            .'         :$$$||;.               .`:!|%$%%%!'..`'.   ``         `$#######&
######%.   ';;'                               :|'                   ..     '|%;`.`.                .$#######&
######@&!.       .                             ''                   ..       :|:.                  .%#######&
######;             .                           .                    .       '%:                   ..'&#####&
######@:               .                        .`                   .       .:`                  .`';``$###&
######@%'                 .                      ';'.                         '.                  `''`   |##&
#####$'`;'           .    ..''                     .`.'!;`           ..    `%&:                  '` ``  `&##&
#####!..'|'             ..                          ........';!!`    .. :|!` `.                    ``  '&###&
#####&:.:;                  .                       ...............''`....'`                      ``  :@####&
######$!'        .             ..                  .`............``   .```'`                     .`  ;######&
######@:             .            .                 ''..........`'.  .``..'`                    .`  '&######&
######;                              .              ':``..........      ..`.                   ''   .%######&
###$%:                      .           .            ;%%!:'`......  `. ...'.                  ``     :@#####&
#$';:                                     .          :||%%%%|;'``.``.````;%'                .`        :@####&
#&%;                                         .       .!||%||%%%$&|:'.`;%|!!`               '.          ;####&
```

---

## ttyd

`åœ¨ web ä¸Šè®¿é—®ç»ˆç«¯`

**é¡¹ç›®åœ°å€**
- https://github.com/tsl0922/ttyd

**å®‰è£…**
```bash
sudo apt-get install cmake g++ pkg-config git vim-common libwebsockets-dev libjson-c-dev libssl-dev
git clone https://github.com/tsl0922/ttyd.git
cd ttyd && mkdir build && cd build
cmake ..
make && make install
```

**è¿è¡Œ**
```bash
ttyd -p 8080 bash -x  # ç°åœ¨è®¿é—® http://localhost:8080 å³å¯
```

---

# webæœåŠ¡-ä¸­é—´ä»¶
## ActiveMQ

Apache ActiveMQ æ˜¯ Apache è½¯ä»¶åŸºé‡‘ä¼šæ‰€ç ”å‘çš„å¼€æ”¾æºä»£ç æ¶ˆæ¯ä¸­é—´ä»¶ï¼›ç”±äº ActiveMQ æ˜¯ä¸€ä¸ªçº¯ Java ç¨‹åºï¼Œå› æ­¤åªéœ€è¦æ“ä½œç³»ç»Ÿæ”¯æŒ Java è™šæ‹Ÿæœºï¼ŒActiveMQ ä¾¿å¯æ‰§è¡Œã€‚

**å®‰è£…**

å®‰è£…ä¾èµ– JDK
```bash
cd /
tar xzf jdk-8u212-linux-x64.tar.gz
```
```vim
vim /etc/profile

export JAVA_HOME=/root/jdk1.8.0_212
export PATH=$PATH:$JAVA_HOME/bin
```
```bash
source /etc/profile
java -version
```

ä¸‹è½½ activemq å‹ç¼©åŒ…,è¿™é‡Œä»¥ 5.14.5 ä¸ºä¾‹
```
wget http://archive.apache.org/dist/activemq/5.14.5/apache-activemq-5.14.5-bin.tar.gz
tar -zxvf apache-activemq-5.14.5-bin.tar.gz
mv apache-activemq-5.14.5 activemq
cd activemq/bin/
./activemq start
ps -ef| grep activemq
```
```
firewall-cmd --zone=public --add-port=8161/tcp --permanent
firewall-cmd --reload
```

è®¿é—® 127.0.0.1:8161   ç”¨æˆ·å:admin å¯†ç ï¼šadmin

ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ç¼–è¾‘ conf/jetty-realm.properties å³å¯

---

## Apache

**å®˜ç½‘**
- https://www.apache.org/

**å®‰è£…**
```bash
yum install httpd
yum install mod_ssl
```

**é…ç½®æ–‡ä»¶**
```vim
vim /etc/httpd/conf/httpd.conf

DocumentRoot "/var/www/html"
ServerName  xx.xx.xx.xx:80
# è®¾ç½® Web æœåŠ¡å™¨çš„ä¸»æœºåå’Œç›‘å¬ç«¯å£
```

**å¯æœåŠ¡**
```vim
vim var/www/html/index.html

Hello World!
```
```bash
service httpd restart
firewall-cmd --zone=public --add-service=http --permanent
firewall-cmd --reload
```

**è™šæ‹Ÿä¸»æœº**

é…ç½®è™šæ‹Ÿä¸»æœºæ–‡ä»¶
```vim
vim /etc/httpd/conf.d/virthost.conf

<VirtualHost 192.168.1xx.22:80>
	ServerName  www.abc.com
  # è®¾ç½® Web æœåŠ¡å™¨çš„ä¸»æœºåå’Œç›‘å¬ç«¯å£
	DocumentRoot "/data/web_data"
	<Directory "/data/web_data">
		Require all granted
	</Directory>
</VirtualHost>

Listen 192.168.1XX.33:443
<VirtualHost 192.168.1xx.22:443>
	ServerName  www.abc.com
  # è®¾ç½® Web æœåŠ¡å™¨çš„ä¸»æœºåå’Œç›‘å¬ç«¯å£
	DocumentRoot "/data/web_data"

	SSLEngine on
	SSLCertificateFile /etc/httpd/ssl/httpd.crt
	SSLCertificateKeyFile /etc/httpd/ssl/httpd.key

	<Directory "/data/web_data">
		Require all granted
	</Directory>
</VirtualHost>
```
```bash
mkdir -p /data/web_data
echo 'Hello World!' >/data/web_data/index.html

service httpd restart
firewall-cmd --zone=public --add-service=http --permanent
firewall-cmd --reload
```

**mod_ssl**
- **ä¸º linux æä¾› web è¯ä¹¦**
  ```bash
  cd /etc/pki/CA/private
  openssl genrsa 2048 > cakey.pem
  openssl req -new -x509 -key cakey.pem > /etc/pki/CA/cacert.pem

  cd /etc/pki/CA
  touch index.txt  # ç´¢å¼•é—®æ–‡ä»¶
  touch serial    # ç»™å®¢æˆ·å‘è¯ç¼–å·å­˜æ”¾æ–‡ä»¶
  echo 01 > serial

  mkdir /etc/httpd/ssl
  cd /etc/httpd/ssl
  openssl genrsa 1024 > httpd.key
  openssl req -new -key httpd.key > httpd.csr
  openssl ca -days 365 -in httpd.csr > httpd.crt

  # ä½¿ç”¨ cat /etc/pki/CA/index.txt æŸ¥çœ‹ openssl è¯ä¹¦æ•°æ®åº“æ–‡ä»¶
  cat /etc/pki/CA/index.txt
  ```

- **ä¸º windows æä¾› web è¯ä¹¦**
  ```bash
  cd /etc/pki/CA/private
  openssl genrsa 2048 > cakey.pem
  openssl req -new -x509 -key cakey.pem > /etc/pki/CA/cacert.pem

  cd /etc/pki/CA
  touch index.txt  # ç´¢å¼•é—®æ–‡ä»¶
  touch serial    # ç»™å®¢æˆ·å‘è¯ç¼–å·å­˜æ”¾æ–‡ä»¶
  echo 01 > serial

  cd
  openssl genrsa 1024 > httpd.key
  openssl req -new -key httpd.key > httpd.csr
  openssl ca -days 365 -in httpd.csr > httpd.crt

  openssl pkcs12 -export -out server.pfx -inkey httpd.key -in httpd.crt
  # è‡ªå·±æŠŠ server.pfx å¯¼å‡ºç»™ windows2008 ä¸»æœº
  ```

- **å‘ windows CA æœåŠ¡å™¨ç”³è¯·è¯ä¹¦**

  `Openssl genrsa 2048 > httpd.key`

  `openssl req -new -key httpd.key -out httpd.csr`

  é€šè¿‡è¿™ä¸ª csr æ–‡ä»¶åœ¨å†…éƒ¨çš„ windows CA æœåŠ¡å™¨ä¸Šç”³è¯·è¯ä¹¦

**ab**

å®‰è£…
```bash
sudo apt install apache2-utils
yum install httpd-tools
```

**æ›´å¤šé…ç½®æ¡ˆä¾‹**

è§ [apache.md](./å®éªŒ/apache.md)

---

## Caddy

**å®˜ç½‘**
- https://caddyserver.com/

**å®‰è£… Caddy**
```bash
wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubiBackup/doubi/master/caddy_install.sh && chmod +x caddy_install.sh && bash caddy_install.sh
```

**é…ç½®æ–‡ä»¶**
```bash
chown -R root:www-data /usr/local/bin     # è®¾ç½®ç›®å½•æ•°æ®æƒé™
touch /usr/local/caddy/Caddyfile

echo -e ":80 {
	gzip
	root /usr/local/caddy/www/
}" > /usr/local/caddy/Caddyfile

mkdir /usr/local/caddy/www
echo "<h1>first</h1>" >> /usr/local/caddy/www/index.html

/etc/init.d/caddy start
# å¦‚æœå¯åŠ¨å¤±è´¥å¯ä»¥çœ‹ Caddy æ—¥å¿—ï¼š tail -f /tmp/caddy.log
```

**åå‘ä»£ç†**

åšä¸€ä¸ª ip è·³è½¬
```bash
echo ":80 {
	gzip
	proxy / http://www.baidu.com
}" > /usr/local/caddy/Caddyfile

/etc/init.d/caddy start
```

**HTTPS**

ä¸ºå·²ç»ç»‘å®šåŸŸåçš„æœåŠ¡å™¨è‡ªåŠ¨ä» Letâ€™s Encrypt ç”Ÿæˆå’Œä¸‹è½½ HTTPS è¯ä¹¦,æ”¯æŒ HTTPS åè®®è®¿é—®,ä½ åªéœ€è¦å°†ç»‘å®šçš„ IP æ¢æˆ åŸŸå å³å¯
```bash
echo -e "xxx.com {
	gzip
    root /usr/local/bin/www
	tls xxxx@xxx.com  #ä½ çš„é‚®ç®±
}" > /usr/local/caddy/Caddyfile

/etc/init.d/caddy start
```

---

## npm&Node

**å®˜ç½‘**
- https://www.npmjs.com/
- https://nodejs.org

**åŒ…ç®¡ç†å™¨æ–¹å¼**
- apt

  `apt-get install nodejs npm`

- yum

  `yum install epel-release`

  `yum install nodejs npm`

**æºæ–‡ä»¶æ–¹å¼å®‰è£…**

é¦–å…ˆä¸‹è½½ NodeJS çš„äºŒè¿›åˆ¶æ–‡ä»¶,http://nodejs.org/download/ .åœ¨ Linux Binaries (.tar.gz) è¡Œå¤„æ ¹æ®è‡ªå·±ç³»ç»Ÿçš„ä½æ•°é€‰æ‹©
```bash
# è§£å‹åˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ
tar zxvf node-v0.10.26-linux-x64.tar.gz

è¿›å…¥è§£å‹åçš„ç›®å½• bin ç›®å½•ä¸‹,æ‰§è¡Œ ls ä¼šçœ‹åˆ°ä¸¤ä¸ªæ–‡ä»¶ node,npm. ç„¶åæ‰§è¡Œ ./node -v ,å¦‚æœæ˜¾ç¤ºå‡º ç‰ˆæœ¬å·è¯´æ˜æˆ‘ä»¬ä¸‹è½½çš„ç¨‹åºåŒ…æ˜¯æ²¡æœ‰é—®é¢˜çš„.ä¾æ¬¡è¿è¡Œå¦‚ä¸‹ä¸‰æ¡å‘½ä»¤
cd node-v0.10.26-linux-x64/bin
ls
./node -v
```
å› ä¸º /home/kun/mysofltware/node-v0.10.26-linux-x64/bin è¿™ä¸ªç›®å½•æ˜¯ä¸åœ¨ç¯å¢ƒå˜é‡ä¸­çš„,æ‰€ä»¥åªèƒ½åˆ°è¯¥ç›®å½•ä¸‹æ‰èƒ½ node çš„ç¨‹åº.å¦‚æœåœ¨å…¶ä»–çš„ç›®å½•ä¸‹æ‰§è¡Œ node å‘½ä»¤çš„è¯ ,å¿…é¡»é€šè¿‡ç»å¯¹è·¯å¾„è®¿é—®æ‰å¯ä»¥çš„

å¦‚æœè¦åœ¨ä»»æ„ç›®å½•å¯ä»¥è®¿é—®çš„è¯,éœ€è¦å°† node æ‰€åœ¨çš„ç›®å½•,æ·»åŠ  PATH ç¯å¢ƒå˜é‡é‡Œé¢,æˆ–è€…é€šè¿‡è½¯è¿æ¥çš„å½¢å¼å°† node å’Œ npm é“¾æ¥åˆ°ç³»ç»Ÿé»˜è®¤çš„ PATH ç›®å½•ä¸‹çš„ä¸€ä¸ª
åœ¨ç»ˆç«¯æ‰§è¡Œ echo $PATH å¯ä»¥è·å– PATH å˜é‡åŒ…å«çš„å†…å®¹,ç³»ç»Ÿé»˜è®¤çš„ PATH ç¯å¢ƒå˜é‡åŒ…æ‹¬ /usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin: ,å†’å·ä¸ºåˆ†éš”ç¬¦.æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°† node å’Œ npm é“¾æ¥åˆ° /usr/local/bin ç›®å½•ä¸‹å¦‚ä¸‹æ‰§è¡Œ
```bash
ln -s /home/kun/mysofltware/node-v0.10.26-linux-x64/bin/node /usr/local/bin/node
ln -s /home/kun/mysofltware/node-v0.10.26-linux-x64/bin/npm /usr/local/bin/npm
```

**åŠ é€Ÿ**
- [node&js](../../Plan/Misc-Plan.md#node&js)

---

## Nexus

**å®˜ç½‘**
- https://www.sonatype.com/nexus-repository-oss

**å®‰è£…**
- **JDK**
    ```bash
    tar xzf jdk-8u212-linux-x64.tar.gz
    ```
    ```vim
    vim /etc/profile

    export JAVA_HOME=/root/jdk1.8.0_212
    export PATH=$PATH:$JAVA_HOME/bin
    ```
    ```bash
    source /etc/profile
    java -version
    ```

- **Maven**
    ```bash
    tar xzf apache-maven-3.6.2-bin.tar.gz
    ```
    ```vim
    vim /etc/profile

    export MAVEN_HOME=/root/apache-maven-3.6.2
    export PATH=$PATH:$MAVEN_HOME/bin
    ```
    ```bash
    source /etc/profile
    mvn -version
    ```

- **Nexus**
    - åœ¨å®˜ç½‘ä¸‹è½½ UNIX å®‰è£…åŒ…,ä¸Šä¼ è‡³æœåŠ¡å™¨,è¿™é‡Œä»¥ https://help.sonatype.com/repomanager2/download#Download-NexusRepositoryManager2OSS 2.14.14-01 ä¸ºä¾‹

    ```bash
    tar -xf nexus-2.14.14-01-bundle.tar.gz -C /usr/local
    cd /usr/local/nexus-2.14.14-01/bin/
    export RUN_AS_USER=root

    ./nexus start
    firewall-cmd --add-port=8081/tcp --permanent
    firewall-cmd --reload
    ```
    ```bash
    curl http://127.0.0.1:8081/nexus/
    ```
    é»˜è®¤ç™»å½•è´¦å·/å¯†ç ä¸ºï¼š admin/admin123

---

## Nginx

**å®˜ç½‘**
- https://nginx.org/

**å®‰è£…**
- **yum å®‰è£…**
  ```bash
  yum install nginx
  systemctl start nginx.service
  ```

- **æºä»£ç ç¼–è¯‘å®‰è£…**

  è‡ªå·±ä¸‹è½½å¥½åŒ… https://nginx.org/en/download.html,ä¼ åˆ°æœåŠ¡å™¨ä¸Š,è¿™é‡Œä»¥1.14.2 ä¸¾ä¾‹

  ```bash
  tar -zxvf nginx-1.14.2.tar.gz
  cd nginx-1.14.2/
  ./configure
  make
  make install
  cd /usr/local/nginx/sbin
  ./nginx
  ```

  æ³¨:æºä»£ç å®‰è£…ä½ çš„é»˜è®¤ç›®å½•åœ¨ /usr/local/nginx ä¸‹,é…ç½®æ–‡ä»¶åœ¨ conf/ ä¸­,ä¸è¦æé”™äº†

```bash
firewall-cmd --permanent --zone=public --add-service=http
firewall-cmd --reload
```

**è™šæ‹Ÿä¸»æœº**

åœ¨ /etc/nginx/conf.d/ ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªç«™ç‚¹çš„é…ç½®æ–‡ä»¶,åˆ—å¦‚ï¼štest.com.conf
```vim
vim /etc/nginx/conf.d/test.com.conf

server {
        listen 80;
        server_name www.test.com test.com;
        root /usr/share/nginx/test.com;
        index index.html;

        location / {
        }
}
```
`nginx -t ` æ£€æµ‹æ–‡ä»¶æ˜¯å¦æœ‰è¯¯

```bash
mkdir /usr/share/nginx/test.com
echo "hello world!" > /usr/share/nginx/test.com/index.html
firewall-cmd --permanent --zone=public --add-service=http
firewall-cmd --reload
systemctl start nginx.service
```

å¦‚æœæœåŠ¡å™¨ç½‘å€æ²¡æœ‰æ³¨å†Œ,é‚£ä¹ˆåº”è¯¥åœ¨æœ¬æœºç”µè„‘çš„ /etc/hosts æ·»åŠ è®¾ç½®ï¼š `192.168.1.112   www.test.com test.com`

`curl www.test.com`

**https**
```bash
openssl req -new -x509 -nodes -days 365 -newkey rsa:1024  -out httpd.crt -keyout httpd.key # ç”Ÿæˆè‡ªç­¾åè¯ä¹¦,ä¿¡æ¯ä¸è¦çå¡«,Common Nameä¸€å®šè¦è¾“ä½ çš„ç½‘å€

mv httpd.crt /etc/nginx
mv httpd.key /etc/nginx
```
```vim
vim /etc/nginx/conf.d/test.com.conf

server {
        listen       443 ssl http2;
        server_name  www.test.com test.com;
        root         /usr/share/nginx/test.com;
        index index.html;

        ssl_certificate "/etc/nginx/httpd.crt";
        ssl_certificate_key "/etc/nginx/httpd.key";
        location / {
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }
```
`systemctl restart nginx`

**æ·»åŠ  PHP/PHP-FPM ç¯å¢ƒæ”¯æŒ**
```bash
# å®‰è£…PHPæº
rpm -ivh https://mirror.webtatic.com/yum/el7/epel-release.rpm
rpm -ivh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm

# å®‰è£… PHP7.0
yum install php70w php70w-fpm php70w-mysql php70w-mysqlnd

systemctl start php-fpm.service
netstat -tnlp # æ£€æŸ¥ php-fpm é»˜è®¤ç›‘å¬ç«¯å£ï¼š9000
```
```vim
# æ·»åŠ é…ç½®
vim /etc/nginx/conf.d/test.com.conf

        # php-fpm  (æ–°å¢)
        location ~\.php$ {
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_param SCRIPT_FILENAME$document_root$fastcgi_script_name;
                fastcgi_param PATH_INFO $fastcgi_script_name;
                include fastcgi_params;
          }
```
```bash
systemctl restart nginx
systemctl restart php-fpm
```
```vim
vim /usr/share/nginx/test.com/info.php

<?php
     phpinfo();
 ?>
```
`curl http://www.test.com/info.php` æµ‹è¯•

**æ›´å¤šé…ç½®æ¡ˆä¾‹**

è§ [Nginx.md](./å®éªŒ/Nginx.md)

---

## PHP

**å®˜ç½‘**
- https://www.php.net/

**å®‰è£…**
```bash
è‹¥ä¹‹å‰å®‰è£…è¿‡å…¶ä»–ç‰ˆæœ¬ PHP,å…ˆåˆ é™¤
yum remove php*

rpm å®‰è£… PHP7 ç›¸åº”çš„ yum æº
rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
yum install php70w
php -v  # æŸ¥çœ‹PHPç‰ˆæœ¬

service php-fpm start # è¦è¿è¡Œ PHP ç½‘é¡µ,è¦å¯åŠ¨ php-fpm è§£é‡Šå™¨
```

---

## phpMyAdmin

**å®˜ç½‘**
- https://www.phpmyadmin.net/

**å»ºè®®æ­é…ä¸Šé¢çš„ nginx+php æ‰©å±•ç¬”è®°**

**åˆ›å»ºæ•°æ®åº“å’Œä¸€ä¸ªç”¨æˆ·**
```bash
yum install mariadb mariadb-server
systemctl start mariadb
systemctl enable mariadb
mysql_secure_installation

mysql -u root -p

åˆ›å»ºä¸€ä¸ªä¸“ç»™ WordPress å­˜æ•°æ®çš„æ•°æ®åº“
MariaDB [(none)]> create database idiota_info;  # æœ€åçš„"idiota_info"ä¸ºæ•°æ®åº“å

åˆ›å»ºç”¨äº WordPress å¯¹åº”ç”¨æˆ·
MariaDB [(none)]> create user idiota@localhost identified by 'password';   # "idiota"å¯¹åº”åˆ›å»ºçš„ç”¨æˆ·,"password"å†…å¡«å†™ç”¨æˆ·çš„å¯†ç 

åˆ†åˆ«é…ç½®æœ¬åœ°ç™»å½•å’Œè¿œç¨‹ç™»å½•æƒé™
MariaDB [(none)]> grant all privileges on idiota_info.* to idiota@'localhost' identified by 'password';
MariaDB [(none)]> grant all privileges on idiota_info.* to idiota@'%' identified by 'password';

åˆ·æ–°æƒé™
MariaDB [(none)]> flush privileges;
```

**ä¸‹è½½**
```bash
wget https://files.phpmyadmin.net/phpMyAdmin/4.8.5/phpMyAdmin-4.8.5-all-languages.zip
unzip phpMyAdmin-4.8.5-all-languages.zip
mv phpMyAdmin-4.8.5-all-languages phpMyAdmin
cp phpMyAdmin /usr/share/nginx/test.com/
cd /usr/share/nginx/test.com/phpMyAdmin

cp config.sample.inc.php config.inc.php

systemctl restart nginx
```

è®¿é—® `https://www.test.com/phpMyAdmin/index.php`

---

## RabbitMQ

RabbitMQ æ˜¯æµè¡Œçš„å¼€æºæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿï¼Œæ˜¯ AMQPï¼ˆAdvanced Message Queuing Protocol é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰çš„æ ‡å‡†å®ç°ï¼Œç”¨ erlang è¯­è¨€å¼€å‘ã€‚RabbitMQ æ®è¯´å…·æœ‰è‰¯å¥½çš„æ€§èƒ½å’Œæ—¶æ•ˆæ€§ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿéå¸¸å¥½çš„æ”¯æŒé›†ç¾¤å’Œè´Ÿè½½éƒ¨ç½²ï¼Œéå¸¸é€‚åˆåœ¨è¾ƒå¤§è§„æ¨¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚

**å®˜ç½‘**
- https://www.rabbitmq.com/

**å®‰è£…**

å¿…é¡»è¦æœ‰ Erlang ç¯å¢ƒæ”¯æŒ,ä¸‹è½½ erlang è½¯ä»¶åŒ…,è¿™é‡Œä»¥ erlang-19.0.4 ä¸ºä¾‹
```bash
wget http://www.rabbitmq.com/releases/erlang/erlang-19.0.4-1.el7.centos.x86_64.rpm
rpm -ivh erlang-19.0.4-1.el7.centos.x86_64.rpm
```
å®‰è£…å®Œåè¾“å…¥ erl æµ‹è¯•

å®‰è£… rabbitmq,è¿™é‡Œä»¥ v3.6.10 ä¸ºä¾‹
```bash
yum -y install socat
wget  http://www.rabbitmq.com/releases/rabbitmq-server/v3.6.10/rabbitmq-server-3.6.10-1.el7.noarch.rpm
rpm -ivh rabbitmq-server-3.6.10-1.el7.noarch.rpm
```

`æ³¨æ„ï¼šå¦‚æœæ˜¯é‡è£…è¯·è®°å¾—åˆ é™¤ /var/lib/rabbitmq ç›®å½•å’Œ /etc/rabbitmq ç›®å½•ï¼Œå¦åˆ™å¯èƒ½æœåŠ¡ä¼šèµ·ä¸æ¥`

```bash
systemctl start rabbitmq-server
æˆ–
rabbitmq-server -detached   # å¯åŠ¨rabbitmqï¼Œ-detached ä»£è¡¨åå°å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å¯åŠ¨

rabbitmqctl status
```

**é…ç½®ç½‘é¡µæ’ä»¶**
```bash
# é¦–å…ˆåˆ›å»ºç›®å½•ï¼Œå¦åˆ™å¯èƒ½æŠ¥é”™ï¼š
mkdir /etc/rabbitmq

# ç„¶åå¯ç”¨æ’ä»¶ï¼š
rabbitmq-plugins enable rabbitmq_management

# é…ç½®é˜²ç«å¢™
firewall-cmd --permanent --add-port=15672/tcp
firewall-cmd --permanent --add-port=5672/tcp
firewall-cmd --reload
```

è®¿é—®: 127.0.0.1:15672,è¿™ä¸ªæ—¶å€™æ˜¯æ²¡æœ‰è´¦å·å¯†ç çš„!

**é…ç½® web ç«¯è®¿é—®è´¦å·å¯†ç å’Œæƒé™**

é»˜è®¤ç½‘é¡µæ˜¯ä¸å…è®¸è®¿é—®çš„ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ªç”¨æˆ·ä¿®æ”¹ä¸€ä¸‹æƒé™ï¼Œä»£ç å¦‚ä¸‹ï¼š
```bash
## æ·»åŠ ç”¨æˆ·ï¼Œåé¢ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ç”¨æˆ·åå’Œå¯†ç 
rabbitmqctl add_user <è´¦å·> <å¯†ç >
rabbitmqctl set_permissions -p / <è´¦å·> ".*" ".*" ".*" # æ·»åŠ æƒé™
rabbitmqctl set_user_tags <è´¦å·> administrator # ä¿®æ”¹ç”¨æˆ·è§’è‰²
```

**å¼€å¯ç”¨æˆ·è¿œç¨‹è®¿é—®**

é»˜è®¤æƒ…å†µä¸‹ï¼ŒRabbitMQ çš„é»˜è®¤çš„ guest ç”¨æˆ·åªå…è®¸æœ¬æœºè®¿é—®ï¼Œ å¦‚æœæƒ³è®© guest ç”¨æˆ·èƒ½å¤Ÿè¿œç¨‹è®¿é—®çš„è¯ï¼Œåªéœ€è¦å°†é…ç½®æ–‡ä»¶ä¸­çš„ loopback_users åˆ—è¡¨ç½®ä¸ºç©ºå³å¯ï¼Œ
å¦‚ä¸‹ï¼š
```
{loopback_users, []}
```

å¦å¤–å…³äºæ–°æ·»åŠ çš„ç”¨æˆ·ï¼Œç›´æ¥å°±å¯ä»¥ä»è¿œç¨‹è®¿é—®çš„ï¼Œå¦‚æœæƒ³è®©æ–°æ·»åŠ çš„ç”¨æˆ·åªèƒ½æœ¬åœ°è®¿é—®ï¼Œå¯ä»¥å°†ç”¨æˆ·åæ·»åŠ åˆ°ä¸Šé¢çš„åˆ—è¡¨, å¦‚åªå…è®¸ admin ç”¨æˆ·æœ¬æœºè®¿é—®ã€‚
```
{loopback_users, ["admin"]}
```

---


## searx

`å°Šé‡éšç§ï¼Œå¯æ§çš„å…ƒæœç´¢å¼•æ“ã€‚`

**é¡¹ç›®åœ°å€**
- https://github.com/asciimoo/searx

**å®‰è£…æ­å»º**

æ³¨:æœ¬æ¬¡åœ¨ Debian/Ubuntu ä¸‹æ­å»ºï¼Œcentos ä¸‹åŸºæœ¬ä¸€è‡´,è¯·å‚è€ƒ [å®˜æ–¹æ•™ç¨‹](https://github.com/asciimoo/searx/wiki/Installation-on-RHEL-7---CentOS-7)

åŠ æº,å®‰è£…ä¾èµ–
```
sudo add-apt-repository universe
sudo apt-get update

sudo apt-get install git build-essential libxslt-dev python-dev python-virtualenv python-babel zlib1g-dev libffi-dev libssl-dev vim lrzsz unzip
```

å®‰è£… searx
```bash
cd /usr/local
sudo git clone https://github.com/asciimoo/searx.git
sudo useradd searx -d /usr/local/searx
sudo chown searx:searx -R /usr/local/searx
```

æµ‹è¯• python è™šæ‹Ÿç¯å¢ƒ
```bash
sudo -u searx -i
cd /usr/local/searx
virtualenv searx-ve
. ./searx-ve/bin/activate
./manage.sh update_packages
```

ä¸€äº›å®‰å…¨æ€§é…ç½®
```bash
sed -i -e "s/ultrasecretkey/`openssl rand -hex 16`/g" searx/settings.yml
sed -i -e "s/debug : True/debug : False/g" searx/settings.yml
```

```bash
sudo apt-get -y install uwsgi uwsgi-plugin-python
```
```vim
vim /etc/uwsgi/apps-available/searx.ini

[uwsgi]
# Who will run the code
uid = searx
gid = searx

# disable logging for privacy
disable-logging = true

# Number of workers (usually CPU count)
workers = 4

# The right granted on the created socket
chmod-socket = 666

# Plugin to use and interpretor config
single-interpreter = true
master = true
plugin = python
lazy-apps = true
enable-threads = true

# Module to import
module = searx.webapp

# Virtualenv and python path
virtualenv = /usr/local/searx/searx-ve/
pythonpath = /usr/local/searx/
chdir = /usr/local/searx/searx/
```
```bash
cd /etc/uwsgi/apps-enabled
ln -s ../apps-available/searx.ini
/etc/init.d/uwsgi restart
```

é…ç½® nginx ä»£ç†
```bash
sudo apt-get -y install nginx
```
```vim
vim /etc/nginx/sites-available/searx

server {
    listen 80;
    server_name www.ä½ çš„åŸŸå.com;
    root /usr/local/searx;

    location / {
            include uwsgi_params;
            uwsgi_pass unix:/run/uwsgi/app/searx/socket;
    }
}
```
```bash
sudo ln -s /etc/nginx/sites-available/searx /etc/nginx/sites-enabled/searx
sudo service nginx restart
sudo service uwsgi restart
```

ç°åœ¨è®¿é—® www.ä½ çš„åŸŸå.com æŸ¥çœ‹ä½ çš„æœç´¢å¼•æ“æœåŠ¡æŠŠ~

---

## Tomcat

Tomcat ç±»ä¼¼ä¸ä¸€ä¸ª apache çš„æ‰©å±•å‹ï¼Œå±äº apache è½¯ä»¶åŸºé‡‘ä¼šçš„æ ¸å¿ƒé¡¹ç›®ï¼Œå±äºå¼€æºçš„è½»é‡çº§ Web åº”ç”¨æœåŠ¡å™¨ï¼Œæ˜¯å¼€å‘å’Œè°ƒè¯• JSP ç¨‹åºçš„é¦–é€‰ï¼Œä¸»è¦é’ˆå¯¹ Jave è¯­è¨€å¼€å‘çš„ç½‘é¡µä»£ç è¿›è¡Œè§£æï¼ŒTomcat è™½ç„¶å’Œ Apache æˆ–è€… Nginx è¿™äº› Web æœåŠ¡å™¨ä¸€æ ·ï¼Œå…·æœ‰å¤„ç† HTML é¡µé¢çš„åŠŸèƒ½ï¼Œç„¶è€Œç”±äºå…¶å¤„ç†é™æ€ HTML çš„èƒ½åŠ›è¿œä¸åŠ Apache æˆ–è€… Nginxï¼Œæ‰€ä»¥ Tomcat é€šå¸¸åšä¸ºä¸€ä¸ª Servlet å’Œ JSP å®¹å™¨å•ç‹¬è¿è¡Œåœ¨åç«¯ã€‚å¯ä»¥è¿™æ ·è®¤ä¸ºï¼Œå½“é…ç½®æ­£ç¡®æ—¶ï¼ŒApache ä¸º HTML é¡µé¢æœåŠ¡ï¼Œè€Œ Tomcat å®é™…ä¸Šè¿è¡Œ JSP é¡µé¢å’Œ Servletã€‚æ¯”å¦‚ apache å¯ä»¥é€šè¿‡ cgi æ¥å£ç›´æ¥è°ƒå– Tomcat ä¸­çš„ç¨‹åºã€‚

**å®˜ç½‘**
- https://tomcat.apache.org

**å®‰è£…**

Tomcat ä¾èµ– JDK,åœ¨å®‰è£… Tomcat ä¹‹å‰éœ€è¦å…ˆå®‰è£… Java JDK.è¾“å…¥å‘½ä»¤ java -version,å¦‚æœæ˜¾ç¤º JDK ç‰ˆæœ¬,è¯æ˜å·²ç»å®‰è£…äº† JDK

é»˜è®¤æƒ…å†µä¸‹,CentOS å®‰è£…æœ‰ JDK,ä¸€èˆ¬å…ˆå¸è½½æ‰
```bash
rpm -qa | grep jdk # æŸ¥è¯¢æœ¬åœ° JDK
```

JDK å®‰è£…è¿‡ç¨‹ è§ [å¦‚ä¸‹](##JDK)

ä¸‹è½½ Tomcat å®‰è£…åŒ… https://tomcat.apache.org/download-80.cgi å°†å®‰è£…åŒ…ä¸Šä¼ è‡³æœåŠ¡å™¨,æˆ‘è¿™é‡Œä»¥ 8.5.46 ä¸ºä¾‹
```bash
tar -zvxf apache-tomcat-8.5.46.tar.gz
cd apache-tomcat-8.5.46
cd bin
./startup.sh
```

å¦‚æœè®¿é—® http://ip:8080/ å¤±è´¥,æŸ¥çœ‹é˜²ç«å¢™å¼€æ”¾ç«¯å£
```bash
firewall-cmd --permanent --zone=public --add-port=8080/tcp
firewall-cmd --reload
```

**è®¾ç½® tomcat çš„æœåŠ¡å™¨å¯åŠ¨å’Œå…³é—­**

```vim
vim /etc/rc.d/init.d/tomcat

#!/bin/bash
# /etc/rc.d/init.d/tomcat
# init script for tomcat precesses
# processname: tomcat
# description: tomcat is a j2se server
# chkconfig: 2345 86 16
# description: Start up the Tomcat servlet engine.

if [ -f /etc/init.d/functions ]; then
. /etc/init.d/functions
elif [ -f /etc/rc.d/init.d/functions ]; then
. /etc/rc.d/init.d/functions
else
echo -e "\atomcat: unable to locate functions lib. Cannot continue."
exit -1
fi
RETVAL=$?
CATALINA_HOME="/usr/local/root/tomcat"  # tomcat å®‰è£…ç›®å½•,ä½ å®‰è£…åœ¨ä»€ä¹ˆç›®å½•ä¸‹å°±å¤åˆ¶ä»€ä¹ˆç›®å½•
case "$1" in
start)
if [ -f $CATALINA_HOME/bin/startup.sh ];
then
echo $"Starting Tomcat"
$CATALINA_HOME/bin/startup.sh
fi
;;
stop)
if [ -f $CATALINA_HOME/bin/shutdown.sh ];
then
echo $"Stopping Tomcat"
$CATALINA_HOME/bin/shutdown.sh
fi
;;
*)
echo $"Usage: $0 {start|stop}"
exit 1
;;
esac
exit $RETVAL
```
```bash
chmod 755 /etc/rc.d/init.d/tomcat
chkconfig --add /etc/rc.d/init.d/tomcat
```

ä»¥ä¸Šæ‰€æœ‰å·¥ä½œé¡ºåˆ©è¿›è¡Œå¹¶ä¸”æ²¡æœ‰æŠ¥é”™,åˆ™é…ç½®å®Œæˆ,ä½ å¯ä»¥è¾“å…¥å‘½ä»¤ `service tomcat start` å’Œ `service tomcat stop` è¿›è¡ŒéªŒè¯

**ä¿®æ”¹ç«¯å£å·**

è¿›å…¥ tomcat çš„ conf ç›®å½•ä¸‹,ä¿®æ”¹ server.xml æ–‡ä»¶,å¯ä»¥ä¿®æ”¹ç«¯å£,é»˜è®¤ 8080

**è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ç™»å½•**

ä¿®æ”¹ conf ç›®å½•ä¸‹ tomcat-user.xml
```vim
<role rolename="admin-gui"/>
<role rolename="manager-gui"/>
<role rolename="manager-jmx"/>
<role rolename="manager-script"/>
<role rolename="manager-status"/>
<user username="admin" password="admin" roles="admin-gui,manager-gui,manager-jmx,manager-script,manager-status"/>
```

- manager-gui - å…è®¸è®¿é—® HTML GUI å’ŒçŠ¶æ€é¡µé¢
- manager-script - å…è®¸è®¿é—®æ–‡æœ¬ç•Œé¢å’ŒçŠ¶æ€é¡µé¢
- manager-jmx - å…è®¸è®¿é—® JMX ä»£ç†å’ŒçŠ¶æ€é¡µé¢
- manager-status - ä»…å…è®¸è®¿é—®çŠ¶æ€é¡µé¢

```bash
service tomcat start
service tomcat stop
```

å¦‚æœçˆ† 403 é”™è¯¯,å°±æ³¨é‡Šæ‰ Tomcat/webapps/manager/META-INF/context.xml æ–‡ä»¶ä¸­å†…å®¹
```xml
<!-- <Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1" />-->
```

è‡ªè¡Œé‡å¯æœåŠ¡

**å‘å¸ƒæµ‹è¯•**

tomcat é»˜è®¤çš„å‘å¸ƒ web é¡¹ç›®çš„ç›®å½•æ˜¯ï¼šwebapps

å°†å¯¼å‡ºçš„ war åŒ…ç›´æ¥ä¸Šä¼ åˆ° webapps æ ¹ç›®å½•ä¸‹,éšç€ tomcat çš„å¯åŠ¨,war åŒ…å¯ä»¥è‡ªåŠ¨è¢«è§£æ.

ç„¶åè°ƒç”¨è·¯å¾„æŸ¥è¯¢æ˜¯å¦å®‰è£…æˆåŠŸ

---

## Wordpress

WordPress æ˜¯ä¸€ä¸ªå¼€æºçš„å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰ï¼Œå…è®¸ç”¨æˆ·æ„å»ºåŠ¨æ€ç½‘ç«™å’Œåšå®¢ã€‚

**å®˜ç½‘**
- https://wordpress.org/

**å®‰è£…**

ä¸‹è½½ WordPress å®‰è£…åŒ…å¹¶è§£å‹
```bash
wget https://wordpress.org/latest.tar.gz

tar -xzvf latest.tar.gz
```

åˆ›å»º WordPress æ•°æ®åº“å’Œä¸€ä¸ªç”¨æˆ·
```bash
yum install mariadb mariadb-server
systemctl start mariadb
systemctl enable mariadb
mysql_secure_installation

mysql -u root -p

åˆ›å»ºä¸€ä¸ªä¸“ç»™ WordPress å­˜æ•°æ®çš„æ•°æ®åº“
MariaDB [(none)]> create database idiota_info;  # æœ€åçš„"idiota_info"ä¸ºæ•°æ®åº“å

åˆ›å»ºç”¨äº WordPress å¯¹åº”ç”¨æˆ·
MariaDB [(none)]> create user idiota@localhost identified by 'password';   # "idiota"å¯¹åº”åˆ›å»ºçš„ç”¨æˆ·,"password"å†…å¡«å†™ç”¨æˆ·çš„å¯†ç 

åˆ†åˆ«é…ç½®æœ¬åœ°ç™»å½•å’Œè¿œç¨‹ç™»å½•æƒé™
MariaDB [(none)]> grant all privileges on idiota_info.* to idiota@'localhost' identified by 'password';
MariaDB [(none)]> grant all privileges on idiota_info.* to idiota@'%' identified by 'password';

åˆ·æ–°æƒé™
MariaDB [(none)]> flush privileges;
```

é…ç½® PHP
```bash
# å®‰è£…PHPæº
rpm -ivh https://mirror.webtatic.com/yum/el7/epel-release.rpm
rpm -ivh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm

# å®‰è£… PHP7.0
yum install php70w
yum install php70w-mysql
yum install httpd

# é‡å¯Apache
systemctl restart httpd

# æŸ¥çœ‹PHPç‰ˆæœ¬
php -v
```

è®¾ç½® wp-config.php æ–‡ä»¶
```bash
cd wordpress
vim wp-config-sample.php
```
åœ¨æ ‡æœ‰ `// ** MySQL settings - You can get this info from your web host ** //` ä¸‹è¾“å…¥ä½ çš„æ•°æ®åº“ç›¸å…³ä¿¡æ¯
```
DB_NAME
    åœ¨ç¬¬äºŒæ­¥ä¸­ä¸º WordPress åˆ›å»ºçš„æ•°æ®åº“åç§°
DB_USER
    åœ¨ç¬¬äºŒæ­¥ä¸­åˆ›å»ºçš„ WordPress ç”¨æˆ·å
DB_PASSWORD
    ç¬¬äºŒæ­¥ä¸­ä¸º WordPress ç”¨æˆ·åè®¾å®šçš„å¯†ç 
DB_HOST
    ç¬¬äºŒæ­¥ä¸­è®¾å®šçš„ hostname (é€šå¸¸æ˜¯ localhost,ä½†æ€»æœ‰ä¾‹å¤–ï¼›å‚è§ç¼–è¾‘wp-config.php æ–‡ä»¶ä¸­çš„"å¯èƒ½çš„ DB_HOST å€¼) .
DB_CHARSET
    æ•°æ®åº“å­—ç¬¦ä¸²,é€šå¸¸ä¸å¯æ›´æ”¹.
DB_COLLATE
    ç•™ä¸ºç©ºç™½çš„æ•°æ®åº“æ’åº.
```

åœ¨æ ‡æœ‰ `* Authentication Unique Keys.` çš„ç‰ˆå—ä¸‹è¾“å…¥å¯†é’¥çš„å€¼,ä¿å­˜ wp-config.php æ–‡ä»¶,ä¹Ÿå¯ä»¥ä¸ç®¡è¿™ä¸ª

ä¸Šä¼ æ–‡ä»¶

æ¥ä¸‹æ¥éœ€è¦å†³å®šå°†åšå®¢æ”¾åœ¨ç½‘ç«™çš„ä»€ä¹ˆä½ç½®ä¸Šï¼š
- ç½‘ç«™æ ¹ç›®å½•ä¸‹ (å¦‚ï¼šhttp://example.com/)
- ç½‘ç«™å­ç›®å½•ä¸‹ (å¦‚ï¼šhttp://example.com/blog/)

æ ¹ç›®å½•

å¦‚æœéœ€è¦å°†æ–‡ä»¶ä¸Šä¼ åˆ° web æœåŠ¡å™¨,å¯ç”¨ FTP å®¢æˆ·ç«¯å°† wordpress ç›®å½•ä¸‹æ‰€æœ‰å†…å®¹ (æ— éœ€ä¸Šä¼ ç›®å½•æœ¬èº«) ä¸Šä¼ è‡³ç½‘ç«™æ ¹ç›®å½•

å¦‚æœæ–‡ä»¶å·²ç»åœ¨ web æœåŠ¡å™¨ä¸­ä¸”å¸Œæœ›é€šè¿‡ shell è®¿é—®æ¥å®‰è£… wordpress,å¯å°† wordpress ç›®å½•ä¸‹æ‰€æœ‰å†…å®¹ (æ— éœ€è½¬ç§»ç›®å½•æœ¬èº«) è½¬ç§»åˆ°ç½‘ç«™æ ¹ç›®å½•

å­ç›®å½•

å¦‚æœéœ€è¦å°†æ–‡ä»¶ä¸Šä¼ åˆ° web æœåŠ¡å™¨,éœ€å°† wordpress ç›®å½•é‡å‘½å,ä¹‹åç”¨ FTP å®¢æˆ·ç«¯å°†é‡å‘½ååçš„ç›®å½•ä¸Šä¼ åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹æŸä¸€ä½ç½®

å¦‚æœæ–‡ä»¶å·²ç»åœ¨ web æœåŠ¡å™¨ä¸­ä¸”å¸Œæœ›é€šè¿‡shellè®¿é—®æ¥å®‰è£… wordpress,å¯å°† wordpress ç›®å½•è½¬ç§»åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹æŸä¸€ä½ç½®,ä¹‹åé‡å‘½å wordpress ç›®å½•

```bash
mv wordpress/* /var/www/html

setenforce 0  # å…³é—­ selinux
service httpd start
service firewalld stop
```

è¿è¡Œå®‰è£…è„šæœ¬

- å°† WordPress æ–‡ä»¶æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„ç”¨æˆ·è¯·è®¿é—®ï¼šhttp://example.com/wp-admin/install.php
- å°† WordPress æ–‡ä»¶æ”¾åœ¨å­ç›®å½• (å‡è®¾å­ç›®å½•åä¸º blog) ä¸‹çš„ç”¨æˆ·è¯·è®¿é—®ï¼šhttp://example.com/blog/wp-admin/install.php
- è®¿é—® `http://xxx.xxx.xxx.xxx/wp-admin/setup-config.php` ä¸‹é¢å°±ç•¥äº†,è‡ªå·±ç…§ç€é¡µé¢ä¸Šæ˜¾ç¤ºçš„æ¥

---

## Mijisou

`åŸºäºå¼€æºé¡¹ç›® Searx äºŒæ¬¡å¼€å‘çš„æ“ä½œå¼•æ“`

`2019-11-17:ä¸åœ¨æ¨èè¯¥å¼€æºé¡¹ç›®ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨æºé¡¹ç›®` [searx](##searx)

**é¡¹ç›®åœ°å€**
- https://github.com/entropage/mijisou

**ä¾èµ–**

è‡ªè¡Œå®‰è£… python3 pip redis

**å®‰è£…**
```bash
systemctl start redis
systemctl enable redis
git clone https://github.com/entropage/mijisou.git
cd mijisou && pip install -r requirements.txt
```

**é…ç½®**
```yml
vim searx/settings_et_dev.yml

general:
    debug : False # Debug mode, only for development
    instance_name : "123æœç´¢" # displayed name

search:
    safe_search : 0 # Filter results. 0: None, 1: Moderate, 2: Strict
    autocomplete : "" # Existing autocomplete backends: "baidu", "dbpedia", "duckduckgo", "google", "startpage", "wikipedia" - leave blank to turn it off by default
    language : "zh-CN"
    ban_time_on_fail : 5 # ban time in seconds after engine errors
    max_ban_time_on_fail : 120 # max ban time in seconds after engine errors

server:
    port : 8888
    bind_address : "0.0.0.0" # address to listen on
    secret_key : "123" # change this!
    base_url : False # Set custom base_url. Possible values: False or "https://your.custom.host/location/"
    image_proxy : False # Proxying image results through searx
    http_protocol_version : "1.0"  # 1.0 and 1.1 are supported

cache:
    cache_server : "127.0.0.1" # redis cache server ip address
    cache_port : 6379 # redis cache server port
    cache_time : 30 # cache 30 s
    cache_type : "redis" # cache type
    cache_db : 0 # we use db 0 in dev env

ui:
    static_path : "" # Custom static path - leave it blank if you didn't change
    templates_path : "" # Custom templates path - leave it blank if you didn't change
    default_theme : entropage # ui theme
    default_locale : "" # Default interface locale - leave blank to detect from browser information or use codes from the 'locales' config section
    theme_args :
        oscar_style : logicodev # default style of oscar

# searx supports result proxification using an external service: https://github.com/asciimoo/morty
# uncomment below section if you have running morty proxy
result_proxy:
    url : ""  #morty proxy service
    key : Your_result_proxy_key
    server_name : ""

outgoing: # communication with search engines
    request_timeout : 2.0 # seconds
    useragent_suffix : "" # suffix of searx_useragent, could contain informations like an email address to the administrator
    pool_connections : 100 # Number of different hosts
    pool_maxsize : 10 # Number of simultaneous requests by host
# uncomment below section if you want to use a proxy
# see http://docs.python-requests.org/en/latest/user/advanced/#proxies
# SOCKS proxies are also supported: see http://docs.python-requests.org/en/master/user/advanced/#socks
#    proxies :
#        http : http://192.168.199.5:24000
#        http : http://192.168.199.5:3128
#        https: http://127.0.0.1:8080
# uncomment below section only if you have more than one network interface
# which can be the source of outgoing search requests
#    source_ips:
#        - 1.1.1.1
#        - 1.1.1.2
    haipproxy_redis:
      #host: 192.168.199.5
      #port: 6379
      #password: kckdkkdkdkddk
      #db: 0

engines:
  - name : duckduckgo
    engine : duckduckgo
    shortcut : ddg

  - name : duckduckgo images
    engine : duckduckgo_images
    shortcut : ddi

  - name : twitter
    engine : twitter
    shortcut : tw

  - name : mojeek
    shortcut: mjk
    engine: xpath
    paging : True
    search_url : https://www.mojeek.com/search?q={query}&s={pageno}
    results_xpath: /html/body//div[@class="results"]/ul[@class="results-standard"]/li
    url_xpath : ./h2/a/@href
    title_xpath : ./h2
    content_xpath : ./p[@class="s"]
    suggestion_xpath : /html/body//div[@class="top-info"]/p[@class="top-info spell"]/a
    first_page_num : 1
    page_size : 10

  - name : torrentz
    engine : torrentz
    shortcut : tor
    url: https://torrentz2.eu/
    timeout : 3.0

  - name : startpage
    engine : startpage
    shortcut : sp
    timeout : 6.0

  - name : baidu
    engine : baidu
    shortcut : bd

  - name : baidu images
    engine : baidu_images
    shortcut : bdi

  - name : baidu videos
    engine : baidu_videos
    shortcut : bdv

  - name : sogou images
    engine : sogou_images
    shortcut : sgi

  - name : sogou videos
    engine : sogou_videos
    shortcut : sgv

  - name : 360 images
    engine : so_images
    shortcut : 360i

  - name : bing
    engine : bing
    shortcut : bi

  - name : bing images
    engine : bing_images
    shortcut : bii

  - name : bing videos
    engine : bing_videos
    shortcut : biv

  - name : bitbucket
    engine : xpath
    paging : True
    search_url : https://bitbucket.org/repo/all/{pageno}?name={query}
    url_xpath : //article[@class="repo-summary"]//a[@class="repo-link"]/@href
    title_xpath : //article[@class="repo-summary"]//a[@class="repo-link"]
    content_xpath : //article[@class="repo-summary"]/p
    categories : it
    timeout : 4.0
    shortcut : bb

  - name : free software directory
    engine : mediawiki
    shortcut : fsd
    categories : it
    base_url : https://directory.fsf.org/
    number_of_results : 5
    search_type : title
    timeout : 5.0

  - name : gentoo
    engine : gentoo
    shortcut : ge

  - name : gitlab
    engine : json_engine
    paging : True
    search_url : https://gitlab.com/api/v4/projects?search={query}&page={pageno}
    url_query : web_url
    title_query : name_with_namespace
    content_query : description
    page_size : 20
    categories : it
    shortcut : gl
    timeout : 10.0

  - name : github
    engine : github
    shortcut : gh

  - name : stackoverflow
    engine : stackoverflow
    shortcut : st

  - name : wikipedia
    engine : wikipedia
    shortcut : wp
    base_url : 'https://en.wikipedia.org/'

locales:
    en : English
    ar : Ø§Ù„Ø¹ÙØ±ÙØ¨ÙÙŠÙÙ‘Ø© (Arabic)
    bg : Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸ (Bulgarian)
    cs : ÄŒeÅ¡tina (Czech)
    da : Dansk (Danish)
    de : Deutsch (German)
    el_GR : Î•Î»Î»Î·Î½Î¹ÎºÎ¬ (Greek_Greece)
    eo : Esperanto (Esperanto)
    es : EspaÃ±ol (Spanish)
    fi : Suomi (Finnish)
    fil : Wikang Filipino (Filipino)
    fr : FranÃ§ais (French)
    he : ×¢×‘×¨×™×ª (Hebrew)
    hr : Hrvatski (Croatian)
    hu : Magyar (Hungarian)
    it : Italiano (Italian)
    ja : æ—¥æœ¬èª (Japanese)
    nl : Nederlands (Dutch)
    pl : Polski (Polish)
    pt : PortuguÃªs (Portuguese)
    pt_BR : PortuguÃªs (Portuguese_Brazil)
    ro : RomÃ¢nÄƒ (Romanian)
    ru : Ğ ÑƒÑÑĞºĞ¸Ğ¹ (Russian)
    sk : SlovenÄina (Slovak)
    sl : Slovenski (Slovene)
    sr : ÑÑ€Ğ¿ÑĞºĞ¸ (Serbian)
    sv : Svenska (Swedish)
    tr : TÃ¼rkÃ§e (Turkish)
    uk : ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ° Ğ¼Ğ¾Ğ²Ğ° (Ukrainian)
    zh : ç®€ä½“ä¸­æ–‡ (Chinese, Simplified)
    zh_TW : ç¹é«”ä¸­æ–‡ (Chinese, Traditional)

doi_resolvers :
  oadoi.org : 'https://oadoi.org/'
  doi.org : 'https://doi.org/'
  doai.io  : 'http://doai.io/'
  sci-hub.tw : 'http://sci-hub.tw/'

default_doi_resolver : 'oadoi.org'

sentry:
  dsn: https://xkdkkdkdkdkdkdkdk@sentry.xxx.com/2
```

**è¿è¡Œ+caddy åä»£**
```bash
mv searx/settings_et_dev.yml searx/settings.yml
gunicorn searx.webapp:app -b 127.0.0.1:8888 -D	# ä¸€å®šè¦åœ¨mijisouç›®å½•ä¸‹è¿è¡Œ

wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubiBackup/doubi/master/caddy_install.sh && chmod +x caddy_install.sh && bash caddy_install.sh

echo "www.ä½ çš„åŸŸå.com {
 gzip
 tls xxxx@xxx.com
 proxy / 127.0.0.1:8888
}" >> /usr/local/caddy/Caddyfile

/etc/init.d/caddy start
# å¦‚æœå¯åŠ¨å¤±è´¥å¯ä»¥çœ‹ Caddy æ—¥å¿—ï¼štail -f /tmp/caddy.log
```

**opensearch**
```xml
vim /root/mijisou/searx/templates/__common__/opensearch.xml

<?xml version="1.0" encoding="utf-8"?>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/">
  <ShortName>{{ instance_name }}</ShortName>
  <Description>a privacy-respecting, hackable metasearch engine</Description>
  <InputEncoding>UTF-8</InputEncoding>
  <Image>{{ urljoin(host, url_for('static', filename='img/favicon.png')) }}</Image>
   <LongName>searx metasearch</LongName>
  {% if opensearch_method == 'get' %}
     <Url type="text/html" method="get" template="https://www.ä½ çš„åŸŸå.com/?q={searchTerms}"/>
  {% if autocomplete %}
  <Url type="application/x-suggestions+json" method="get" template="{{ host }}autocompleter">
      <Param name="format" value="x-suggestions" />
      <Param name="q" value="{searchTerms}" />
  </Url>
  {% endif %}
  {% else %}
  <Url type="text/html" method="post" template="{{ host }}">
    <Param name="q" value="{searchTerms}" />
  </Url>
  {% if autocomplete %}
  <!-- TODO, POST REQUEST doesn't work -->
  <Url type="application/x-suggestions+json" method="get" template="{{ host }}autocompleter">
  <Param name="format" value="x-suggestions" />
  <Param name="q" value="{searchTerms}" />
  </Url>
  {% endif %}
  {% endif %}
</OpenSearchDescription>
```

**ä¿®æ”¹**

`ç§˜è¿¹Â®ï¸æ˜¯ç†µåŠ ç½‘ç»œç§‘æŠ€ (åŒ—äº¬) æœ‰é™å…¬å¸æ‰€æŒæœ‰çš„æ³¨å†Œå•†æ ‡,ä»»ä½•ç»„ç»‡æˆ–ä¸ªäººåœ¨ä½¿ç”¨ä»£ç å‰è¯·å»é™¤ä»»ä½•å’Œç§˜è¿¹ç›¸å…³å­—æ®µ,å»é™¤ç§˜è¿¹æœç´¢çš„UIè®¾è®¡,å¦åˆ™ç†µåŠ ç½‘ç»œç§‘æŠ€ (åŒ—äº¬) æœ‰é™å…¬å¸ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©.`

é…ç½®æ–‡ä»¶ä¸­æ”¹ä¸‹åå­— `mijisou/searx/static/themes/entropage/img` ä¸­çš„ logo å›¾æ ‡è‡ªå·±æ¢ä¸€ä¸‹

**ç®¡ç†**
```bash
ps -aux
çœ‹ä¸€ä¸‹å“ªä¸ªæ˜¯ gunicorn è¿›ç¨‹
kill æ€æ‰
gunicorn searx.webapp:app -b 127.0.0.1:8888 -D  # å†æ¬¡å¼ºè°ƒ,åœ¨ /mijisou ç›®å½•ä¸‹è¿è¡Œ
```

**é…åˆ Cloudflare çš„ CDN**
1. Cloudflare åˆ›å»º site
2. åŸŸåå•†æ”¹ nameserver
3. ä¿®æ”¹ Caddy é…ç½®
  ```bash
  echo "www.ä½ çš„åŸŸå.com:80 {
  gzip
  proxy / 127.0.0.1:8888
  }" >> /usr/local/caddy/Caddyfile
  ```

**ç£ç›˜å ç”¨**

æœåŠ¡è¿è¡Œä¸€æ®µæ—¶é—´å,`/var/lib/redis` è·¯å¾„ä¸‹ä¼šæœ‰ä¸€äº›ç¼“å­˜æ–‡ä»¶(è²Œä¼¼),ç›´æ¥åˆ äº†å°±è¡Œ

**redis æŠ¥é”™**

å¦‚æœå‡ºç° "MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on disk. Commands that may modify the data set are disabled. Please check Redis logs for details about the error. Resque" å¯ä»¥å°è¯•ä»¥ä¸‹å‘½ä»¤

```bash
$ redis-cli
> config set stop-writes-on-bgsave-error no
```
æˆ–
```
vim /etc/redis.conf

stop-writes-on-bgsave-error no
```


- https://gist.github.com/kapkaev/4619127

**Thank**
- [asciimoo/searx](https://github.com/asciimoo/searx)
- [entropage/mijisou: Privacy-respecting metasearch engine](https://github.com/entropage/mijisou)
- [ä¸€ä¸ªå¯ä»¥ä¿æŠ¤ä¸ªäººéšç§çš„ç½‘ç»œæœç´¢æœåŠ¡ï¼šç§˜è¿¹æœç´¢æ­å»ºæ•™ç¨‹ - Rat's Blog](https://www.moerats.com/archives/922/)
- [OpenSearch description format | MDN](https://developer.mozilla.org/en-US/docs/Web/OpenSearch)
- [Add or remove a search engine in Firefox | Firefox Help](https://support.mozilla.org/en-US/kb/add-or-remove-search-engine-firefox)

---

# æ•°æ®åº“
## Relational
### Oracle

- æœºå™¨ç‰©ç†å†…å­˜åº”ä¸å°‘äº 1GBï¼Œå¦‚æœæ˜¯ VMWARE è™šæ‹Ÿæœºå»ºè®®ä¸å°‘äº 1200MB.
- å¯¹äº64ä½çš„oracle11gæ•°æ®åº“ï¼Œè‹¥ç¨‹åºæ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶å®‰è£…åœ¨åŒä¸€ä¸ªåˆ†åŒºï¼Œåˆ™è¯¥åˆ†åŒºçš„ç¡¬ç›˜ç©ºé—´è¦æ±‚åˆ†åˆ«ä¸ºï¼šä¼ä¸šç‰ˆ 5.65GBã€æ ‡å‡†ç‰ˆ 5.38GBï¼›é™¤æ­¤ä»¥å¤–ï¼Œè¿˜åº”ç¡®ä¿ `/tmp` ç›®å½•æ‰€åœ¨åˆ†åŒºçš„ç©ºé—´ä¸å°‘äº1GBï¼Œæ€»çš„æ¥è¯´ï¼Œå»ºè®®ä¸º oracle11g å‡†å¤‡è‡³å°‘ 8GB çš„ç¡¬ç›˜ç©ºé—´

**RPM æ–¹å¼å®‰è£…**

ä¸‹è½½éœ€è¦çš„å®‰è£…åŒ…
- http://yum.oracle.com/repo/OracleLinux/OL7/latest/x86_64/getPackage/oracle-database-preinstall-19c-1.0-1.el7.x86_64.rpm
- https://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html

è¿™é‡Œä»¥ Oracle19c ä¸ºä¾‹

```bash
yum localinstall -y oracle-database-preinstall-19c-1.0-1.el7.x86_64.rpm

yum localinstall -y oracle-database-ee-19c-1.0-1.x86_64.rpm
```

æ³¨æ„å®‰è£…å®Œæˆä¹‹åçš„é…ç½® éœ€è¦ä½¿ç”¨ root ç”¨æˆ·.

ä¿®æ”¹å­—ç¬¦é›†ä»¥åŠå…¶ä»–çš„é…ç½®:
```
vim /etc/init.d/oracledb_ORCLCDB-19c

export ORACLE_VERSION=19c
export ORACLE_SID=ORA19C
export TEMPLATE_NAME=General_Purpose.dbc
export CHARSET=ZHS16GBK
export PDB_NAME=ORA19CPDB
export CREATE_AS_CDB=true
```

å¤åˆ¶å‚æ•°æ–‡ä»¶
```bash
cd /etc/sysconfig/
cp oracledb_ORCLCDB-19c.conf  oracledb_ORA19C-19c.conf

/etc/init.d/oracledb_ORCLCDB-19c configure
# ç­‰å¾…Oracleæ•°æ®åº“æ‰§è¡Œåˆå§‹åŒ–æ“ä½œå³å¯
```

å¢åŠ ç¯å¢ƒå˜é‡å¤„ç†
```vim
vim /etc/profile.d/oracle19c.sh

export  ORACLE_HOME=/opt/oracle/product/19c/dbhome_1
export  PATH=$PATH:/opt/oracle/product/19c/dbhome_1/bin
export  ORACLE_SID=ORA19C
```
source /etc/profile.d/oracle19c.sh

ä¿®æ”¹Oracleç”¨æˆ·çš„å¯†ç :
```bash
passwd oracle

# ä½¿ç”¨Oracleç™»å½•è¿›è¡Œç›¸å…³çš„å¤„ç†
su - oracle
sqlplus / as sysdba

# æŸ¥çœ‹pdbä¿¡æ¯
show pdbs

# ä¿®æ”¹å¯†ç 
alter user system identified by Test1234;

# å¯åŠ¨
startup
exit

# å¯åŠ¨ç›‘å¬å™¨
cd $ORACLE_HOME/bin
lsnrctl start
```
```
systemctl stop firewalld
systemctl disable firewalld
setenforce 0
```

ä½¿ç”¨ navicat è¿æ¥æµ‹è¯•

![image](../../../assets/img/è¿ç»´/Linux/Power/1.png)

`æ³¨:æˆ‘åœ¨ oracle-database-ee-19c-1.0-1.x86_64 ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ Navicat Premium 12.1.18 å®‰è£… instantclient-basic-windows.x64-12.1.0.2.0 å¯ä»¥æˆåŠŸè¿æ¥`

**æ³¨ : æŠ¥é”™ORA-28547:connection to server failed, probable Oracle Net admin error**

oci.dll ç‰ˆæœ¬ä¸å¯¹ã€‚å› ä¸º Navicat æ˜¯é€šè¿‡ Oracle å®¢æˆ·ç«¯è¿æ¥ Oracle æœåŠ¡å™¨çš„ï¼ŒOracle çš„å®¢æˆ·ç«¯åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æ ‡å‡†ç‰ˆï¼Œä¸€ç§æ˜¯ç®€æ´ç‰ˆï¼Œå³ Oracle Install Clientã€‚è€Œæˆ‘ä»¬ç”¨ Navicat æ—¶é€šå¸¸ä¼šåœ¨è‡ªå·±çš„å®‰è£…è·¯å¾„ä¸‹åŒ…å«å¤šä¸ªç‰ˆæœ¬çš„ OCIï¼Œå¦‚æœä½¿ç”¨ Navicat è¿æ¥ Oracle æœåŠ¡å™¨å‡ºç° ORA-28547 é”™è¯¯æ—¶ï¼Œå¤šæ•°æ˜¯å› ä¸º Navicat æœ¬åœ°çš„ OCI ç‰ˆæœ¬ä¸ Oracle æœåŠ¡å™¨æœåŠ¡å™¨ä¸ç¬¦é€ æˆçš„ã€‚

OCI ä¸‹è½½åœ°å€ï¼šhttps://www.oracle.com/database/technologies/instant-client/downloads.html ,è§£å‹instantclient-basic-win-x64

æ‰“å¼€navicatï¼Œä¸€æ¬¡é€‰æ‹©ï¼šå·¥å…·->é€‰é¡¹->ç¯å¢ƒ-->OCIç¯å¢ƒï¼Œé€‰æ‹©åˆšæ‰è§£å‹å¥½çš„ instantclient-basic-win-x64 ç›®å½•ä¸­çš„ oci.dll æ–‡ä»¶å³å¯ï¼Œé‡å¯ navicat

**æ³¨ : æŠ¥é”™ oracle library is not loaded**

è¿˜æ˜¯ oci.dll ç‰ˆæœ¬ä¸å¯¹ï¼Œæ¢ä¸ªä½ç‰ˆæœ¬çš„ Instant Client ğŸ¤£

**æ³¨ : æŠ¥é”™ ORA-28040: No matching authentication protocol**

è¿™ä¸ªè¿˜æ˜¯ oci.dll ç‰ˆæœ¬ä¸å¯¹ï¼Œå†æ¢ä¸ªé«˜ç‰ˆæœ¬çš„ Instant Client ğŸ˜‚

---

### Mariadb

**å®˜ç½‘**
- https://mariadb.org/

**å®‰è£…**

`yum install mariadb mariadb-server`

**æ•°æ®åº“åˆå§‹åŒ–**
```bash
systemctl start mariadb
mysql_secure_installation
```

|é…ç½®æµç¨‹ 	|è¯´æ˜ |æ“ä½œ|
|------------ | ------------- | ------------|
Enter current password for root (enter for none) |	è¾“å…¥ root å¯†ç  	| åˆæ¬¡è¿è¡Œç›´æ¥å›è½¦
Set root password? [Y/n] |	æ˜¯è®¾ç½® root å¯†ç  |	å¯ä»¥ y æˆ–è€… å›è½¦
New password |	è¾“å…¥æ–°å¯†ç 
Re-enter new password |	å†æ¬¡è¾“å…¥æ–°å¯†ç 
Remove anonymous users? [Y/n] |	æ˜¯å¦åˆ é™¤åŒ¿åç”¨æˆ· | å¯ä»¥ y æˆ–è€…å›è½¦ æœ¬é¢˜y
Disallow root login remotely? [Y/n]  |	æ˜¯å¦ç¦æ­¢ root è¿œç¨‹ç™»å½• |  å¯ä»¥ y æˆ–è€…å›è½¦ æœ¬é¢˜n
Remove test database and access to it? [Y/n]  |	æ˜¯å¦åˆ é™¤ test æ•°æ®åº“ | y æˆ–è€…å›è½¦ æœ¬é¢˜y
Reload privilege tables now? [Y/n] | æ˜¯å¦é‡æ–°åŠ è½½æƒé™è¡¨ | y æˆ–è€…å›è½¦ æœ¬é¢˜y

**é…ç½®è¿œç¨‹è®¿é—®**

Mariadb æ•°æ®åº“æˆæƒ root ç”¨æˆ·èƒ½å¤Ÿè¿œç¨‹è®¿é—®
```bash
systemctl start mariadb
mysql -u root -p


select User, host from mysql.user;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%'IDENTIFIED BY 'toor' WITH GRANT OPTION;

# !!!æ³¨æ„!!!è¿™é‡Œé…ç½®äº†ä¸ªè´¦å·å¯†ç  root toor çš„è¿œç¨‹ç”¨æˆ·ï¼Œè¯·è‡ªè¡Œæ›´æ”¹å¯†ç !!!å†æ¬¡æç¤º!!!
# !!!æ³¨æ„!!!è¿™é‡Œé…ç½®äº†ä¸ªè´¦å·å¯†ç  root toor çš„è¿œç¨‹ç”¨æˆ·ï¼Œè¯·è‡ªè¡Œæ›´æ”¹å¯†ç !!!å†æ¬¡æç¤º!!!
# !!!æ³¨æ„!!!è¿™é‡Œé…ç½®äº†ä¸ªè´¦å·å¯†ç  root toor çš„è¿œç¨‹ç”¨æˆ·ï¼Œè¯·è‡ªè¡Œæ›´æ”¹å¯†ç !!!å†æ¬¡æç¤º!!!
# !!!æ³¨æ„!!!è¿™é‡Œé…ç½®äº†ä¸ªè´¦å·å¯†ç  root toor çš„è¿œç¨‹ç”¨æˆ·ï¼Œè¯·è‡ªè¡Œæ›´æ”¹å¯†ç !!!å†æ¬¡æç¤º!!!

FLUSH PRIVILEGES;
```

```bash
firewall-cmd --permanent --add-service=mysql
firewall-cmd --reload

systemctl enable mariadb
```

**é‡ç½®å¯†ç **

```bash
# å…ˆå…³æœåŠ¡
systemctl stop mariadb

# ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨æ²¡æœ‰æƒé™æ£€æŸ¥çš„æƒ…å†µä¸‹é‡æ–°å¯åŠ¨æ•°æ®åº“
mysqld_safe --skip-grant-tables &

# è¿™é‡Œ, --skip-grant-tables é€‰é¡¹è®©ä½ åœ¨æ²¡æœ‰å¯†ç å’Œæ‰€æœ‰æƒé™çš„æƒ…å†µä¸‹è¿›è¡Œè¿æ¥.å¦‚æœä½¿ç”¨æ­¤é€‰é¡¹å¯åŠ¨æœåŠ¡å™¨,å®ƒè¿˜ä¼šå¯ç”¨ --skip-networking é€‰é¡¹,è¿™ç”¨äºé˜²æ­¢å…¶ä»–å®¢æˆ·ç«¯è¿æ¥åˆ°æ•°æ®åº“æœåŠ¡å™¨.å¹¶ä¸”,& ç¬¦å·ç”¨äºåœ¨åå°è¿è¡Œå‘½ä»¤,å› æ­¤ä½ å¯ä»¥åœ¨ä»¥ä¸‹æ­¥éª¤ä¸­è¾“å…¥å…¶ä»–å‘½ä»¤.è¯·æ³¨æ„,ä¸Šè¿°å‘½ä»¤å¾ˆå±é™©,å¹¶ä¸”ä½ çš„æ•°æ®åº“ä¼šå˜å¾—ä¸å®‰å…¨.ä½ åº”è¯¥åªåœ¨çŸ­æ—¶é—´å†…è¿è¡Œæ­¤å‘½ä»¤ä»¥é‡ç½®å¯†ç .

# æ¥ä¸‹æ¥,ä»¥ root ç”¨æˆ·èº«ä»½ç™»å½• MySQL/MariaDB æœåŠ¡å™¨ï¼š
mysql

# åœ¨ mysql > æˆ– MariaDB [(none)] > æç¤ºç¬¦ä¸‹,è¿è¡Œä»¥ä¸‹å‘½ä»¤é‡ç½® root ç”¨æˆ·å¯†ç ï¼š
UPDATE mysql.user SET Password=PASSWORD('NEW-PASSWORD') WHERE User='root';

# ä½¿ç”¨ä½ è‡ªå·±çš„å¯†ç æ›¿æ¢ä¸Šè¿°å‘½ä»¤ä¸­çš„ NEW-PASSWORD.
# ç„¶å,è¾“å…¥ä»¥ä¸‹å‘½ä»¤é€€å‡º mysql æ§åˆ¶å°.

FLUSH PRIVILEGES;
exit

# æœ€å,å…³é—­ä¹‹å‰ä½¿ç”¨ --skip-grant-tables é€‰é¡¹è¿è¡Œçš„æ•°æ®åº“.ä¸ºæ­¤,è¿è¡Œï¼š
mysqladmin -u root -p shutdown
# ç³»ç»Ÿå°†è¦æ±‚ä½ è¾“å…¥åœ¨ä¸Šä¸€æ­¥ä¸­è®¾ç½®çš„ MySQL/MariaDB ç”¨æˆ·å¯†ç .

systemctl start mariadb
mysql -u root -p
```

---

### MySQL

**å®˜ç½‘**
- https://www.mysql.com

**å®‰è£…**

å’Œ Mariadb å·®ä¸å¤š,çœ‹ Mariadb çš„å°±è¡Œäº†
```bash
apt install mysql-server mysql-clien

service mysql start
```

---

### Postgresql

**å®˜ç½‘**
- https://www.postgresql.org

**å®‰è£…**
```bash
yum install postgresql-server
postgresql-setup initdb # åˆå§‹åŒ–æ•°æ®åº“
service postgresql start  # å¯åŠ¨æœåŠ¡
```

PostgreSQL å®‰è£…å®Œæˆå,ä¼šå»ºç«‹ä¸€ä¸‹ â€˜postgresâ€™ ç”¨æˆ·,ç”¨äºæ‰§è¡Œ PostgreSQL,æ•°æ®åº“ä¸­ä¹Ÿä¼šå»ºç«‹ä¸€ä¸ª 'postgres' ç”¨æˆ·,é»˜è®¤å¯†ç ä¸ºè‡ªåŠ¨ç”Ÿæˆ,éœ€è¦åœ¨ç³»ç»Ÿä¸­æ”¹ä¸€ä¸‹.

**ä¿®æ”¹ç”¨æˆ·å¯†ç **
```sql
sudo -u postgres psql postgres
\l # æŸ¥çœ‹å½“å‰çš„æ•°æ®åº“åˆ—è¡¨Â 
\password postgres  # ç»™ postgres ç”¨æˆ·è®¾ç½®å¯†ç 
\qÂ  # é€€å‡ºæ•°æ®åº“
```

**å¼€å¯è¿œç¨‹è®¿é—®**
```vim
vim /var/lib/pgsql/data/postgresql.conf

listen_addresses='*'
```
```vim
vim /var/lib/pgsql/data/pg_hba.conf

# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
host    all             all             0.0.0.0/0               md5

# å…¶ä¸­ 0.0.0.0/0 è¡¨ç¤ºè¿è¡Œä»»æ„ ip åœ°å€è®¿é—®.
# è‹¥è®¾ç½®ä¸º 192.168.1.0/24 åˆ™è¡¨ç¤ºå…è®¸æ¥è‡ª ip ä¸º 192.168.1.0 ~ 192.168.1.255 ä¹‹é—´çš„è®¿é—®.
```

`service postgresql restart` é˜²ç«å¢™è®°å¾—æ”¾è¡Œ

---

## Document
### MongoDB

**å®˜ç½‘**
- https://www.mongodb.com/

**å®‰è£…**
```vim
vim /etc/yum.repos.d/mongodb-org-4.0.repo

[mongodb-org-4.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc
```

`yum install -y mongodb-org`

**é…ç½®è¿œç¨‹è®¿é—®**
```vim
vim /etc/mongod.conf

# Listen to all ip address
bind_ip = 0.0.0.0
```

`service mongod start`

**åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·**
```sql
mongo
>use admin
 db.createUser(
  {
    user: "myUserAdmin",
    pwd: "abc123",
    roles: [ { role: "userAdminAnyDatabase", db: "admin" }, "readWriteAnyDatabase" ]
  }
 )

> show dbs;	# æŸ¥çœ‹æ•°æ®åº“
> db.version();	# æŸ¥çœ‹æ•°æ®åº“ç‰ˆæœ¬
```

**å¯ç”¨æƒé™ç®¡ç†**
```vim
vim /etc/mongod.conf

#security
security:
authorization: enabled
```

`service mongod restart	`

---

## Key-value
### Redis

**å®˜ç½‘**
- https://redis.io/

**å®‰è£…**
- **åŒ…ç®¡ç†å™¨æ–¹å¼**

  åœ¨ CentOS å’Œ Red Hat ç³»ç»Ÿä¸­,é¦–å…ˆæ·»åŠ  EPEL ä»“åº“,ç„¶åæ›´æ–° yum æº:

  ```bash
  wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
  yum clean all
  yum makecache
  yum install redis
  ```

  åœ¨ debian ä¸­

  `apt install redis-server`

  å®‰è£…å¥½åå¯åŠ¨ Redis æœåŠ¡å³å¯

  `systemctl start redis`

- **æºä»£ç ç¼–è¯‘æ–¹å¼å®‰è£…**

  åœ¨å®˜ç½‘ä¸‹è½½ tar.gz çš„å®‰è£…åŒ…,æˆ–è€…é€šè¿‡ wget çš„æ–¹å¼ä¸‹è½½

  `wget http://download.redis.io/releases/redis-5.0.5.tar.gz`

  å®‰è£…
  ```bash
  tar -zxvf redis-5.0.5.tar.gz
  cd redis-5.0.5
  make
  yum install tcl tcl-devel -y
  make test
  make MALLOC=libc
  make install
  ```
  ```bash
  ./usr/local/bin/redis-server
  ctrl+z
  bg
  redis-cli
  ```

ä½¿ç”¨ redis-cli è¿›å…¥ Redis å‘½ä»¤è¡Œæ¨¡å¼æ“ä½œ
```bash
redis-cli
127.0.0.1:6379> ping
PONG
127.0.0.1:6379> exit
```

**å¼€å¯è¿œç¨‹è®¿é—®**

ä¸ºäº†å¯ä»¥ä½¿ Redis èƒ½è¢«è¿œç¨‹è¿æ¥,éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶,è·¯å¾„ä¸º /etc/redis.conf
```vim
vim /etc/redis.conf

#bind 127.0.0.1
requirepass å¯†ç 	#è®¾ç½® redis å¯†ç 
```
`service redis restart` å½“ç„¶è¿˜è¦è®°å¾—å¼€é˜²ç«å¢™

`redis-cli -h <ip> -p 6379 -a <PASSWORD>`

**å‹æµ‹**

Redis-benchmark æ˜¯å®˜æ–¹è‡ªå¸¦çš„ Redis æ€§èƒ½æµ‹è¯•å·¥å…·,å¯ä»¥æœ‰æ•ˆçš„æµ‹è¯• Redis æœåŠ¡çš„æ€§èƒ½.
```bash
redis-benchmark -h 127.0.0.1 -p 6379 -c 100 -n 100000
# 100 ä¸ªå¹¶å‘è¿æ¥,100000 ä¸ªè¯·æ±‚,æ£€æµ‹ host ä¸º localhost ç«¯å£ä¸º 6379 çš„ redis æœåŠ¡å™¨æ€§èƒ½

redis-benchmark -h 127.0.0.1 -p 6379 -q -d 100
# æµ‹è¯•å­˜å–å¤§å°ä¸º100å­—èŠ‚çš„æ•°æ®åŒ…çš„æ€§èƒ½

redis-benchmark -t set,lpush -n 100000 -q
# åªæµ‹è¯•æŸäº›æ“ä½œçš„æ€§èƒ½

redis-benchmark -n 100000 -q script load "redis.call('set','foo','bar')"
# åªæµ‹è¯•æŸäº›æ•°å€¼å­˜å–çš„æ€§èƒ½
```

---

### Memcached

**å®˜ç½‘**
- https://memcached.org/

**å®‰è£…**
- **è½¯ä»¶åŒ…å®‰è£…**
  ```bash
  yum -y install memcached
  cat /etc/sysconfig/memcached
  ```

- **æºä»£ç ç¼–è¯‘æ–¹å¼å®‰è£…**

  åœ¨å®˜ç½‘ä¸‹è½½ tar.gz çš„å®‰è£…åŒ…,æˆ–è€…é€šè¿‡ wget çš„æ–¹å¼ä¸‹è½½

  `wget http://memcached.org/latest`

  å®‰è£…
  ```bash
  tar -zxvf memcached-1.x.x.tar.gz
  cd memcached-1.x.x
  ./configure --prefix=/usr/local/memcached
  make && make test
  make install
  ```

**è¿è¡Œ**
```bash
systemctl start memcached
systemctl enable memcached

firewall-cmd --add-port=11211/tcp --permanent
firewall-cmd --reload
```

---

## å›¾å½¢
### Neo4j

**å®˜ç½‘**
- https://neo4j.com

**å®‰è£…**

ä¾èµ– jdk,å®‰è£…è¿‡ç¨‹è§ [JDK](#JDK)

ä¸‹è½½ neo4j,è¿™é‡Œä»¥ 2.3.9 ä¸ºä¾‹
```bash
tar -zvxf neo4j-community-2.3.9-unix.tar.gz
cd neo4j-community-2.3.9/conf
```
```vim
vim neo4j-server.properties

org.neo4j.server.webserver.address=0.0.0.0
```
```bash
cd ../bin
firewall-cmd --permanent --zone=public --add-port=7474/tcp
firewall-cmd --reload
./neo4j start
```
è®¿é—® 127.0.0.1:7474,åˆå§‹è´¦å·å¯†ç  neo4j,è¿›å»åä¼šè¦æ±‚ä½ ä¿®æ”¹å¯†ç 

---

# æ–‡ä»¶æœåŠ¡
## filebrowser

`ä¸€ä¸ªåœ¨çº¿ç½‘ç›˜æœåŠ¡,åªèƒ½åœ¨çº¿çœ‹å›¾ç‰‡,åœ¨çº¿çœ‹è§†é¢‘æ˜¯ä¸æ”¯æŒçš„ ^w^`

**é¡¹ç›®åœ°å€**
- https://github.com/filebrowser/filebrowser

**å®‰è£…**

`curl -fsSL https://filebrowser.xyz/get.sh | bash`

**ä½¿ç”¨**

filebrowser -a <ä½ è‡ªå·±çš„IP> -r <æ–‡ä»¶å¤¹è·¯å¾„>

é»˜è®¤è´¦å·å¯†ç  admin

---

## NFS

**æœåŠ¡ç«¯**

å®‰è£…
```bash
yum â€y install nfsâ€utils
```

ä¿®æ”¹é…ç½®æ–‡ä»¶
```vim
vimÂ /etc/exports
/publicÂ 192.168.xxx.xxx(ro)
```

å¯æœåŠ¡
```bash
mkdirÂ /public

viÂ /etc/selinux/config
	SELINUX=disabled

firewall-cmd --zone=public --add-service=rpc-bind --permanent
firewall-cmd --zone=public --add-service=mountd --permanent
firewall-cmd --zone=public --add-port=2049/tcp --permanent
firewall-cmd --zone=public --add-port=2049/udp --permanent
firewall-cmd --reload

service rpcbind start
service nfs start
```

**å®¢æˆ·ç«¯**

å®‰è£…,åˆ›å»ºç”¨æˆ·
```bash
yumÂ â€yÂ installÂ nfsâ€utils
mkdir /mnt/nfsfiles

useraddÂ nfsuser1
passwdÂ nfsuser1
```

éªŒè¯å…±äº«æ˜¯å¦æˆåŠŸ

`showmountÂ â€eÂ 192.168.xxx.xxx`

æŒ‚è½½å…±äº«ç›®å½•
```vim
vim /etc/fstab

192.168.xxx.xxx:/publicÂ /mnt/nfsfiles/	nfs defaultsÂ 0Â 0
```

`suÂ â€lÂ nfsuser1`

**éªŒè¯**

æœåŠ¡å™¨
```bash
[root@localhostÂ ~]#Â cdÂ /public/
[root@localhostÂ public]#Â echoÂ "hello"Â >Â hello.txt
```
å®¢æˆ·ç«¯
```bash
[nfsuser1@localhostÂ ~]$Â cdÂ /mnt/nfsfiles/
[nfsuser1@localhostÂ nfsfiles]$Â catÂ hello.txt
```

**æ›´å¤šé…ç½®æ¡ˆä¾‹**

è§ [nfs.md](./å®éªŒ/nfs.md)

---

## Samba

**å®˜ç½‘**
- https://www.samba.org

**æœåŠ¡ç«¯**

å®‰è£…

`yum install samba `

ä¿®æ”¹é…ç½®æ–‡ä»¶
```vim
vimÂ /etc/samba/smb.conf
[smbshare]
pathÂ =Â /smbshare	# å…±äº«ç›®å½•
publicÂ =Â yes
writeable=yes
hostsÂ allowÂ =Â 192.168.1xx.33/32	# å…è®¸ä¸»æœº
hosts deny = all
createÂ maskÂ =Â 0770	# åˆ›å»ºæ–‡ä»¶çš„æƒé™ä¸º 0770ï¼›
```

éªŒè¯é…ç½®æ–‡ä»¶æœ‰æ²¡æœ‰é”™è¯¯

`testparm`

**ç”¨æˆ·é…ç½®**
```bash
# æ·»åŠ ç”¨æˆ·,è®¾ç½®å¯†ç 
useraddÂ smb1
smbpasswdÂ â€aÂ smb1(å¯†ç ï¼šsmb123456)

# å°†ç”¨æˆ·æ·»åŠ åˆ°Â sambaÂ æœåŠ¡å™¨ä¸­,å¹¶è®¾ç½®å¯†ç 
pdbeditÂ â€aÂ smb1(å¯†ç ï¼šsmb123456)

# æŸ¥çœ‹Â sambaÂ æ•°æ®åº“ç”¨æˆ·
pdbeditÂ â€L
```

åˆ›å»ºå…±äº«ç›®å½•,è®¾ç½®æ‰€æœ‰è€…å’Œæ‰€å±ç»„
```bash
mkdirÂ /smbshare
chownÂ smb1:smb1Â /smbshare
```

å…³é—­Â selinux (éœ€è¦é‡å¯)
```vim
vimÂ /etc/selinux/config
SELINUX=disabled
```
```bash
firewall-cmd --zone=public --add-service=samba --permanent
firewall-cmd --reload

systemctlÂ restartÂ smb
```

**å®¢æˆ·ç«¯**
```bash
yum install samba

mkdirÂ /data/web_data
mount -t cifs -o username=smb1,password='smb123456' //192.168.xx+1.xx/webdata
/data/web_data
```

**æ›´å¤šé…ç½®æ¡ˆä¾‹**

è§ [Samba.md](./å®éªŒ/Samba.md)


---

## Vsftp

**å®˜ç½‘**
- https://security.appspot.com/vsftpd.html

**åŒ¿åè®¿é—®**

|å‚æ•°|ä½œç”¨|
| :------------- | :------------- |
|anonymous_enable=YES |	å…è®¸åŒ¿åè®¿é—®æ¨¡å¼ |
|anon_umask=022 |	åŒ¿åç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„umaskå€¼|
|anon_upload_enable=YES |	å…è®¸åŒ¿åç”¨æˆ·ä¸Šä¼ æ–‡ä»¶|
|anon_mkdir_write_enable=YES |	å…è®¸åŒ¿åç”¨æˆ·åˆ›å»ºç›®å½•|
|anon_other_write_enable=YES |	å…è®¸åŒ¿åç”¨æˆ·ä¿®æ”¹ç›®å½•åç§°æˆ–åˆ é™¤ç›®å½•|

```vim
vim /etc/vsftpd/vsftpd.conf

anonymous_enable=YES
anon_umask=022
anon_upload_enable=YES
anon_mkdir_write_enable=YES
anon_other_write_enable=YES
```
```bash
setenforce 0  # å…³é—­ selinux
firewall-cmd --permanent --zone=public --add-service=ftp
firewall-cmd --reload
systemctl restart vsftpd
systemctl enable vsftpd
```

ç°åœ¨å°±å¯ä»¥åœ¨å®¢æˆ·ç«¯æ‰§è¡Œ ftp å‘½ä»¤è¿æ¥åˆ°è¿œç¨‹çš„ FTP æœåŠ¡å™¨äº†.
åœ¨ vsftpd æœåŠ¡ç¨‹åºçš„åŒ¿åå¼€æ”¾è®¤è¯æ¨¡å¼ä¸‹,å…¶è´¦æˆ·ç»Ÿä¸€ä¸º anonymous,å¯†ç ä¸ºç©º.è€Œä¸”åœ¨è¿æ¥åˆ° FTP æœåŠ¡å™¨å,é»˜è®¤è®¿é—®çš„æ˜¯ /var/ftp ç›®å½•.
æˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ°è¯¥ç›®å½•ä¸‹çš„ pub ç›®å½•ä¸­,ç„¶åå°è¯•åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•æ–‡ä»¶,ä»¥æ£€éªŒæ˜¯å¦æ‹¥æœ‰å†™å…¥æƒé™ï¼š
```bash
[root@linuxprobe ~]# ftp 192.168.10.10
Connected to 192.168.10.10 (192.168.10.10).
220 (vsFTPd 3.0.2)
Name (192.168.10.10:root): anonymous
331 Please specify the password.
Password:æ­¤å¤„æ•²å‡»å›è½¦å³å¯
230 Login successful.
Remote system type is UNIX.
Using binary mode to transfer files.

ftp> cd pub
250 Directory successfully changed.

ftp> mkdir files
257 "/pub/files" created

ftp> rename files database
350 Ready for RNTO.
250 Rename successful.

ftp> rmdir database
250 Remove directory operation successful.

ftp> exit
221 Goodbye.
```

---

**æœ¬åœ°ç”¨æˆ·**

|å‚æ•° |	ä½œç”¨|
| :------------- | :------------- |
|anonymous_enable=NO 	|ç¦æ­¢åŒ¿åè®¿é—®æ¨¡å¼|
|local_enable=YES |	å…è®¸æœ¬åœ°ç”¨æˆ·æ¨¡å¼|
|write_enable=YES |	è®¾ç½®å¯å†™æƒé™|
|local_umask=022 |	æœ¬åœ°ç”¨æˆ·æ¨¡å¼åˆ›å»ºæ–‡ä»¶çš„umaskå€¼|
|userlist_deny=YES 	|å¯ç”¨"ç¦æ­¢ç”¨æˆ·åå•",åå•æ–‡ä»¶ä¸º ftpusers å’Œ user_list|
|userlist_enable=YES |	å¼€å¯ç”¨æˆ·ä½œç”¨åå•æ–‡ä»¶åŠŸèƒ½|

```vim
vim /etc/vsftpd/vsftpd.conf

anonymous_enable=NO
local_enable=YES
write_enable=YES
local_umask=022
```
```bash
setenforce 0  # å…³é—­ selinux
firewall-cmd --permanent --zone=public --add-service=ftp
firewall-cmd --reload
systemctl restart vsftpd
systemctl enable vsftpd
```
æŒ‰ç†æ¥è®²,ç°åœ¨å·²ç»å®Œå…¨å¯ä»¥æœ¬åœ°ç”¨æˆ·çš„èº«ä»½ç™»å½• FTP æœåŠ¡å™¨äº†.ä½†æ˜¯åœ¨ä½¿ç”¨ root ç®¡ç†å‘˜ç™»å½•å,ç³»ç»Ÿæç¤ºå¦‚ä¸‹çš„é”™è¯¯ä¿¡æ¯ï¼š
```bash
[root@linuxprobe ~]# ftp 192.168.10.10
Connected to 192.168.10.10 (192.168.10.10).
220 (vsFTPd 3.0.2)
Name (192.168.10.10:root): root
530 Permission denied.
Login failed.
ftp>
```
å¯è§,åœ¨æˆ‘ä»¬è¾“å…¥ root ç®¡ç†å‘˜çš„å¯†ç ä¹‹å‰,å°±å·²ç»è¢«ç³»ç»Ÿæ‹’ç»è®¿é—®äº†.è¿™æ˜¯å› ä¸º vsftpd æœåŠ¡ç¨‹åºæ‰€åœ¨çš„ç›®å½•ä¸­é»˜è®¤å­˜æ”¾ç€ä¸¤ä¸ªåä¸º"ç”¨æˆ·åå•"çš„æ–‡ä»¶ (ftpusers å’Œ user_list) .åªè¦é‡Œé¢å†™æœ‰æŸä½ç”¨æˆ·çš„åå­—,å°±ä¸å†å…è®¸è¿™ä½ç”¨æˆ·ç™»å½•åˆ° FTP æœåŠ¡å™¨ä¸Š.
```bash
[root@linuxprobe ~]# cat /etc/vsftpd/user_list

[root@linuxprobe ~]# cat /etc/vsftpd/ftpusers
```
å¦‚æœä½ ç¡®è®¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ root ç®¡ç†å‘˜ä¸ä¼šå¯¹ç³»ç»Ÿå®‰å…¨äº§ç”Ÿå½±å“,åªéœ€æŒ‰ç…§ä¸Šé¢çš„æç¤ºåˆ é™¤æ‰ root ç”¨æˆ·åå³å¯.æˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹© ftpusers å’Œ user_list æ–‡ä»¶ä¸­æ²¡æœ‰çš„ä¸€ä¸ªæ™®é€šç”¨æˆ·å°è¯•ç™»å½• FTP æœåŠ¡å™¨
åœ¨é‡‡ç”¨æœ¬åœ°ç”¨æˆ·æ¨¡å¼ç™»å½•FTPæœåŠ¡å™¨å,é»˜è®¤è®¿é—®çš„æ˜¯è¯¥ç”¨æˆ·çš„å®¶ç›®å½•,ä¹Ÿå°±æ˜¯è¯´,è®¿é—®çš„æ˜¯ /home/username ç›®å½•.è€Œä¸”è¯¥ç›®å½•çš„é»˜è®¤æ‰€æœ‰è€…ã€æ‰€å±ç»„éƒ½æ˜¯è¯¥ç”¨æˆ·è‡ªå·±,å› æ­¤ä¸å­˜åœ¨å†™å…¥æƒé™ä¸è¶³çš„æƒ…å†µ.

---

**è™šæ‹Ÿç”¨æˆ·**

å®‰è£…

`yum install vsftpd`

è®¤è¯

åˆ›å»ºè™šæ‹Ÿç”¨æˆ·æ–‡ä»¶,æŠŠè¿™äº›ç”¨æˆ·åå’Œå¯†ç å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­.è¯¥æ–‡ä»¶å†…å®¹æ ¼å¼æ˜¯ï¼šç”¨æˆ·åå ç”¨ä¸€è¡Œ,å¯†ç å ä¸€è¡Œ.

`cd /etc/vsftp`

```vim
vim login.list

Ftpuser1
123456
Ftpuser2
123456
Ftpadmin
123456
```

ä½¿ç”¨ db_load å‘½ä»¤ç”Ÿæˆ db å£ä»¤ login æ•°æ®åº“æ–‡ä»¶

`db_load -T -t hash -f login.list login.db`

é€šè¿‡ä¿®æ”¹æŒ‡å®šçš„é…ç½®æ–‡ä»¶,è°ƒæ•´å¯¹è¯¥ç¨‹åºçš„è®¤è¯æ–¹å¼
```vim
vim /etc/vsftpd/vsftpd.conf

pam_service_name=vsftpd.vu  # è®¾ç½® PAM ä½¿ç”¨çš„åç§°,è¯¥åç§°å°±æ˜¯ /etc/pam.d/ ç›®å½•ä¸‹ vsfptd æ–‡ä»¶çš„æ–‡ä»¶å
```
`cp /etc/pam.d/vsftpd /etc/pam.d/vsftpd.vu`
```vim
vim /etc/pam.d/vsftpd.vu

auth       required     pam_userdb.so db=/etc/vsftpd/login
account    required     pam_userdb.so db=/etc/vsftpd/login
# æ³¨æ„ï¼šæ ¼å¼æ˜¯ db=/etc/vsftpd/login è¿™æ ·çš„,ä¸€å®šä¸è¦å»æ‰æºæ–‡ä»¶çš„ .db åç¼€
```

é…ç½®æ–‡ä»¶
```vim
vim /etc/vsftpd/vsftpd.conf

anonymous_enable=NO
local_enable=YES
guest_enable=YES
guest_username=virtual
pam_service_name=vsftpd.vu
allow_writeable_chroot=YES
```

|å‚æ•° |	ä½œç”¨|
| :------------- | :------------- |
|anonymous_enable=NO 	|ç¦æ­¢åŒ¿åå¼€æ”¾æ¨¡å¼|
|local_enable=YES |	å…è®¸æœ¬åœ°ç”¨æˆ·æ¨¡å¼|
|guest_enable=YES |	å¼€å¯è™šæ‹Ÿç”¨æˆ·æ¨¡å¼|
|guest_username=virtual |	æŒ‡å®šè™šæ‹Ÿç”¨æˆ·è´¦æˆ·|
|pam_service_name=vsftpd.vu |	æŒ‡å®šPAMæ–‡ä»¶|
|allow_writeable_chroot=YES |	å…è®¸å¯¹ç¦é”¢çš„FTPæ ¹ç›®å½•æ‰§è¡Œå†™å…¥æ“ä½œ,è€Œä¸”ä¸æ‹’ç»ç”¨æˆ·çš„ç™»å½•è¯·æ±‚|

ç”¨æˆ·é…ç½®æƒé™æ–‡ä»¶
æ‰€æœ‰ç”¨æˆ·ä¸»ç›®å½•ä¸º /home/ftp å®¿ä¸»ä¸º virtual ç”¨æˆ·ï¼›
```bash
useradd -d /home/ftp -s /sbin/nologin virtual
chmod -Rf 755 /home/ftp/
cd /home/ftp/
touch testfile
```
```vim
vim /etc/vsftpd/vsftpd.conf

guest_enable=YES      # è¡¨ç¤ºæ˜¯å¦å¼€å¯ vsftpd è™šæ‹Ÿç”¨æˆ·çš„åŠŸèƒ½,yes è¡¨ç¤ºå¼€å¯,no è¡¨ç¤ºä¸å¼€å¯.
guest_username=virtual       # æŒ‡å®šè™šæ‹Ÿç”¨æˆ·çš„å®¿ä¸»ç”¨æˆ·
user_config_dir=/etc/vsftpd/user_conf     # è®¾å®šè™šæ‹Ÿç”¨æˆ·ä¸ªäºº vsftpd æœåŠ¡æ–‡ä»¶å­˜æ”¾è·¯å¾„
allow_writeable_chroot=YES
```

ç¼–è¾‘ç”¨æˆ·æƒé™é…ç½®æ–‡ä»¶
```vim
vim Ftpadmin  # åˆ›å»º Ftpadmin è¿™ä¸ªç”¨æˆ·çš„é…ç½®æ–‡ä»¶

anon_upload_enable=YES
anon_mkdir_wirte_enable=YES
anon_other_wirte_enable=YES
anon_umask=022


# è¦æ±‚è™šæ‹Ÿç”¨æˆ·å…·æœ‰å†™æƒé™ (ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ã€é‡å‘½å)

# umask = 022 æ—¶,æ–°å»ºçš„ç›®å½• æƒé™æ˜¯755,æ–‡ä»¶çš„æƒé™æ˜¯ 644
# umask = 077 æ—¶,æ–°å»ºçš„ç›®å½• æƒé™æ˜¯700,æ–‡ä»¶çš„æƒé™æ—¶ 600
# vsftpdçš„local_umaskå’Œanon_umaskå€Ÿé‰´äº†å®ƒ
# é»˜è®¤æƒ…å†µä¸‹vsftpä¸Šä¼ ä¹‹åæ–‡ä»¶çš„æƒé™æ˜¯600,ç›®å½•æƒé™æ˜¯700
# æƒ³è¦ä¿®æ”¹ä¸Šä¼ ä¹‹åæ–‡ä»¶çš„æƒé™,æœ‰ä¸¤ç§æƒ…å†µ
# å¦‚æœä½¿ç”¨vsftpçš„æ˜¯æœ¬åœ°ç”¨æˆ·
# åˆ™è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ local_umask çš„å€¼
# å¦‚æœä½¿ç”¨vsftpçš„æ˜¯è™šæ‹Ÿç”¨æˆ·
# åˆ™è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ anon_umask çš„å€¼
```

**å¯æœåŠ¡**
```bash
setenforce 0  # å…³é—­ selinux
firewall-cmd --zone=public --add-service=ftp
firewall-cmd --reload
systemctl restart vsftpd
systemctl enable vsftpd
```

**Reference**
- [ç¬¬11ç«  ä½¿ç”¨VsftpdæœåŠ¡ä¼ è¾“æ–‡ä»¶.](https://www.linuxprobe.com/chapter-11.html)

**æ›´å¤šé…ç½®æ¡ˆä¾‹**

è§ [Vsftp.md](./å®éªŒ/Vsftp.md)

---

# ç¼–ç¨‹è¯­è¨€
## C

```c
vim world.c

#include <stdio.h>
int main(void){
				printf("Hello World");
				return 0;
}
```
```bash
gcc helloworld.c -o execFile
./execFlie
```

---

## Go

**å®˜ç½‘**
- https://golang.org/

**å®‰è£…**

è®¿é—® https://golang.org/dl/ ä¸‹è½½æœ€æ–°ç‰ˆæœ¬åŒ…,è¿™é‡Œä»¥ `go1.13.linux-amd64.tar.gz` ä¸ºä¾‹

```bash
tar -C /usr/local -xzf go1.13.linux-amd64.tar.gz

export PATH=$PATH:/usr/local/go/bin
export GOROOT=/usr/local/go
export GOPATH=$HOME/Applications/Go
source ~/.bash_profile
# $GOPATH å¯ä»¥åŒ…å«å¤šä¸ªå·¥ä½œç›®å½•,å–å†³äºä½ çš„ä¸ªäººæƒ…å†µ.å¦‚æœä½ è®¾ç½®äº†å¤šä¸ªå·¥ä½œç›®å½•,é‚£ä¹ˆå½“ä½ åœ¨ä¹‹åä½¿ç”¨ go get (è¿œç¨‹åŒ…å®‰è£…å‘½ä»¤) æ—¶è¿œç¨‹åŒ…å°†ä¼šè¢«å®‰è£…åœ¨ç¬¬ä¸€ä¸ªç›®å½•ä¸‹.
go version
```

**Test your installation**
```bash
mkdir -p $HOME/Applications/Go
cd $HOME/Applications/Go
```
```vim
vim hello.go


package main

import "fmt"

func main() {
	fmt.Printf("hello, world\n")
}
```
```bash
go build
./hello
```

---

## JDK

**rpm åŒ…æ–¹å¼å®‰è£…**

ä¸‹è½½
https://www.oracle.com/technetwork/java/javase/downloads/
```bash
chmod +x jdk-****.rpm
yum localinstall jdk-****.rpm
ä¹Ÿå¯ä»¥
rpm -ivh jdk-****.rpm
```

**ä½¿ç”¨ ppa/æºæ–¹å¼å®‰è£…**
1. æ·»åŠ  ppa

    `sudo add-apt-repository ppa:webupd8team/java`

    `sudo apt-get update`

2. å®‰è£… oracle-java-installer

	jdk7

	`sudo apt-get install oracle-java7-installer`

	jdk8

	`sudo apt-get install oracle-java8-installer`

**ç¼–è¯‘å®‰è£…**

è‡ªè¡Œä¸‹è½½ [oracle jdk](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)

è¿™é‡Œä»¥ `jdk-8u212-linux-x64.tar.gz` ä¸¾ä¾‹

```bash
bash
tar -xzvf jdk-8u212-linux-x64.tar.gz
mv jdk1.8.0_212/ /usr/local/lib/jvm/
cd /usr/local/lib/
mv jvm jdk
mv jdk jdk1.8
export JAVA_HOME=/usr/local/lib/jdk1.8/

export JRE_HOME=JAVAHOME/jreexportCLASSPATH=.:{JAVA_HOME}/lib:JREHOME/libexportPATH={JAVA_HOME}/bin:$PATH
update-alternatives --install /usr/bin/java java /usr/local/lib/jdk1.8/bin/java 1
update-alternatives --install /usr/bin/javac javac /usr/local/lib/jdk1.8/bin/javac 1

update-alternatives --set java /usr/local/lib/jdk1.8/bin/java

update-alternatives --set javac /usr/local/lib/jdk1.8/bin/javac
```

**æµ‹è¯•**
```bash
java
javac
```

---

## Python3

**å®˜ç½‘**
- https://www.python.org/

**yum å®‰è£…**
```bash
yum install epel-release
æˆ–
wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
yum -y install python36 python36-devel

wget https://bootstrap.pypa.io/get-pip.py	# å®‰è£…pip3
python3 get-pip.py
```

**æºä»£ç ç¼–è¯‘æ–¹å¼å®‰è£…**

å®‰è£…ä¾èµ–ç¯å¢ƒ
```bash
yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel
```

ä¸‹è½½Python3

`wget https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tgz`

å®‰è£…python3
```bash
mkdir -p /usr/local/python3
tar zxvf Python-3.6.1.tgz
cd Python-3.6.1
./configure --prefix=/usr/local/python3
make
make install æˆ–è€… make && make install
```

æ·»åŠ åˆ°ç¯å¢ƒå˜é‡
```bash
ln -s /usr/local/python3/bin/python3 /usr/bin/python3
```
```vim
vim ~/.bash_profile # æ°¸ä¹…ä¿®æ”¹å˜é‡

PATH=$PATH:/usr/local/python3/bin/
```
`source ~/.bash_profile`

æ£€æŸ¥ Python3 åŠ pip3 æ˜¯å¦æ­£å¸¸å¯ç”¨
```bash
python3 -V
pip3 -V
```

**åŠ é€Ÿ**
- [pip](../../Plan/Misc-Plan.md#pip)

---

## Ruby

**å®˜ç½‘**
- https://www.ruby-lang.org

**å®‰è£…**

æ³¨:åœ¨ Ubuntu ä¸‹æœ‰ç‚¹é—®é¢˜,ä¸å»ºè®®ç”¨ Ubuntu åšè¿ç»´ç¯å¢ƒ
ä¸‹è½½ ruby å®‰è£…åŒ…,å¹¶è¿›è¡Œç¼–è¯‘å®‰è£…
```bash
wget https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.2.tar.gz
tar xvfvz ruby-2.6.2.tar.gz
cd ruby-2.6.2
./configure
make
make install
```

å°† ruby æ·»åŠ åˆ°ç¯å¢ƒå˜é‡,ruby å®‰è£…åœ¨/usr/local/bin/ç›®å½•ä¸‹,å› æ­¤ç¼–è¾‘ ~/.bash_profileæ–‡ä»¶,æ·»åŠ ä¸€ä¸‹å†…å®¹:
```bash
vim ~/.bash_profile

export PATH=$PATH:/usr/local/bin/
```
`source ~/.bash_profile` ä¸è¦å¿˜äº†ç”Ÿæ•ˆä¸€ä¸‹

---

# ç³»ç»Ÿç›‘ç®¡
## BaoTa

**å®˜ç½‘**
- https://www.bt.cn/
- https://github.com/aaPanel/BaoTa

**å®‰è£…**
- **Centos**

  `yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh`

- **Ubuntu/Debian**

  `wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh`

**ä½¿ç”¨**

- web: å®‰è£…å®Œåä¼šéšæœºç”Ÿæˆ8ä½çš„ç®¡ç†è·¯å¾„,è´¦å·å’Œå¯†ç ,è®¿é—®å³å¯

- shell: ä½¿ç”¨ `bt` å‘½ä»¤

---

## Jenkins

**å®˜ç½‘**
- https://jenkins.io/

`æ³¨,Jenkins éœ€è¦ jdk ç¯å¢ƒ,è¯·å…ˆè¡Œå®‰è£…`

**rpm åŒ…æ–¹å¼å®‰è£…**

æ·»åŠ  Jenkins æº:
```bash
sudo wget -O /etc/yum.repos.d/jenkins.repo http://jenkins-ci.org/redhat/jenkins.repo
sudo rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key
```

ä½¿ç”¨ yum å‘½ä»¤å®‰è£… Jenkins:

`yum install jenkins`

**ä½¿ç”¨ ppa/æºæ–¹å¼å®‰è£…**
```bash
wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -

sed -i "1ideb https://pkg.jenkins.io/debian binary/" /etc/apt/sources.list

sudo apt-get update
sudo apt-get install jenkins
```

å®‰è£…åé»˜è®¤æœåŠ¡æ˜¯å¯åŠ¨çš„,é»˜è®¤æ˜¯ 8080 ç«¯å£,åœ¨æµè§ˆå™¨è¾“å…¥:http://127.0.0.1:8080/å³å¯æ‰“å¼€ä¸»é¡µ

æŸ¥çœ‹å¯†ç 

`cat /var/lib/jenkins/secrets/initialAdminPassword`

---

## Jumpserver

**å®˜ç½‘**
- http://www.jumpserver.org/

**å®‰è£…**

[å®˜æ–¹æ–‡æ¡£](http://docs.jumpserver.org/zh/docs/setup_by_centos.html) å†™çš„å¾ˆè¯¦ç»†äº†,åœ¨æ­¤æˆ‘åªè®°å½•é‡ç‚¹

`æ³¨:é‰´äºå›½å†…ç¯å¢ƒ,ä¸‹é¢æ­¥éª¤è¿è¡Œä¸­è¿˜æ˜¯ä¼šå‡ºç° docker pull é•œåƒè¶…æ—¶çš„é—®é¢˜,ä½ æ‡‚çš„,ä¸è¦é—®æˆ‘æ€ä¹ˆè§£å†³`

```bash
echo -e "\033[31m 1. é˜²ç«å¢™ Selinux è®¾ç½® \033[0m" \
  && if [ "$(systemctl status firewalld | grep running)" != "" ]; then firewall-cmd --zone=public --add-port=80/tcp --permanent; firewall-cmd --zone=public --add-port=2222/tcp --permanent; firewall-cmd --permanent --add-rich-rule="rule family="ipv4" source address="172.17.0.0/16" port protocol="tcp" port="8080" accept"; firewall-cmd --reload; fi \
  && if [ "$(getenforce)" != "Disabled" ]; then setsebool -P httpd_can_network_connect 1; fi
```
```bash
echo -e "\033[31m 2. éƒ¨ç½²ç¯å¢ƒ \033[0m" \
  && yum update -y \
  && ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \
  && yum -y install kde-l10n-Chinese \
  && localedef -c -f UTF-8 -i zh_CN zh_CN.UTF-8 \
  && export LC_ALL=zh_CN.UTF-8 \
  && echo 'LANG="zh_CN.UTF-8"' > /etc/locale.conf \
  && yum -y install wget gcc epel-release git \
  && yum install -y yum-utils device-mapper-persistent-data lvm2 \
  && yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo \
  && yum makecache fast \
  && rpm --import https://mirrors.aliyun.com/docker-ce/linux/centos/gpg \
  && echo -e "[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/\$releasever/\$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key" > /etc/yum.repos.d/nginx.repo \
  && rpm --import https://nginx.org/keys/nginx_signing.key \
  && yum -y install redis mariadb mariadb-devel mariadb-server nginx docker-ce \
  && systemctl enable redis mariadb nginx docker \
  && systemctl start redis mariadb \
  && yum -y install python36 python36-devel \
  && python3.6 -m venv /opt/py3
```
```bash
echo -e "\033[31m 3. ä¸‹è½½ç»„ä»¶ \033[0m" \
  && cd /opt \
  && if [ ! -d "/opt/jumpserver" ]; then git clone --depth=1 https://github.com/jumpserver/jumpserver.git; fi \
  && if [ ! -f "/opt/luna.tar.gz" ]; then wget https://demo.jumpserver.org/download/luna/1.4.9/luna.tar.gz; tar xf luna.tar.gz; chown -R root:root luna; fi \
  && yum -y install $(cat /opt/jumpserver/requirements/rpm_requirements.txt) \
  && source /opt/py3/bin/activate \
  && pip install --upgrade pip setuptools -i https://mirrors.aliyun.com/pypi/simple/ \
  && pip install -r /opt/jumpserver/requirements/requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ \
  && curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io \
  && systemctl restart docker \
  && docker pull jumpserver/jms_coco:1.4.9 \
  && docker pull jumpserver/jms_guacamole:1.4.9 \
  && rm -rf /etc/nginx/conf.d/default.conf \
  && curl -o /etc/nginx/conf.d/jumpserver.conf https://demo.jumpserver.org/download/nginx/conf.d/jumpserver.conf
```
```bash
echo -e "\033[31m 4. å¤„ç†é…ç½®æ–‡ä»¶ \033[0m" \
  && if [ "$DB_PASSWORD" = "" ]; then DB_PASSWORD=`cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 24`; fi \
  && if [ "$SECRET_KEY" = "" ]; then SECRET_KEY=`cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 50`; echo "SECRET_KEY=$SECRET_KEY" >> ~/.bashrc; fi \
  && if [ "$BOOTSTRAP_TOKEN" = "" ]; then BOOTSTRAP_TOKEN=`cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 16`; echo "BOOTSTRAP_TOKEN=$BOOTSTRAP_TOKEN" >> ~/.bashrc; fi \
  && if [ "$Server_IP" = "" ]; then Server_IP=`ip addr | grep inet | egrep -v '(127.0.0.1|inet6|docker)' | awk '{print $2}' | tr -d "addr:" | head -n 1 | cut -d / -f1`; fi \
  && if [ ! -d "/var/lib/mysql/jumpserver" ]; then mysql -uroot -e "create database jumpserver default charset 'utf8';grant all on jumpserver.* to 'jumpserver'@'127.0.0.1' identified by '$DB_PASSWORD';flush privileges;"; fi \
  && if [ ! -f "/opt/jumpserver/config.yml" ]; then cp /opt/jumpserver/config_example.yml /opt/jumpserver/config.yml; sed -i "s/SECRET_KEY:/SECRET_KEY: $SECRET_KEY/g" /opt/jumpserver/config.yml; sed -i "s/BOOTSTRAP_TOKEN:/BOOTSTRAP_TOKEN: $BOOTSTRAP_TOKEN/g" /opt/jumpserver/config.yml; sed -i "s/# DEBUG: true/DEBUG: false/g" /opt/jumpserver/config.yml; sed -i "s/# LOG_LEVEL: DEBUG/LOG_LEVEL: ERROR/g" /opt/jumpserver/config.yml; sed -i "s/# SESSION_EXPIRE_AT_BROWSER_CLOSE: false/SESSION_EXPIRE_AT_BROWSER_CLOSE: true/g" /opt/jumpserver/config.yml; sed -i "s/DB_PASSWORD: /DB_PASSWORD: $DB_PASSWORD/g" /opt/jumpserver/config.yml; fi
```
```bash
echo -e "\033[31m 5. å¯åŠ¨ Jumpserver \033[0m" \
  && systemctl start nginx \
  && cd /opt/jumpserver \
  && ./jms start all -d \
  && docker run --name jms_coco -d -p 2222:2222 -p 5000:5000 -e CORE_HOST=http://$Server_IP:8080 -e BOOTSTRAP_TOKEN=$BOOTSTRAP_TOKEN jumpserver/jms_coco:1.4.9 \
  && docker run --name jms_guacamole -d -p 8081:8081 -e JUMPSERVER_SERVER=http://$Server_IP:8080 -e BOOTSTRAP_TOKEN=$BOOTSTRAP_TOKEN jumpserver/jms_guacamole:1.4.9 \
  && echo -e "\033[31m ä½ çš„æ•°æ®åº“å¯†ç æ˜¯ $DB_PASSWORD \033[0m" \
  && echo -e "\033[31m ä½ çš„SECRET_KEYæ˜¯ $SECRET_KEY \033[0m" \
  && echo -e "\033[31m ä½ çš„BOOTSTRAP_TOKENæ˜¯ $BOOTSTRAP_TOKEN \033[0m" \
  && echo -e "\033[31m ä½ çš„æœåŠ¡å™¨IPæ˜¯ $Server_IP \033[0m" \
  && echo -e "\033[31m è¯·æ‰“å¼€æµè§ˆå™¨è®¿é—® http://$Server_IP ç”¨æˆ·å:admin å¯†ç :admin \033[0m"
```

---

## Loganalyzer

**å®‰è£…**

è¿™é‡Œä»¥ LAMP ç¯å¢ƒä¸ºä¾‹
```bash
yum -y install httpd mariadb mariadb-server php php-mysql mysql-devel
systemctl start mariadb
systemctl restart httpd
firewall-cmd --zone=public --add-service=http --permanent
firewall-cmd --reload
```
```vim
vim /etc/httpd/conf/httpd.conf

<IfModule dir_module>
    DirectoryIndex index.php index.html
</IfModule>
```
```bash
yum -y install rsyslog-mysql
cd /usr/share/doc/rsyslog-8.24.0/
mysql -uroot -p < mysql-createDB.sql

systemctl restart rsyslog

mysql -uroot -p
GRANT ALL ON Syslog.* TO 'Syslog'@'localhost' identified BY 'Syslog';
FLUSH PRIVILEGES;
```

`æ³¨:è¿™é‡Œæ•°æ®åº“è´¦å·çš„å¯†ç è‡ªå·±æ”¹ä¸€ä¸‹`

```vim
vim /etc/rsyslog.conf

$ModLoad immark

$ModLoad imudp
$UDPServerRun 514

$ModLoad imtcp

$ModLoad ommysql
*.* :ommysql:localhost,Syslog,rsyslog,Syslog
```

`æ³¨:åŒæ ·,è¿™é‡Œæ•°æ®åº“è´¦å·é“¾æ¥çš„å¯†ç è‡ªå·±ä¹Ÿè®°å¾—æ”¹ä¸€ä¸‹`

```bash
wget -c http://download.adiscon.com/loganalyzer/loganalyzer-4.1.7.tar.gz
tar xf loganalyzer-4.1.7.tar.gz -C /tmp/
cd /tmp/loganalyzer-4.1.7/

# !!æ³¨: æˆ‘è¿™é‡Œæœ‰ä¸ªåˆ é™¤ /var/www/html/ ä¸‹æ–‡ä»¶çš„æ“ä½œ,çœ‹æ¸…æ¥šå†æ‰§è¡Œ!!
rm -rf /var/www/html/*
cp -a src/* /var/www/html/
cp -a contrib/* /var/www/html/
chmod +x /var/www/html/*.sh
cd /var/www/html
./configure.sh
```

```bash
echo 1 > /var/log/syslog
```

ç„¶åè®¿é—® 127.0.0.1 å³å¯çœ‹åˆ°åˆå§‹åŒ–å®‰è£…ç•Œé¢,åœ¨ step3 è®°å¾—é€‰æ‹© `Enable User Database`

- Database Host:localhost
- Database Port:3306
- Database Name:Syslog
- Table prefix:logcon_
- Database User:Syslog
- Database Password:Syslog  `æ³¨: å¯†ç è‡ªå·±è®°å¾—æ”¹`

---

## Supervisor

**å®˜ç½‘**
- http://supervisord.org/

**å®‰è£…**

å› ä¸º Supervisor æ˜¯ Python å¼€å‘çš„,å®‰è£…å‰å…ˆæ£€æŸ¥ä¸€ä¸‹ç³»ç»Ÿå¦å®‰è£…äº† Python2.4 ä»¥ä¸Šç‰ˆæœ¬.

`pip install supervisor`

å®‰è£…å®Œæˆå,æˆ‘ä»¬ä½¿ç”¨ echo_supervisord_conf å‘½ä»¤åˆ›å»ºä¸€ä¸ª Supervisor é…ç½®æ–‡ä»¶

`echo_supervisord_conf > /etc/supervisord.conf`

**é…ç½®**

æ¥ç€åœ¨ /etc/supervisord.conf æ–‡ä»¶æœ€ä¸‹æ–¹åŠ å…¥ç›®æ ‡ç¨‹åºçš„å¯åŠ¨é¡¹ç›®
```conf
vim /etc/supervisord.conf

; [program:xx]æ˜¯è¢«ç®¡ç†çš„è¿›ç¨‹é…ç½®å‚æ•°,xxæ˜¯è¿›ç¨‹çš„åç§°
[program:xx]
command=/opt/apache-tomcat-8.0.35/bin/catalina.sh run  ; ç¨‹åºå¯åŠ¨å‘½ä»¤
autostart=true       ; åœ¨ supervisord å¯åŠ¨çš„æ—¶å€™ä¹Ÿè‡ªåŠ¨å¯åŠ¨
startsecs=10         ; å¯åŠ¨10ç§’åæ²¡æœ‰å¼‚å¸¸é€€å‡º,å°±è¡¨ç¤ºè¿›ç¨‹æ­£å¸¸å¯åŠ¨äº†,é»˜è®¤ä¸º1ç§’
autorestart=true     ; ç¨‹åºé€€å‡ºåè‡ªåŠ¨é‡å¯,å¯é€‰å€¼ï¼š[unexpected,true,false],é»˜è®¤ä¸º unexpected,è¡¨ç¤ºè¿›ç¨‹æ„å¤–æ€æ­»åæ‰é‡å¯
startretries=3       ; å¯åŠ¨å¤±è´¥è‡ªåŠ¨é‡è¯•æ¬¡æ•°,é»˜è®¤æ˜¯3
user=tomcat          ; ç”¨å“ªä¸ªç”¨æˆ·å¯åŠ¨è¿›ç¨‹,é»˜è®¤æ˜¯root
priority=999         ; è¿›ç¨‹å¯åŠ¨ä¼˜å…ˆçº§,é»˜è®¤999,å€¼å°çš„ä¼˜å…ˆå¯åŠ¨
redirect_stderr=true ; æŠŠ stderr é‡å®šå‘åˆ° stdout,é»˜è®¤ false
stdout_logfile_maxbytes=20MB  ; stdout æ—¥å¿—æ–‡ä»¶å¤§å°,é»˜è®¤ 50MB s
tdout_logfile_backups = 20   ; stdout æ—¥å¿—æ–‡ä»¶å¤‡ä»½æ•°,é»˜è®¤æ˜¯10
; stdout æ—¥å¿—æ–‡ä»¶,éœ€è¦æ³¨æ„å½“æŒ‡å®šç›®å½•ä¸å­˜åœ¨æ—¶æ— æ³•æ­£å¸¸å¯åŠ¨,æ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆ›å»ºç›®å½• (supervisord ä¼šè‡ªåŠ¨åˆ›å»ºæ—¥å¿—æ–‡ä»¶) 
stdout_logfile=/opt/apache-tomcat-8.0.35/logs/catalina.out
stopasgroup=false     ;é»˜è®¤ä¸º false,è¿›ç¨‹è¢«æ€æ­»æ—¶,æ˜¯å¦å‘è¿™ä¸ªè¿›ç¨‹ç»„å‘é€ stop ä¿¡å·,åŒ…æ‹¬å­è¿›ç¨‹
killasgroup=false     ;é»˜è®¤ä¸º false,å‘è¿›ç¨‹ç»„å‘é€ kill ä¿¡å·,åŒ…æ‹¬å­è¿›ç¨‹
```

æ³¨æ„ä¿®æ”¹ user = tomcat

æ¥ç€ç›´æ¥è¿è¡Œ Supervisor å³å¯è®©ç›®æ ‡ç¨‹åºä¿æŒåå°è¿è¡Œ,è¿è¡ŒæœåŠ¡æ—¶,éœ€è¦æŒ‡å®š supervisor é…ç½®æ–‡ä»¶

`supervisord -c /etc/supervisord.conf`

```bash
supervisorctl status
supervisorctl stop tomcat
supervisorctl start tomcat
supervisorctl restart tomcat
supervisorctl reread
supervisorctl update
```

**Reference**
- [Supervisor å®‰è£…ä¸é…ç½® (Linux/Unix è¿›ç¨‹ç®¡ç†å·¥å…·) ](https://blog.csdn.net/xyang81/article/details/51555473)

---

## Webmin

**å®˜ç½‘**
- http://www.webmin.com/index.html

**å®‰è£…**

åœ¨å®˜ç½‘ä¸‹è½½ RPM åŒ…,ä¸Šä¼ è‡³æœåŠ¡å™¨,è¿™é‡Œä»¥ 1.930-1 ä¸ºä¾‹
```bash
yum -y install perl-Net-SSLeay
yum -y install perl-Encode-Detect
yum -y install perl-Data-Dumper
rpm -Uvh webmin-1.930-1.noarch.rpm

firewall-cmd --permanent --zone=public --add-port=10000/tcp
firewall-cmd --reload
```
å®‰è£…å®Œç›´æ¥å¯åŠ¨,è®¿é—® https://127.0.0.1:10000 æ³¨æ„,å¸¦ HTTPS

é»˜è®¤è´¦å· root,å¯†ç ä¸æœåŠ¡å™¨ä¸€è‡´

**ä¿®æ”¹å¯†ç **

```bash
/usr/libexec/webmin/changepass.pl /etc/webmin/ root 1234qwer
```

---

## Zabbix

**å®˜ç½‘**
- https://www.zabbix.com/

**å®‰è£…ä¾èµ–**
```bash
yum install mysql
yum install httpd
yum install php
yum install php-mysqlnd php-gd libjpeg* php-snmp php-ldap php-odbc php-pear php-xml php-xmlrpc php-mbstring php-bcmath php-mhash php-common php-ctype php-xml php-xmlreader php-xmlwriter php-session php-mbstring php-gettext php-ldap php-mysqli --skip-broken
yum install wget telnet net-tools python-paramiko gcc gcc-c++ dejavu-sans-fonts python-setuptools python-devel sendmail mailx net-snmp net-snmp-devel net-snmp-utils freetype-devel libpng-devel perl unbound libtasn1-devel p11-kit-devel OpenIPMI unixODBC
```

**è®¾ç½® mysql**
```vim
vim /etc/my.cnf

innodb_file_per_table = 1
innodb_status_file = 1
innodb_buffer_pool_size = 6G
innodb_flush_log_at_trx_commit = 2
innodb_log_buffer_size = 16M
innodb_log_file_size = 64M
innodb_support_xa = 0
default-storage-engine = innodb
bulk_insert_buffer_size = 8M
join_buffer_size = 16M
max_heap_table_size = 32M
tmp_table_size = 32M
max_tmp_tables = 48
read_buffer_size = 32M
read_rnd_buffer_size = 16M
key_buffer_size = 32M
thread_cache_size = 32
innodb_thread_concurrency = 8
innodb_flush_method = O_DIRECT
innodb_rollback_on_timeout = 1
query_cache_size = 16M
query_cache_limit = 16M
collation_server = utf8_bin
character_set_server = utf8
```
åŸåˆ™ä¸Š innodb_buffer_pool_size éœ€è¦è®¾ç½®ä¸ºä¸»æœºå†…å­˜çš„ 80%,å¦‚æœä¸»æœºå†…å­˜ä¸æ˜¯ 8GB,ä»¥ä¸Šå‚æ•°å¯ä¾æ®ç›¸åº”æ¯”ä¾‹è¿›è¡Œè°ƒæ•´,ä¾‹å¦‚ä¸»æœºå†…å­˜ä¸º 16GB,åˆ™ innodb_buffer_pool_size å»ºè®®è®¾ç½®ä¸º 12GB,innodb_log_buffer_size å»ºè®®è®¾ç½®ä¸º 32M,innodb_log_file_size å»ºè®®è®¾ç½®ä¸º 128M,ä»¥æ­¤ç±»æ¨.è¯·æ³¨æ„ innodb_buffer_pool_size çš„å€¼å¿…é¡»æ˜¯æ•´æ•°,ä¾‹å¦‚ä¸»æœºå†…å­˜æ˜¯4G,é‚£ä¹ˆ innodb_buffer_pool_size å¯ä»¥è®¾ç½®ä¸º 3G,è€Œä¸èƒ½è®¾ç½®ä¸º 3.2G
```bash
systemctl enable mysqld && systemctl start mysqld
grep 'temporary password' /var/log/mysqld.log # è·å– MySQL çš„ root åˆå§‹å¯†ç 
mysql_secure_installation # åˆå§‹åŒ–,æ”¹ä¸‹å¯†ç 
systemctl restart mysqld
mysql -u root -p
  create database zabbix character set utf8;
  exit;
mysql_upgrade -u root -p
mysql -u root -p
  create user zabbix@'%' identified by '{mysql_zabbix_password}';
  grant all privileges on zabbix.* to zabbix@'%';
  flush privileges;
  exit;
```

**å®‰è£… zabbix**
```bash
rpm -ivh https://repo.zabbix.com/zabbix/4.2/rhel/7/x86_64/zabbix-release-4.2-1.el7.noarch.rpm
yum -y install zabbix-server-mysql zabbix-web-mysql zabbix-java-gateway zabbix-web
cd /usr/share/doc/zabbix-server-mysql-4.2.1
zcat create.sql.gz | mysql -uroot zabbix -p
```

- é…ç½® zabbix å‚æ•°
  ```vim
  vim /etc/zabbix/zabbix_server.conf

  DBPassword={mysql_zabbix_password}
  CacheSize=512M
  HistoryCacheSize=128M
  HistoryIndexCacheSize=128M
  TrendCacheSize=128M
  ValueCacheSize=256M
  Timeout=30
  ```
  å¦‚æœéœ€è¦ç›‘æ§ VMware è™šæ‹Ÿæœº,åˆ™è¿˜éœ€è¦è®¾ç½®ä»¥ä¸‹é€‰é¡¹å‚æ•°ï¼š
  ```vim
  StartVMwareCollectors=2
  VMwareCacheSize=256M
  VMwareTimeout=300
  ```

**é…ç½® Apache ä¸­çš„ PHP å‚æ•°**
```vim
vim /etc/httpd/conf.d/zabbix.conf

php_value max_execution_time 600
php_value memory_limit 256M
php_value post_max_size 32M
php_value upload_max_filesize 32M
php_value max_input_time 600
php_value always_populate_raw_post_data -1
date.timezone Asia/Shanghai
```

**é…ç½® PHP å‚æ•°**
```vim
vim /etc/php.ini

php_value post_max_size 32M
max_execution_time 300
max_input_time 300
date.timezone Asia/Shanghai
```

**é‡å¯&èµ·æœåŠ¡**
```bash
systemctl stop mysqld && reboot
systemctl start httpd && systemctl start zabbix-server
systemctl stop firewalld
setenforce 0  # å…³é—­ selinux
```
è®¿é—® `http://{ipåœ°å€}/zabbix/setup.php`

**Reference**
- [CentOS 7å®‰è£…Zabbix 3.4](https://www.centos.bz/2017/11/centos-7%E5%AE%89%E8%A3%85zabbix-3-4/)

---

# è™šæ‹ŸåŒ–
## Docker

**å®˜ç½‘**
- https://www.docker.com

**å®‰è£…**

- **centos ä¸‹å®‰è£…**
  ```bash
  yum install -y yum-utils device-mapper-persistent-data lvm2
  wget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo
  sed -i 's+download.docker.com+mirrors.tuna.tsinghua.edu.cn/docker-ce+' /etc/yum.repos.d/docker-ce.repo
  yum makecache fast
  yum install -y docker
  ```

- **debian ä¸‹å®‰è£…**
  ```bash
  sudo apt update
  sudo apt install docker.io
  docker login	# è®²é“ç†,æŒ‰å®˜æ–¹æ–‡æ¡£è¯´æ³•å¹¶ä¸éœ€è¦è´¦æˆ·å¹¶ä¸”ç™»å½•,ä½†æœ‰æ—¶å€™è¿˜æ˜¯éœ€è¦ä½ ç™»é™†
  ```

- **å®˜æ–¹ä¸€æ¡å‘½ä»¤å®‰è£…**

  `curl -sSL https://get.docker.com/ | sh`

**ä½¿ç”¨**

é»˜è®¤æƒ…å†µä¸‹,åªæœ‰ç®¡ç†å‘˜æƒé™èƒ½å¤Ÿè¿è¡Œ docker å‘½ä»¤.è€ƒè™‘åˆ°å®‰å…¨é—®é¢˜,ä½ ä¸ä¼šæƒ³ç”¨ root ç”¨æˆ·æˆ–ä½¿ç”¨ sudo æ¥è¿è¡Œ Docker çš„.è¦è§£å†³è¿™ä¸ªé—®é¢˜,ä½ éœ€è¦å°†è‡ªå·±çš„ç”¨æˆ·åŠ å…¥åˆ° docker ç»„ä¸­.

`sudo usermod -a -G docker $USER`

å®Œæˆæ“ä½œå,ç™»å‡ºç³»ç»Ÿç„¶åå†é‡æ–°ç™»å½•,åº”è¯¥å°±æå®šäº†.ä¸è¿‡è‹¥ä½ çš„å¹³å°æ˜¯ Fedora,åˆ™æ·»åŠ ç”¨æˆ·åˆ° docker ç»„æ—¶ä¼šå‘ç°è¿™ä¸ªç»„æ˜¯ä¸å­˜åœ¨çš„.é‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä½ éœ€è¦é¦–å…ˆåˆ›å»ºè¿™ä¸ªç»„.å‘½ä»¤å¦‚ä¸‹ï¼š
```bash
sudo groupadd docker && sudo gpasswd -a ${USER} docker && sudo systemctl restart docker
newgrp docker
```

å¯åŠ¨,æš‚åœä»¥åŠå¯ç”¨ Docker
```
sudo systemctl start docker
sudo systemctl enable docker
sudo systemctl stop docker
sudo systemctl restart docker
```

æ‹‰å–é•œåƒ
```bash
docker images # æ£€æŸ¥ä¸€ä¸‹ç³»ç»Ÿä¸­å·²ç»æœ‰äº†å“ªäº›é•œåƒ
docker pull nginx # æ‹‰å–ä¸€ä¸ªé•œåƒ
docker search nginx # æœç´¢ Docker Hub ä¸­çš„æ‰€æœ‰ Nginx é•œåƒ
docker pull jwilder/nginx-proxy # ä»éå®˜æ–¹æºæ‹‰å–é•œåƒ
```

å¸¸ç”¨å‘½ä»¤
```bash
docker run -it [docker_id] bash     # è¿è¡Œä¸€ä¸ªå®¹å™¨å®ä¾‹
docker ps             # æŸ¥çœ‹å½“å‰è¿è¡Œçš„ docker å®¹å™¨çš„è¿›ç¨‹ä¿¡æ¯
docker image rm [docker_image_id]   # åˆ é™¤æœ¬åœ°çš„ docker é•œåƒ
docker rmi -f [docker_image_id]     # åˆ é™¤æœ¬åœ°çš„ docker é•œåƒ
docker exec -it [docker_id] bash  # è·å–å®¹å™¨çš„shell
docker kill # æ€æ­»å®¹å™¨
docker commit [docker_id] [docker_image_id] # æäº¤å¹¶ä¿å­˜å®¹å™¨çŠ¶æ€
```

**Docker-Compose**

Docker-Compose æ˜¯ä¸€ä¸ªéƒ¨ç½²å¤šä¸ªå®¹å™¨çš„ç®€å•ä½†æ˜¯éå¸¸å¿…è¦çš„å·¥å…·.

- **Ubuntu Install**
  ```bash
  sudo yum install epel-release
  sudo yum install -y python-pip
  sudo pip install docker-compose
  sudo yum upgrade python*
  docker-compose version
  ```

- **å…¶ä»–ç³»ç»Ÿ**

  å»ä¸‹è½½äºŒè¿›åˆ¶åŒ… https://github.com/docker/compose/releases

  ç„¶åå°†æ–‡ä»¶ä¸Šä¼ åˆ° `/usr/local/bin/` æ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åå°†å…¶é‡å‘½åä¸º docker-composeï¼Œä¿®æ”¹æ­¤æ–‡ä»¶çš„æƒé™ï¼Œå¢åŠ å¯æ‰§è¡Œï¼š`chmod +x /usr/local/bin/docker-compose`

  ```bash
  docker-compose build
  docker-compose up -d
  docker-compose stop
  ```

  ```bash
  docker-compose ps     # æŸ¥çœ‹å½“å‰çš„ä½¿ç”¨ docker-compose up -d å¼€å¯çš„å®¹å™¨è¿›ç¨‹ä¿¡æ¯
  docker-compose up -d  # ä½¿ç”¨æœ¬åœ°çš„ docker-compose.yml å¼€å¯ç›¸å…³çš„å®¹å™¨
  docker-compose down   # ç»ˆæ­¢å½“å‰çš„ä½¿ç”¨ docker-compose up -d å¼€å¯çš„å®¹å™¨
  ```

**åŠ é€Ÿ**
- [Docker é•œåƒåŠ é€Ÿ](../../Plan/Misc-Plan.md#Docker)

---

# åˆ†å¸ƒå¼
## zookeeper

**å®‰è£…**

ä¾èµ– jdk,å®‰è£…è¿‡ç¨‹è§ [JDK](#JDK)

zookeeper æ”¯æŒä¸¤ç§è¿è¡Œæ¨¡å¼ï¼šç‹¬ç«‹æ¨¡å¼ï¼ˆstandaloneï¼‰å’Œå¤åˆ¶æ¨¡å¼ï¼ˆreplicatedï¼‰ã€‚

çœŸæ­£ç”¨äºç”Ÿäº§ç¯å¢ƒçš„ Zookeeper è‚¯å®šéƒ½æ˜¯ä½¿ç”¨å¤åˆ¶æ¨¡å¼çš„ï¼Œè¿™æ ·åšå¯ä»¥é¿å…å•ç‚¹é—®é¢˜ã€‚æƒ³è¦ä½¿ç”¨å¤åˆ¶æ¨¡å¼ï¼Œä½†ç”±äºæ²¡æœ‰å¯Œä½™çš„æœºå™¨èƒ½å¤Ÿä½¿ç”¨ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å•å°æœºå™¨ä¸Šé€šè¿‡é…ç½®æ¥ä½¿ç”¨å¤åˆ¶æ¨¡å¼ï¼Œä»è€Œæ¨¡æ‹ŸçœŸå®çš„é›†ç¾¤ç¯å¢ƒã€‚

ç”±äº Zookeeper é›†ç¾¤æ˜¯é€šè¿‡å¤šæ•°é€‰ä¸¾çš„æ–¹å¼äº§ç”Ÿ leader çš„ï¼Œå› æ­¤ï¼Œé›†ç¾¤éœ€è¦å¥‡æ•°ä¸ª Zookeeper å®ä¾‹ç»„æˆï¼Œä¹Ÿå°±æ˜¯è¯´è‡³å°‘éœ€è¦3å°ï¼ˆ1å°ä¸èƒ½ç®—"ç¾¤"ï¼‰ã€‚

è¿™é‡Œé…ç½®çš„ä¸º `ç‹¬ç«‹æ¨¡å¼`

```bash
wget http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.14/zookeeper-3.4.14.tar.gz
mkdir /usr/local/zookeeper
tar -zxvf zookeeper-3.4.14.tar.gz -C /usr/local/zookeeper/

cd /usr/local/zookeeper/zookeeper-3.4.14/conf/
cp zoo_sample.cfg zoo.cfg
```

åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•ä¸æ—¥å¿—ç›®å½•
```bash
mkdir /usr/local/zookeeper/zookeeper-3.4.14/dataDir
mkdir /usr/local/zookeeper/zookeeper-3.4.14/dataLogDir
```

ä¿®æ”¹æ•°æ®å­˜å‚¨å’Œæ—¥å¿—ç›®å½•
```vim
vim /usr/local/zookeeper/zookeeper-3.4.14/conf/zoo.cfg

dataDir=/usr/local/zookeeper/zookeeper-3.4.14/dataDir
dataLogDir=/usr/local/zookeeper/zookeeper-3.4.14/dataLogDir
```
```bash
# å¯åŠ¨
/usr/local/zookeeper/zookeeper-3.4.14/bin/zkServer.sh start

# è¿æ¥
/usr/local/zookeeper/zookeeper-3.4.14/bin/zkCli.sh
```

---

# å®‰å…¨æœåŠ¡
## ClamAV

`ä¸€ä¸ªå¼€æºé˜²ç—…æ¯’å¼•æ“ï¼Œç”¨äºæ£€æµ‹æœ¨é©¬ï¼Œç—…æ¯’ï¼Œæ¶æ„è½¯ä»¶å’Œå…¶ä»–æ¶æ„å¨èƒã€‚`

**å®˜ç½‘**
- https://www.clamav.net

`æœ¬éƒ¨åˆ†æ¥è‡ª https://blog.51cto.com/11199460/2083697,åœ¨æ­¤ä»…ä½œæ’ç‰ˆè°ƒæ•´`

**å®‰è£…**
```bash
yum -y install epel-release
yum -y install clamav-server clamav-data clamav-update clamav-filesystem clamav clamav-scanner-systemd clamav-devel clamav-lib clamav-server-systemd

# åœ¨ä¸¤ä¸ªé…ç½®æ–‡ä»¶ /etc/freshclam.conf å’Œ /etc/clamd.d/scan.conf ä¸­ç§»é™¤â€œExampleâ€å­—ç¬¦
cp /etc/freshclam.conf /etc/freshclam.conf.bak
sed -i -e "s/^Example/#Example/" /etc/freshclam.conf

cp /etc/clamd.d/scan.conf /etc/clamd.d/scan.conf.bak
sed -i -e "s/^Example/#Example/" /etc/clamd.d/scan.conf
```

**ç—…æ¯’åº“æ“ä½œ**

å…³é—­è‡ªåŠ¨æ›´æ–°
freshclam å‘½ä»¤é€šè¿‡æ–‡ä»¶ /etc/cron.d/clamav-update æ¥è‡ªåŠ¨è¿è¡Œ
```vim
vim /etc/cron.d/clamav-update
```

ä½†é»˜è®¤æƒ…å†µä¸‹æ˜¯ç¦æ­¢äº†è‡ªåŠ¨æ›´æ–°åŠŸèƒ½,éœ€è¦ç§»é™¤æ–‡ä»¶ /etc/sysconfig/freshclam æœ€åä¸€è¡Œçš„é…ç½®æ‰èƒ½å¯ç”¨
```vim
vim /etc/cron.d/clamav-update

# FRESHCLAM_DELAY=
```

å®šä¹‰æœåŠ¡å™¨ç±»å‹ (æœ¬åœ°æˆ–è€… TCP) ,åœ¨è¿™é‡Œå®šä¹‰ä¸ºä½¿ç”¨æœ¬åœ° socket,å°†æ–‡ä»¶ /etc/clam.d/scan.conf ä¸­çš„è¿™ä¸€è¡Œå‰é¢çš„æ³¨é‡Šç¬¦å·å»æ‰ï¼š
```vim
vim /etc/clamd.d/scan.conf

LocalSocket /var/run/clamd.scan/clamd.sock
```

ä¸‹è½½ç—…æ¯’åº“ https://www.clamav.net/downloads å°† main.cvd\daily.cvd\bytecode.cvd ä¸‰ä¸ªæ–‡ä»¶ä¸‹è½½åä¸Šä¼ åˆ° /var/lib/clamav ç›®å½•ä¸‹
```vim
vim /etc/freshclam.conf

DatabaseDirectory /var/lib/clamav
```
```bash
systemctl enable clamd@scan.service
ln -s '/usr/lib/systemd/system/clamd@scan.service' '/etc/systemd/system/multi-user.target.wants/clamd@scan.service'
```

æ›´æ–°ç—…æ¯’åº“
```bash
vim /usr/lib/systemd/system/clam-freshclam.service

# Run the freshclam as daemon
[Unit]
Description = freshclam scanner
After = network.target

[Service]
Type = forking
ExecStart = /usr/bin/freshclam -d -c 4
Restart = on-failure
PrivateTmp = true

[Install]
WantedBy=multi-user.target
```
```bash
systemctl start clam-freshclam.service
systemctl status clam-freshclam.service
freshclam
systemctl enable clam-freshclam.service
cp /usr/share/clamav/template/clamd.conf /etc/clamd.conf
```
```vim
vim /etc/clamd.conf

TCPSocket 3310
TCPAddr 127.0.0.1
```
```bash
/usr/sbin/clamd restart
clamdscan -V

systemctl start clamd@scan.service
systemctl status clamd@scan.service
```

æŸ¥æ€ç—…æ¯’
```bash
clamscan -r /home # æ‰«ææ‰€æœ‰ç”¨æˆ·çš„ä¸»ç›®å½•å°±ä½¿ç”¨
clamscan -r --bell -i / # æ‰«ææ‰€æœ‰æ–‡ä»¶å¹¶ä¸”æ˜¾ç¤ºæœ‰é—®é¢˜çš„æ–‡ä»¶çš„æ‰«æç»“æœ
clamscan -r --remove  # æŸ¥æ€å½“å‰ç›®å½•å¹¶åˆ é™¤æ„ŸæŸ“çš„æ–‡ä»¶
```

---

## Fail2ban

`ç¦æ­¢å¯¼è‡´å¤šæ¬¡èº«ä»½éªŒè¯é”™è¯¯çš„ä¸»æœº`

**é¡¹ç›®åœ°å€**
- https://github.com/fail2ban/fail2ban

`æœ¬éƒ¨åˆ†æ¥è‡ª https://linux.cn/article-5067-1.html,åœ¨æ­¤ä»…ä½œæ’ç‰ˆè°ƒæ•´`

**å®‰è£…**

RHEL: `yum install fail2ban`

Debian: `apt install fail2ban`

**ç¼–è¾‘é…ç½®æ–‡ä»¶**
```vim
vim /etc/fail2ban/jail.conf

[DEFAULT]
# ä»¥ç©ºæ ¼åˆ†éš”çš„åˆ—è¡¨,å¯ä»¥æ˜¯ IP åœ°å€ã€CIDR å‰ç¼€æˆ–è€… DNS ä¸»æœºå
# ç”¨äºæŒ‡å®šå“ªäº›åœ°å€å¯ä»¥å¿½ç•¥ fail2ban é˜²å¾¡
ignoreip = 127.0.0.1 172.31.0.0/24 10.10.0.0/24 192.168.0.0/24

# å®¢æˆ·ç«¯ä¸»æœºè¢«ç¦æ­¢çš„æ—¶é•¿ (ç§’) ,-1ä»£è¡¨æ°¸è¿œ
bantime = 10m

# å®¢æˆ·ç«¯ä¸»æœºè¢«ç¦æ­¢å‰å…è®¸å¤±è´¥çš„æ¬¡æ•°
maxretry = 5

# é—´éš”æ—¶é—´ (ç§’) ,é—´éš”æ—¶é—´å†…è¶…è¿‡æœ€å¤§å°è¯•æ¬¡æ•°å³è¢«å°é”
findtime = 10m

mta = sendmail

[ssh-iptables]
enabled = true
filter = sshd
action = iptables[name=SSH, port=ssh, protocol=tcp]
sendmail-whois[name=SSH, dest=your@email.com, sender=fail2ban@email.com]
# Debian ç³»çš„å‘è¡Œç‰ˆ
logpath = /var/log/auth.log
# Red Hat ç³»çš„å‘è¡Œç‰ˆ
logpath = /var/log/secure
# ssh æœåŠ¡çš„æœ€å¤§å°è¯•æ¬¡æ•°
maxretry = 3
```

æ ¹æ®ä¸Šè¿°é…ç½®,fail2ban ä¼šè‡ªåŠ¨ç¦æ­¢åœ¨æœ€è¿‘ 10 åˆ†é’Ÿå†…æœ‰è¶…è¿‡ 3 æ¬¡è®¿é—®å°è¯•å¤±è´¥çš„ä»»æ„ IP åœ°å€.ä¸€æ—¦è¢«ç¦,è¿™ä¸ª IP åœ°å€å°†ä¼šåœ¨ 24 å°æ—¶å†…ä¸€ç›´è¢«ç¦æ­¢è®¿é—® SSH æœåŠ¡.è¿™ä¸ªäº‹ä»¶ä¹Ÿä¼šé€šè¿‡ sendemail å‘é€é‚®ä»¶é€šçŸ¥.

**æµ‹è¯•**
```bash
service fail2ban restart

# ä¸ºäº†éªŒè¯ fail2ban æˆåŠŸè¿è¡Œ,ä½¿ç”¨å‚æ•°'ping'æ¥è¿è¡Œ fail2ban-client å‘½ä»¤. å¦‚æœ fail2ban æœåŠ¡æ­£å¸¸è¿è¡Œ,ä½ å¯ä»¥çœ‹åˆ°â€œpong (å˜­) â€ä½œä¸ºå“åº”.
fail2ban-client ping
```

ä¸ºäº†æµ‹è¯• fail2ban æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œ,å°è¯•é€šè¿‡ä½¿ç”¨é”™è¯¯çš„å¯†ç æ¥ç”¨ SSH è¿æ¥åˆ°æœåŠ¡å™¨æ¨¡æ‹Ÿä¸€ä¸ªæš´åŠ›ç ´è§£æ”»å‡».ä¸æ­¤åŒæ—¶,ç›‘æ§ `/var/log/fail2ban.log` ,è¯¥æ–‡ä»¶è®°å½•åœ¨ fail2ban ä¸­å‘ç”Ÿçš„ä»»ä½•æ•æ„Ÿäº‹ä»¶.

```bash
tail -f /var/log/fail2ban.log
2019-07-24 23:33:34,369 fail2ban.jail           [14760]: INFO    Initiated 'pyinotify' backend
2019-07-24 23:33:34,370 fail2ban.filter         [14760]: INFO      maxLines: 1
2019-07-24 23:33:34,372 fail2ban.server         [14760]: INFO    Jail ssh-iptables is not a JournalFilter instance
2019-07-24 23:33:34,373 fail2ban.filter         [14760]: INFO    Added logfile: '/var/log/auth.log' (pos = 0, hash = de62b1aacfb0f9a9082c515fe3cdb77214101d93)
2019-07-24 23:33:34,377 fail2ban.filter         [14760]: INFO      encoding: UTF-8
2019-07-24 23:33:34,378 fail2ban.filter         [14760]: INFO      maxRetry: 3
2019-07-24 23:33:34,378 fail2ban.filter         [14760]: INFO      findtime: 600
2019-07-24 23:33:34,378 fail2ban.actions        [14760]: INFO      banTime: 600
2019-07-24 23:33:34,381 fail2ban.jail           [14760]: INFO    Jail 'sshd' started
2019-07-24 23:33:34,382 fail2ban.jail           [14760]: INFO    Jail 'ssh-iptables' started
2019-07-24 23:35:58,780 fail2ban.filter         [14760]: INFO    [ssh-iptables] Found 192.168.72.130 - 2019-07-24 23:35:58
2019-07-24 23:36:00,397 fail2ban.filter         [14760]: INFO    [ssh-iptables] Found 192.168.72.130 - 2019-07-24 23:36:00
2019-07-24 23:36:03,811 fail2ban.filter         [14760]: INFO    [sshd] Found 192.168.72.130 - 2019-07-24 23:35:58
2019-07-24 23:36:03,812 fail2ban.filter         [14760]: INFO    [sshd] Found 192.168.72.130 - 2019-07-24 23:36:00
2019-07-24 23:36:04,266 fail2ban.filter         [14760]: INFO    [sshd] Found 192.168.72.130 - 2019-07-24 23:36:04
2019-07-24 23:36:04,310 fail2ban.filter         [14760]: INFO    [ssh-iptables] Found 192.168.72.130 - 2019-07-24 23:36:04
2019-07-24 23:36:04,778 fail2ban.actions        [14760]: NOTICE  [ssh-iptables] Ban 192.168.72.130
```

æ ¹æ®ä¸Šè¿°çš„æ—¥å¿—æ–‡ä»¶,Fail2ban é€šè¿‡æ£€æµ‹ IP åœ°å€çš„å¤šæ¬¡å¤±è´¥ç™»å½•å°è¯•,ç¦æ­¢äº†ä¸€ä¸ª IP åœ°å€ 192.168.72.130

**è§£ç¦ IP**

ç”±äº fail2ban çš„â€œssh-iptablesâ€ç›‘ç‹±ä½¿ç”¨ iptables æ¥é˜»å¡é—®é¢˜ IP åœ°å€,ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥æ£€æµ‹å½“å‰ iptables æ¥éªŒè¯ç¦æ­¢è§„åˆ™.
```bash
iptables --list -n
iptables -D fail2ban-SSH -s 192.168.72.130 -j DROP
```
å½“ç„¶ä½ å¯ä»¥ä½¿ç”¨ä¸Šè¿°çš„ iptables å‘½ä»¤æ‰‹åŠ¨åœ°æ£€éªŒå’Œç®¡ç† fail2ban çš„ IP é˜»å¡åˆ—è¡¨,ä½†å®é™…ä¸Šæœ‰ä¸€ä¸ªé€‚å½“çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ fail2ban-client å‘½ä»¤è¡Œå·¥å…·.è¿™ä¸ªå‘½ä»¤ä¸ä»…å…è®¸ä½ å¯¹"ssh-iptables"ç›‘ç‹±è¿›è¡Œç®¡ç†,åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªæ ‡å‡†çš„å‘½ä»¤è¡Œæ¥å£,å¯ä»¥ç®¡ç†å…¶ä»–ç±»å‹çš„ fail2ban ç›‘ç‹±.
```bash
fail2ban-client status  # æ£€éªŒ fail2ban çŠ¶æ€

fail2ban-client status ssh-iptables # æ£€éªŒä¸€ä¸ªç‰¹å®šç›‘ç‹±çš„çŠ¶æ€

fail2ban-client set ssh-iptables unbanip 192.168.72.130 # è§£é”ç‰¹å®šçš„ IP åœ°å€
```
æ³¨æ„,å¦‚æœä½ åœæ­¢äº† Fail2ban æœåŠ¡,é‚£ä¹ˆæ‰€æœ‰çš„ IP åœ°å€éƒ½ä¼šè¢«è§£é”.å½“ä½ é‡å¯ Fail2ban,å®ƒä¼šä» /etc/log/secure(æˆ– /var/log/auth.log)ä¸­æ‰¾åˆ°å¼‚å¸¸çš„ IP åœ°å€åˆ—è¡¨,å¦‚æœè¿™äº›å¼‚å¸¸åœ°å€çš„å‘ç”Ÿæ—¶é—´ä»ç„¶åœ¨ç¦æ­¢æ—¶é—´å†…,é‚£ä¹ˆ Fail2ban ä¼šé‡æ–°å°†è¿™äº› IP åœ°å€ç¦æ­¢.

---

## Snort

`ä¸€ä¸ªå¼€æºçš„ IDS`

**å®˜ç½‘**
- https://www.snort.org/

**å®‰è£…**
- **æºä»£ç ç¼–è¯‘å®‰è£…**

    å®‰è£…ä¾èµ–
    ```bash
    yum -y install gcc flex bison zlib zlib-devel libpcap libpcap-devel pcre pcre-devel libdnet libdnet-devel tcpdump openssl openssl-devel
    ```

    ```bash
    wget https://www.snort.org/downloads/snort/daq-2.0.6.tar.gz
    wget https://www.snort.org/downloads/snort/snort-2.9.15.tar.gz
    ```
    ```bash
    tar xvzf daq-2.0.6.tar.gz

    cd daq-2.0.6
    ./configure && make && sudo make install
    cd ../
    ```
    ```bash
    wget http://luajit.org/download/LuaJIT-2.0.5.tar.gz
    tar xvzf LuaJIT-2.0.5.tar.gz
    cd LuaJIT-2.0.5
    make install
    ```
    ```bash
    tar xvzf snort-2.9.15.tar.gz

    cd snort-2.9.15
    ./configure --enable-sourcefire && make && sudo make install
    ```

- **rpm åŒ…å®‰è£…**

    è¿™é‡Œä»¥ 2.9.15-1 ä¸ºä¾‹ï¼Œæœ€æ–°ç‰ˆè®¿é—®å®˜ç½‘äº†è§£ https://www.snort.org
    ```bash
    yum install https://www.snort.org/downloads/snort/snort-2.9.15-1.centos7.x86_64.rpm
    ```

    å®‰è£… snort çš„æ—¶å€™å¯èƒ½ä¼šæŠ¥é”™ï¼š`ç¼ºå°‘ libnghttp2.so.14()(64bit)`
    ```bash
    yum install epel-release -y
    yum install nghttp2
    ```

    æµ‹è¯•ï¼š`snort`ï¼Œå¦‚æœæ²¡æœ‰æŠ¥é”™åˆ™å®‰è£…æˆåŠŸã€‚

    å¦‚æœæŠ¥é”™ `snort: error while loading shared libraries: libdnet.1: cannot open shared object file: No such file or directory`
    ```bash
    wget http://prdownloads.sourceforge.net/libdnet/libdnet-1.11.tar.gz
    tar -xzvf libdnet-1.11.tar.gz
    ./configure
    make && make install
    ```

**è§„åˆ™ä¸‹è½½**

Snort å®˜æ–¹æä¾›çš„ä¸‰ç±»è§„åˆ™

- Community rulesï¼šæ— éœ€æ³¨å†Œorè´­ä¹°ï¼Œå¯ç›´æ¥ä¸‹è½½ä½¿ç”¨
- Registered rulesï¼šéœ€è¦æ³¨å†Œæ‰å¯ä»¥ä¸‹è½½
- Subscriber rulesï¼šéœ€è¦æ³¨å†ŒèŠ±é’±è´­ä¹°

è®¿é—®å®˜ç½‘ https://www.snort.org/ ä¸‹è½½è§„åˆ™

ä¸‹è½½å®Œï¼Œè§£å‹è‡³ç›¸åº”ç›®å½•
```
tar -xvf snortrules-snapshot-<version>.tar.gz -C /etc/snort/rules
```

---

`"æœ‹å‹çš„ç–è¿œå¤§è‡´åˆ†ä¸ºä¸¤ç§.å¤©å„ä¸€æ–¹çš„ä¸¤ä¸ªäºº,æ…¢æ…¢çš„å¤±æ‰äº†è”ç³»,å½¼æ­¤ä¸å†çŸ¥é“è¿‘å†µ,å¤šå¹´ä¹‹åå†èšé¦–å¾€å¾€å°±åªæ˜¯ç›¸å¯¹æ— è¨€äº†.å¦ä¸€ç§å°±ä»¤äººå”å˜˜çš„å¤šäº†,ä¸¤ä¸ªæœå¤•å¾—è§çš„äºº,å½¼æ­¤çš„å¢ƒé‡ç«Ÿå› ç€é€ åŒ–ç›¸å»æ¸è¿œ,è¿™æ—¶å¿ƒé‡Œä¹Ÿè®¸ä¼šæ…¢æ…¢ç”Ÿå‡ºä¸€ç§æ— åŠ›æ„Ÿæ¥,å› ä¸ºæ— è®ºæ€ä¹ˆè¯´æ€ä¹ˆåšä¹Ÿåªèƒ½æ„Ÿè§‰å¿ƒçš„è·ç¦»è¶Šæ¥è¶Šè¿œäº†.â€”â€”å´å¿µçœŸã€Šè¿™äº›äºº,é‚£äº›äº‹ã€‹`
