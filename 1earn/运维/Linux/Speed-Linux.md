```
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                              â–ˆâ–ˆ       â–ˆâ–ˆ       â–ˆâ–ˆ
 â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                      â–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆ      â–‘â–‘
â–‘â–ˆâ–ˆ       â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆ       â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ
â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆ â–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆ â–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆ â–ˆâ–ˆ
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ â–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆ â–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆ â–‘â–‘â–ˆâ–ˆâ–ˆ
       â–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆâ–‘â–‘â–‘  â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–‘ â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–‘ â–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆ      â–‘â–ˆâ–ˆ â–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–‘â–ˆâ–ˆ  â–‘â–ˆâ–ˆ  â–ˆâ–ˆâ–‘â–ˆâ–ˆ
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆ     â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆ â–ˆâ–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ â–‘â–‘â–ˆâ–ˆ
â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘       â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘       â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘ â–‘â–‘â–‘   â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘   â–‘â–‘
```

`åŸºç¡€ Linux å‘½ä»¤ã€æ“ä½œæŒ‡å—`

<p align="center">
    <a href="https://en.wikipedia.org/wiki/Pablo_Picasso"><img src="../../../assets/img/è¿ç»´/Linux/Speed-Linux.jpg" width="90%"></a>
</p>

---

## å¤§çº²

**ğŸ‘Shell-Base**

* [ç¯å¢ƒå˜é‡](#ç¯å¢ƒå˜é‡)
* [é€šé…ç¬¦-é™åˆ¶è¾“å‡º](#é€šé…ç¬¦-é™åˆ¶è¾“å‡º)
* [ä¼šè¯](#ä¼šè¯)
* [ç›®å½•](#ç›®å½•)
* [ä¼šè¯](#ä¼šè¯)
* [æ–‡ä»¶](#æ–‡ä»¶)
	* [å‹ç¼©å¤‡ä»½](#å‹ç¼©å¤‡ä»½)
	* [è¯»å†™](#è¯»å†™)
		* [å¢](#å¢)
		* [åˆ ](#åˆ )
		* [æŸ¥](#æŸ¥)
		* [æ”¹](#æ”¹)

**ğŸ“¶ç½‘ç»œç®¡ç†**

* [é…ç½®](#é…ç½®)
* [æŸ¥çœ‹](#æŸ¥çœ‹)
* [æŠ“åŒ…](#æŠ“åŒ…)
* [ä¼ è¾“-ä¸‹è½½](#ä¼ è¾“-ä¸‹è½½)
	* [bt](#bt)
* [Firewall](#Firewall)
	* [Firewalld](#Firewalld)
	* [Iptables](#Iptables)
* [è½¯ä»¶åŒ…ç®¡ç†](#è½¯ä»¶åŒ…ç®¡ç†)
	* [æº](#æº)
	* [Binary](#Binary)
	* [dpkg](#dpkg)
	* [Pacman](#Pacman)
	* [rpm](#rpm)
	* [yum](#yum)
	* [apt](#apt)
	* [å¸¸ç”¨è½¯ä»¶](#å¸¸ç”¨è½¯ä»¶)

**ğŸ¦‹ç³»ç»Ÿç®¡ç†**

* [ç³»ç»Ÿè®¾ç½®](#ç³»ç»Ÿè®¾ç½®)
	* [æ—¶é—´](#æ—¶é—´)
	* [è¯­è¨€](#è¯­è¨€)
	* [å¯åŠ¨é¡¹-è®¡åˆ’ä»»åŠ¡](#å¯åŠ¨é¡¹-è®¡åˆ’ä»»åŠ¡)
	* [è´¦å·ç®¡æ§](#è´¦å·ç®¡æ§)
* [ç³»ç»Ÿä¿¡æ¯](#ç³»ç»Ÿä¿¡æ¯)
	* [è¿›ç¨‹ç®¡ç†](#è¿›ç¨‹ç®¡ç†)

**ğŸ› è®¾å¤‡ç®¡ç†**

* [ç¡¬ç›˜-æ•°æ®](#ç¡¬ç›˜-æ•°æ®)

---

# ğŸ‘Shell-Base

**å‘½ä»¤é£æ ¼**
- Unix é£æ ¼çš„å‚æ•°,å‰é¢åŠ å•ç ´æŠ˜çº¿,ä¾‹å¦‚: `-H`
- BSD é£æ ¼çš„å‚æ•°,å‰é¢ä¸åŠ ç ´æŠ˜çº¿,ä¾‹å¦‚: `h`
- GNU é£æ ¼çš„é•¿å‚æ•°,å‰é¢åŠ åŒç ´æŠ˜çº¿,ä¾‹å¦‚: `--help`

## ç¯å¢ƒå˜é‡

- **bash**
	```bash
	echo $PATH  						# æŸ¥çœ‹ç¯å¢ƒå˜é‡

	PATH=$PATH:/usr/local/python3/bin/	# æ–°æ·»åŠ çš„è·¯å¾„(å…³é—­ç»ˆç«¯å¤±æ•ˆ)
	```
	```vim
	vim ~/.bash_profile # æ°¸ä¹…ä¿®æ”¹å˜é‡

	PATH=$PATH:/usr/local/bin/
	```
	`source ~/.bash_profile` ç«‹å³ç”Ÿæ•ˆ

- **fish**
	```vim
	vim ~/.config/fish/config.fish

	set PATH (ä½ æƒ³è¦åŠ å…¥çš„è·¯å¾„) $PATH
	```
	`souce ~/.config/fish/config.fish`

- å›¾å½¢æ¨¡å¼ç™»å½•æ—¶,é¡ºåºè¯»å– : `/etc/profile` å’Œ `~/.profile`
- å›¾å½¢æ¨¡å¼ç™»å½•å,æ‰“å¼€ç»ˆç«¯æ—¶,é¡ºåºè¯»å– : `/etc/bash.bashrc` å’Œ `~/.bashrc`
- æ–‡æœ¬æ¨¡å¼ç™»å½•æ—¶,é¡ºåºè¯»å– : `/etc/bash.bashrc` , `/etc/profile` å’Œ `~/.bash_profile`

---

## é€šé…ç¬¦-é™åˆ¶è¾“å‡º

```bash
head		# æ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´çš„å†…å®¹.é»˜è®¤ä¸‹,æ˜¾ç¤ºæ–‡ä»¶çš„å¤´ 10 è¡Œå†…å®¹.
tail		# æ˜¾ç¤ºæ–‡ä»¶ä¸­çš„å°¾éƒ¨å†…å®¹.é»˜è®¤ä¸‹,æ˜¾ç¤ºæ–‡ä»¶çš„æœ«å°¾ 10 è¡Œå†…å®¹.
<
>
grep		# æ–‡æœ¬æœç´¢å·¥å…·,å®ƒèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡æœ¬,å¹¶æŠŠåŒ¹é…çš„è¡Œæ‰“å°å‡ºæ¥.
sort		# å°†æ–‡ä»¶è¿›è¡Œæ’åº,å¹¶å°†æ’åºç»“æœæ ‡å‡†è¾“å‡º.
uniq		# ç”¨äºæŠ¥å‘Šæˆ–å¿½ç•¥æ–‡ä»¶ä¸­çš„é‡å¤è¡Œ
awk
&
```

---

## ä¼šè¯

```bash
id
who			# æ˜¾ç¤ºç›®å‰ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯.
w			# æ˜¾ç¤ºå·²ç»ç™»é™†ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨,å¹¶æ˜¾ç¤ºç”¨æˆ·æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤.
last		# æ˜¾ç¤ºç”¨æˆ·æœ€è¿‘ç™»å½•ä¿¡æ¯
```
```bash
Ctrl+S		# ç»ˆæ­¢æ˜¾ç¤ºçš„ä¿¡å·/æŒ‡ä»¤
Ctrl+Q		# æ¢å¤æ˜¾ç¤ºçš„ä¿¡å·/æŒ‡ä»¤
alt+F1-F6	# åˆ‡æ¢è™šæ‹Ÿæ§åˆ¶å°
Alt+F7		# å›¾å½¢ç•Œé¢
```

**screen**

screen æ˜¯ä¸€ä¸ªä¼šè¯ç®¡ç†è½¯ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¯¥è½¯ä»¶åŒæ—¶è¿æ¥å¤šä¸ªæœ¬åœ°æˆ–è¿œç¨‹çš„å‘½ä»¤è¡Œä¼šè¯ï¼Œå¹¶åœ¨å…¶é—´è‡ªç”±åˆ‡æ¢ã€‚
```bash
yum -y install screen
apt-get -y install screen
screen -S <name>
screen -ls
screen -r <name>	# é‡æ–°è¿æ¥
ctrl+d				# ç»ˆæ­¢ä¼šè¯
```

**å†å²è®°å½•**
```bash
cat ~/.bash_history
cat ~/.nano_history
cat ~/.atftp_history
cat ~/.mysql_history
cat ~/.php_history
```

---

## ç›®å½•

```bash
cd	# åˆ‡æ¢å·¥ä½œç›®å½•
~	# è¡¨ç¤º home ç›®å½•
.	# è¡¨ç¤ºå½“å‰ç›®å½•
..	# è¡¨ç¤ºä¸Šçº§ç›®å½•
-	# è¡¨ç¤ºä¸Šä¸€æ¬¡ç›®å½•

/	# è¡¨ç¤ºæ ¹ç›®å½•
	root	# è¶…çº§ç”¨æˆ·ç›®å½•,å­˜æ”¾ root ç”¨æˆ·ç›¸å…³æ–‡ä»¶
	home	# å­˜æ”¾æ™®é€šç”¨æˆ·ç›¸å…³æ–‡ä»¶
	bin		# (binaries)å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶
	sbin	# (super user binaries)å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶,åªæœ‰rootæ‰èƒ½è®¿é—®
	mnt		# (mount)ç³»ç»Ÿç®¡ç†å‘˜å®‰è£…ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿçš„å®‰è£…ç‚¹
	etc		# (etcetera)å­˜æ”¾ç³»ç»Ÿé…ç½®æ–‡ä»¶
	var		# (variable)ç”¨äºå­˜æ”¾è¿è¡Œæ—¶éœ€è¦æ”¹å˜æ•°æ®çš„æ–‡ä»¶
	boot	# å­˜æ”¾ç”¨äºç³»ç»Ÿå¼•å¯¼æ—¶ä½¿ç”¨çš„å„ç§æ–‡ä»¶
	usr		# (unix shared resources)ç”¨äºå­˜æ”¾å…±äº«çš„ç³»ç»Ÿèµ„æº
	dev		# (devices)ç”¨äºå­˜æ”¾è®¾å¤‡æ–‡ä»¶
	lib		# (library)å­˜æ”¾è·Ÿæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„å…±äº«åº“åŠå†…æ ¸æ¨¡å—
	tmp		# (temporary)ç”¨äºå­˜æ”¾å„ç§ä¸´æ—¶æ–‡ä»¶
```

æ›´å¤šå†…å®¹å‚è€ƒç¬”è®° [æ–‡ä»¶](./ç¬”è®°/æ–‡ä»¶.md#/)

---

## æ–‡ä»¶
### å‹ç¼©å¤‡ä»½

```bash
.tar	# æ³¨:tar æ˜¯æ‰“åŒ…,ä¸æ˜¯å‹ç¼©!
tar -xvf FileName.tar						# è§£åŒ…
tar -cvf FileName.tar DirName				# æ‰“åŒ…
tar -tvf FileName.tar.gz					# ä¸è§£å‹æŸ¥çœ‹å†…å®¹
tar -xvf FileName.tar.gz a.txt  			# è§£å‹æŒ‡å®šå†…å®¹
tar -uvf test.tar.bz2 test					# æ›´æ–°ä¸€ä¸ªå†…å®¹
tar -rvf test.tar.bz2 test2 				# è¿½åŠ ä¸€ä¸ªå†…å®¹

.tar.gz å’Œ .tgz
tar -zxvf FileName.tar.gz					# è§£å‹
tar -zcvf FileName.tar.gz DirName			# å‹ç¼©

.tar.Z
tar -Zxvf FileName.tar.Z					# è§£å‹
tar -Zcvf FileName.tar.Z DirName			# å‹ç¼©

.tar.bz
tar -jxvf FileName.tar.bz					# è§£å‹
tar -jcvf FileName.tar.bz DirName			# å‹ç¼©

.gz
gunzip FileName.gz							# è§£å‹1
gzip -dv FileName.gz						# è§£å‹2
gzip FileName								# å‹ç¼©
gzip -l FileName.gz 						# ä¸è§£å‹æŸ¥çœ‹å†…å®¹
zcat FileName.gz 							# ä¸è§£å‹æŸ¥çœ‹å†…å®¹

.bz2
bzip2 -dv FileName.bz2						# è§£å‹1
bunzip2 FileName.bz2						# è§£å‹2
bzip2 -zv FileName							# å‹ç¼©
bzcat FileName.bz2							# ä¸è§£å‹æŸ¥çœ‹å†…å®¹

.Z
uncompress FileName.Z						# è§£å‹
compress FileName							# å‹ç¼©
compress -rvf /home/abc/					# å¼ºåˆ¶å‹ç¼©æ–‡ä»¶å¤¹

.zip
unzip FileName.zip							# è§£å‹
zip FileName.zip DirName					# å‹ç¼©

.rar
rar x FileName.rar							# è§£å‹
rar a FileName.rar DirName					# å‹ç¼©

.lha
lha -e FileName.lha							# è§£å‹
lha -a FileName.lha FileName				# å‹ç¼©

.rpm
rpm2cpio FileName.rpm | cpio -div			# è§£åŒ…

.deb
ar -p FileName.deb data.tar.gz | tar zxf -	# è§£åŒ…
```

### è¯»å†™
#### å¢

```bash
touch -r test1.txt test2.txt 				# æ›´æ–° test2.txt æ—¶é—´æˆ³ä¸ test1.txt æ—¶é—´æˆ³ç›¸åŒ
touch -c -t 202510191820 a.txt 				# æ›´æ”¹æ—¶é—´
truncate -s 100k aaa.txt					# åˆ›å»ºæŒ‡å®šå¤§å°æ–‡ä»¶

mkdir -p /mnt/aaa/aaa/aaa 					# åˆ›å»ºæŒ‡å®šè·¯å¾„ä¸€ç³»åˆ—æ–‡ä»¶å¤¹
mkdir -m 777 /test							# åˆ›å»ºæ—¶æŒ‡å®šæƒé™
```

#### åˆ 

```bash
rm -i		# ç¡®è®¤
rmdir		# åˆ é™¤ç©ºç›®å½•

# åˆ é™¤å·¨å¤§æ–‡ä»¶å° tips
	echo "" >  bigfile
	rm bigfile

	> access.log			# é€šè¿‡é‡å®šå‘åˆ° Null æ¥æ¸…ç©ºæ–‡ä»¶å†…å®¹
	: > access.log
	true > access.log
	cat /dev/null > access.log
```

#### æŸ¥

**æŸ¥çœ‹**
```bash
ls			# æŸ¥çœ‹æ–‡ä»¶
	ls -a						# æŸ¥çœ‹éšè—æ–‡ä»¶

cat			# è¿æ¥æ–‡ä»¶å¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸Š
	cat -n						# å¸¦è¡Œå·è¯»
	cat -b						# å¸¦è¡Œå·,è¶Šè¿‡ç©ºç™½è¡Œ

more		# ä¸€ä¸ªåŸºäº vi ç¼–è¾‘å™¨æ–‡æœ¬è¿‡æ»¤å™¨ï¼Œå®ƒä»¥å…¨å±å¹•çš„æ–¹å¼æŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹
	more +10 a.txt				# ä»ç¬¬10è¡Œè¯»èµ·
	more -10 f1.txt				# æ¯æ¬¡æ˜¾ç¤º10è¡Œè¯»å–æ–‡ä»¶

head		# ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´çš„å†…å®¹,é»˜è®¤æƒ…å†µä¸‹æ˜¾ç¤ºæ–‡ä»¶çš„å¤´10è¡Œå†…å®¹
	head -n 1 a.txt				# è¯»æ–‡ä»¶ç¬¬ä¸€è¡Œ
	head -5 /etc/passwd			# è¯»å–æ–‡ä»¶å‰5è¡Œ

tail		# ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å°¾éƒ¨çš„å†…å®¹,é»˜è®¤æƒ…å†µä¸‹æ˜¾ç¤ºæ–‡ä»¶çš„å°¾éƒ¨10è¡Œå†…å®¹
	tail -10 /etc/passwd		# è¯»å–æ–‡ä»¶å10è¡Œ

sed			# ä¸€ç§æµç¼–è¾‘å™¨ï¼Œå®ƒæ˜¯æ–‡æœ¬å¤„ç†ä¸­éå¸¸ä¸­çš„å·¥å…·ï¼Œèƒ½å¤Ÿå®Œç¾çš„é…åˆæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨
	sed -n '5,10p' /etc/passwd	# è¯»å–æ–‡ä»¶ç¬¬5-10è¡Œ

tac			# å€’ç€è¯»
od			# äºŒè¿›åˆ¶è¯»
less		# å…è®¸ç”¨æˆ·å‘å‰æˆ–å‘åæµè§ˆæ–‡ä»¶
du			# æŸ¥çœ‹æ–‡ä»¶å¤§å°
stat		# æŸ¥çœ‹æ–‡ä»¶å±æ€§
file		# æ¢æµ‹ç»™å®šæ–‡ä»¶çš„ç±»å‹

pwd			# ä»¥ç»å¯¹è·¯å¾„çš„æ–¹å¼æ˜¾ç¤ºç”¨æˆ·å½“å‰å·¥ä½œç›®å½•
	pwd -P						# ç›®å½•é“¾æ¥æ—¶,æ˜¾ç¤ºå®é™…è·¯å¾„è€Œé link è·¯å¾„
```

**æŸ¥æ‰¾**
```bash
fd					# æ–‡ä»¶æŸ¥æ‰¾å·¥å…·
	wget https://github.com/sharkdp/fd/releases/download/v7.3.0/fd-musl_7.3.0_amd64.deb
	dpkg -i fd-musl_7.3.0_amd64.deb
	fd <File>

find / -name conf*	# å¿«é€ŸæŸ¥æ‰¾æ ¹ç›®å½•åŠå­ç›®å½•ä¸‹æ‰€æœ‰ conf æ–‡ä»¶
locate <File>		# æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½•

which <Command>		# æŸ¥æ‰¾å¹¶æ˜¾ç¤ºç»™å®šå‘½ä»¤çš„ç»å¯¹è·¯å¾„
```

#### æ”¹

```bash
cp <æºæ–‡ä»¶> <ç›®æ ‡æ–‡ä»¶/ç›®æ ‡è·¯å¾„>			# å¤åˆ¶
	cp -r <æºç›®å½•> <ç›®æ ‡ç›®å½•/ç›®æ ‡è·¯å¾„>	# å¸¦ç›®å½•å¤åˆ¶

mv <æºæ–‡ä»¶> <ç›®æ ‡æ–‡ä»¶/ç›®æ ‡è·¯å¾„>			# å¯¹æ–‡ä»¶æˆ–ç›®å½•é‡å‘½å,æˆ–ç§»åŠ¨

vi 									# ç¼–è¾‘å™¨
nano								# ç¼–è¾‘å™¨
gedit								# å›¾å½¢åŒ–çš„ç¼–è¾‘å™¨
```

**Vim**

- **å¸¸ç”¨æ“ä½œ**
	```bash
	Normal æ¨¡å¼ä¸‹ i è¿›å…¥ insert æ¨¡å¼
	:wq 					# å­˜ç›˜+é€€å‡º
	dd  					# åˆ é™¤å½“å‰è¡Œ,å¹¶å­˜å…¥å‰ªåˆ‡æ¿
	p   					# ç²˜è´´
	:q! 					# å¼ºåˆ¶é€€å‡º
	:wq!					# å¼ºåˆ¶ä¿å­˜é€€å‡º
	:w !sudo tee %  		# æ—  root æƒé™,ä¿å­˜ç¼–è¾‘çš„æ–‡ä»¶
	:saveas <path/to/file>  # å¦å­˜ä¸º
	æŒ‰ä¸‹ / å³å¯è¿›å…¥æŸ¥æ‰¾æ¨¡å¼,è¾“å…¥è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å¹¶æŒ‰ä¸‹å›è½¦. Vim ä¼šè·³è½¬åˆ°ç¬¬ä¸€ä¸ªåŒ¹é….æŒ‰ä¸‹ n æŸ¥æ‰¾ä¸‹ä¸€ä¸ª,æŒ‰ä¸‹ N æŸ¥æ‰¾ä¸Šä¸€ä¸ª.
	:%s/foo/bar 			# ä»£è¡¨æ›¿æ¢ foo ä¸º bar
	insert æ¨¡å¼æŒ‰ ESC é”®,è¿”å› Normal æ¨¡å¼
	```

- **æ›´å¤šæ“ä½œ**
	- [Vim](./Power-Linux.md#Vim)

---

# ğŸ“¶ç½‘ç»œç®¡ç†
## æŸ¥çœ‹

**IP åœ°å€**
```bash
ifconfig		# ifconfig å‘½ä»¤å·²ç»è¢«å¼ƒç”¨ï¼Œä¸åº”è¯¥ä½¿ç”¨
ip a			# æ˜¾ç¤ºç½‘ç»œè®¾å¤‡çš„è¿è¡ŒçŠ¶æ€
hostname -I
netstat -a
cat /proc/net/fib_trie
cat /etc/sysconfig/network
sudo -v
```

**ç«¯å£**
```bash
getent services # æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çš„é»˜è®¤ç«¯å£åç§°å’Œç«¯å£å·
ss -tnlp
lsof -i
netstat -antup
netstat -antpx
netstat -tulpn
```

**è·¯ç”±è¡¨**
```bash
route
ip route		# æ˜¾ç¤ºæ ¸å¿ƒè·¯ç”±è¡¨
ip neigh		# æ˜¾ç¤ºé‚»å±…è¡¨
```

**DNS**
```bash
cat /etc/resolv.conf
```

**arp æ¡ç›®**
```bash
arp -e
```

---

## é…ç½®

**Ubuntu**
```bash
vim /etc/network/interfaces

auto enp7s0	 				# ä½¿ç”¨çš„ç½‘ç»œæ¥å£
iface enp7s0 inet static	# é™æ€ ip è®¾ç½®
address 10.0.208.222
netmask 255.255.240.0
gateway 10.0.208.1
dns-nameservers 10.0.208.1
```
```bash
iface enp7s0 inet dhcp		# dhcp é…ç½®
```
```bash
ip addr flush enp7s0
systemctl restart networking.service

systemctl restart NetworkManager
systemctl enable NetworkManager
```

- **ä¿®æ”¹ DNS**

	æ–¹æ³•ä¸€
	```vim
	vim /etc/network/interfaces

	dns-nameservers 8.8.8.8
	```
	é‡å¯åDNSå°±ç”Ÿæ•ˆäº†,è¿™æ—¶å€™å†çœ‹/etc/resolv.conf,æœ€ä¸‹é¢å°±å¤šäº†ä¸€è¡Œ

	æ–¹æ³•äºŒ
	```vim
	vim /etc/resolv.conf

	nameserver 8.8.8.8
	```
	```bash
	chattr +i /etc/resolv.conf	# é™åˆ¶ç”¨æˆ·(åŒ…æ‹¬ root)åˆ é™¤ã€ä¿®æ”¹ã€å¢åŠ ã€é“¾æ¥ç­‰æ“ä½œ.è¦ä¿®æ”¹çš„è¯è¦å…ˆåˆ æ‰è¿™ä¸ªè®¾ç½® chattr -i /etc/resolv.conf
	service network restart
	```

**Centos**
```bash
vim /etc/sysconfig/network-scripts/ifcfg-eth0	# é…ç½®æ–‡ä»¶åç§°å’Œç½‘å¡å¯¹åº”,å¯ä½¿ç”¨ ip a æŸ¥çœ‹æ‰€æœ‰ç½‘å¡åç§°

HOSTNAME=test
onboot=yes			# æ¿€æ´»ç½‘ç»œ
HWADDR=00:0C:29:F1:2E:7B
BOOTPROTO=static	# ä½¿ç”¨é™æ€ IP,è€Œä¸æ˜¯ç”± DHCP åˆ†é… IP
# BOOTPROTO=dhcp è¿™ä¸ªæ˜¯ DHCP çš„é…ç½®,å¦‚æœé…è¿™ä¸ªé‚£ä¸‹é¢çš„å°±ä¸éœ€è¦é…ç½®äº†
IPADDR=172.16.102.61
PREFIX=24
GATEWAY=172.16.102.254
DNS1=223.5.5.5
```
```vim
vim /etc/hosts

127.0.0.1  test localhost	# ä¿®æ”¹ localhost.localdomain ä¸º test,shutdown -r now é‡å¯ä½¿ä¿®æ”¹ç”Ÿæ•ˆ
```
```bash
service network restart
systemctl restart NetworkManager	# é‡å¯ç½‘ç»œç®¡ç†
systemctl enable NetworkManager
```

- **ä¿®æ”¹ DNS**
	```vim
	vim /etc/resolv.conf

	nameserver 8.8.8.8
	```
	```bash
	chattr +i /etc/resolv.conf		# é™åˆ¶ç”¨æˆ·(åŒ…æ‹¬ root)åˆ é™¤ã€ä¿®æ”¹ã€å¢åŠ ã€é“¾æ¥ç­‰æ“ä½œ.è¦ä¿®æ”¹çš„è¯è¦å…ˆåˆ æ‰è¿™ä¸ªè®¾ç½® chattr -i /etc/resolv.conf
	service network restart
	```

**Arch**
```bash
ifconfig eth0 up	# å¯åŠ¨ç½‘å¡
dhcpcd  eth0		# è·å– ip
```
`ifconfig -a` æŸ¥çœ‹ä¸‹å¯ç”¨çš„ç½‘å¡
```vim
vim /etc/rc.conf

interface=eth0
eth0="dhcp"
lo="lo 127.0.0.1"
eth0="eth0 192.168.0.2 netmask 255.255.255.0 broadcast 192.168.0.255"

INTERFACES=(eth0)
gateway="default gw 192.168.0.1"
ROUTES=(gateway)
```
`/etc/rc.d/network restart`

**ethtool**

ethool æ˜¯ä¸€ä¸ªå®ç”¨çš„å·¥å…·ï¼Œç”¨æ¥ç»™ç³»ç»Ÿç®¡ç†å‘˜ä»¥å¤§é‡çš„æ§åˆ¶ç½‘ç»œæ¥å£çš„æ“ä½œã€‚
```bash
ethtool eth0		# æ˜¾ç¤ºå…³äºè¯¥ç½‘å¡çš„åŸºæœ¬è®¾ç½®
ethtool -i eth0		# æŸ¥è¯¢è¯¥ç½‘å¡çš„é©±åŠ¨ç›¸å…³ä¿¡æ¯
ethtool -d eth0		# æŸ¥è¯¢ eth0 ç½‘å£æ³¨å†Œæ€§ä¿¡æ¯
ethtool -S eth0		# æŸ¥è¯¢ç½‘å£æ”¶å‘åŒ…ç»Ÿè®¡
ethtool -s eth0 speed 100 autoneg off	# -s é€‰é¡¹å¯ä»¥ä¿®æ”¹ç½‘å¡é…ç½®
# ä»¥ä¸Šå‘½ä»¤å°†eth0ç½‘å¡çš„è‡ªåå•†ä¼ è¾“æ¨¡å¼å…³é—­ï¼Œä¼ è¾“é€Ÿç‡æ”¹ä¸º100Mb/sã€‚å‘½ä»¤æ‰§è¡Œåéœ€è¦é‡æ–°å¯åŠ¨eth0ç½‘å¡ï¼š
ifup eth0

# é€šè¿‡ä»¥ä¸Šå‘½ä»¤ä¿®æ”¹ç½‘å¡é…ç½®ï¼Œåœ¨æœºå™¨é‡å¯åé…ç½®å°†ä¸å†ç”Ÿæ•ˆ
```

---

## æŠ“åŒ…

**tcpdump**
```bash
# å®‰è£…
apt install tcpdump -y
yum install tcpdump -y

# å½“æˆ‘ä»¬åœ¨æ²¡ç”¨ä»»ä½•é€‰é¡¹çš„æƒ…å†µä¸‹è¿è¡Œ tcpdump å‘½ä»¤æ—¶,å®ƒå°†æ•è·æ‰€æœ‰æ¥å£ä¸Šçš„æ•°æ®åŒ…
tcpdump -i {æ¥å£å}	# æŒ‡å®šæ¥å£

# å‡è®¾æˆ‘ä»¬æƒ³ä»ç‰¹å®šæ¥å£(å¦‚ enp0s3)æ•è· 12 ä¸ªæ•°æ®åŒ…
tcpdump -i enp0s3 -c 12

# ä½¿ç”¨ -D é€‰é¡¹æ˜¾ç¤º tcpdump å‘½ä»¤çš„æ‰€æœ‰å¯ç”¨æ¥å£
tcpdump -D

# é»˜è®¤æƒ…å†µä¸‹,åœ¨ tcpdump å‘½ä»¤è¾“å‡ºä¸­,ä¸æ˜¾ç¤ºå¯è¯»æ€§å¥½çš„æ—¶é—´æˆ³,å¦‚æœæ‚¨æƒ³å°†å¯è¯»æ€§å¥½çš„æ—¶é—´æˆ³ä¸æ¯ä¸ªæ•è·çš„æ•°æ®åŒ…ç›¸å…³è”,é‚£ä¹ˆä½¿ç”¨ -tttt é€‰é¡¹,ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤º
tcpdump -i enp0s3 -c 12 -tttt

# ä½¿ç”¨ tcpdump å‘½ä»¤ä¸­çš„ -w é€‰é¡¹å°†æ•è·çš„ TCP/IP æ•°æ®åŒ…ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­
tcpdump -i enp0s3 -c 12 -tttt -w test.pcap	# æ³¨æ„:æ–‡ä»¶æ‰©å±•åå¿…é¡»ä¸º .pcap

# æ•è·å¹¶ä¿å­˜å¤§å°å¤§äº N å­—èŠ‚çš„æ•°æ®åŒ….
tcpdump -i enp0s3 -c 12 -tttt -w test.pcap greater 1024
# æ•è·å¹¶ä¿å­˜å¤§å°å°äº N å­—èŠ‚çš„æ•°æ®åŒ….
tcpdump -i enp0s3 -c 12 -tttt -w test.pcap less 1024

# ä½¿ç”¨é€‰é¡¹ -r ä»æ–‡ä»¶ä¸­è¯»å–è¿™äº›æ•°æ®åŒ…
tcpdump -r test.pcap -tttt

# åªæ•è·ç‰¹å®šæ¥å£ä¸Šçš„ IP åœ°å€æ•°æ®åŒ…
tcpdump -i enp0s3 -n

# ä½¿ç”¨ tcp é€‰é¡¹æ¥åªæ•è· TCP æ•°æ®åŒ…
tcpdump -i enp0s3 tcp

# ä»ç‰¹å®šæ¥å£ enp0s3 ä¸Šçš„ç‰¹å®šç«¯å£(ä¾‹å¦‚ 22)æ•è·æ•°æ®åŒ…
tcpdump -i enp0s3 port 22

# ä½¿ç”¨ src å…³é”®å­—åè·Ÿ IP åœ°å€,æ•è·æ¥è‡ªç‰¹å®šæ¥æº IP çš„æ•°æ®åŒ…
tcpdump -i enp0s3 -n src 1.1.1.1

# æ•è·æ¥è‡ªç‰¹å®šç›®çš„ IP çš„æ•°æ®åŒ…
tcpdump -i enp0s3 -n dst 1.1.1.1

# å‡è®¾æˆ‘æƒ³æ•è·ä¸¤å°ä¸»æœº 169.144.0.1 å’Œ 169.144.0.20 ä¹‹é—´çš„ TCP æ•°æ®åŒ…
tcpdump -w test2.pcap -i enp0s3 tcp and \(host 169.144.0.1 or host 169.144.0.20\)

# åªæ•è·ä¸¤å°ä¸»æœºä¹‹é—´çš„ SSH æ•°æ®åŒ…æµ
tcpdump -w test3.pcap -i enp0s3 src 169.144.0.1 and port 22 and dst 169.144.0.20 and port 22

# ä½¿ç”¨ tcpdump å‘½ä»¤,ä»¥ ASCII å’Œåå…­è¿›åˆ¶æ ¼å¼æ•è· TCP/IP æ•°æ®åŒ…
tcpdump -c 10 -A -i enp0s3
```

---

## ä¼ è¾“-ä¸‹è½½

**scp**
```bash
scp root@xx.xx.xx.xx:/test/123.txt /test/123.txt	# æ–‡ä»¶ä¼ è¾“
scp -r 		# æ–‡ä»¶å¤¹ä¼ è¾“
```

**lrzsz**
```bash
yum install lrzsz
sz xxx		# å°†é€‰å®šçš„æ–‡ä»¶å‘é€(send)åˆ°æœ¬åœ°æœºå™¨
rz 			# è¿è¡Œè¯¥å‘½ä»¤ä¼šå¼¹å‡ºä¸€ä¸ªæ–‡ä»¶é€‰æ‹©çª—å£,ä»æœ¬åœ°é€‰æ‹©æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨(receive),éœ€è¦è¿œç¨‹è½¯ä»¶æ”¯æŒ
```

**wget**
```bash
wget example.com/big.file.iso						# ä¸‹è½½ç›®æ ‡æ–‡ä»¶
wget --output-document=filename.html example.com	# å¦è¡Œå‘½å
wget -c example.com/big.file.iso					# æ¢å¤ä¹‹å‰çš„ä¸‹è½½
wget --i list.txt									# ä¸‹è½½æ–‡ä»¶ä¸­çš„ url
wget -r example.com									# é€’å½’ä¸‹è½½
wget --no-check-certificate							# ä¸æ£€æŸ¥ https è¯ä¹¦
```

### bt

- Transmission
- rtorrent
- **[peerflix](https://github.com/mafintosh/peerflix)**
	```bash
	npm install -g peerflix
	peerflix "magnet:?xt=urn:btih:ef330b39f4801d25b4245212e75a38634bfc856e"
	```
- **[tget](https://github.com/jeffjose/tget)**
	```bash
	npm install -g t-get
	tget 'magnet:?xt=urn:btih:0403fb4728bd788fbcb67e87d6feb241ef38c75a'
	```

---

## Firewall
### Firewalld

```bash
firewall-cmd --zone=public --add-port=12345/tcp --permanent		# å¼€æ”¾ç«¯å£
firewall-cmd --zone=public --add-service=http --permanent		# å¼€æ”¾æœåŠ¡
firewall-cmd --zone=public --add-rich-rule 'rule family="ipv4" source address="192.168.1.10" accept' --permanent						# å…è®¸192.168.1.10æ‰€æœ‰è®¿é—®æ‰€æœ‰ç«¯å£
firewall-cmd --zone=public --add-rich-rule 'rule family="ipv4" source address="192.168.1.10" port port=22 protocol=tcp reject' --permanent	# æ‹’ç»192.168.1.10æ‰€æœ‰è®¿é—®TCPåè®®çš„22ç«¯å£

firewall-cmd --reload			# é‡æ–°åŠ è½½
firewall-cmd --list-services	# æŸ¥çœ‹é˜²ç«å¢™è®¾ç½®
systemctl status firewalld		# æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€
systemctl start firewalld		# å¼€å¯æœåŠ¡
systemctl stop firewalld		# å…³é—­æœåŠ¡
```

**æ›´å¤šé…ç½®**

è§ [Firewall.md](./å®éªŒ/Firewall.md)

### Iptables

```bash
iptables-save > /root/firewall_rules.backup		# å…ˆå¤‡ä»½ä¸€ä¸‹ç­–ç•¥
iptables -A OUTPUT -p tcp -d bigmart.com -j ACCEPT
iptables -A OUTPUT -p tcp --dport 80 -j DROP
iptables -A INPUT -p tcp -s 10.0.3.1 --dport 22 -j ACCEPT
iptables -A INPUT -p tcp -s 0.0.0.0/0 --dport 22 -j DROP

iptables -L			# æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™
iptables-restore </root/firewall_rules.backup	# æ¢å¤è§„åˆ™
```

---

## è½¯ä»¶åŒ…ç®¡ç†

**æŸ¥çœ‹å®‰è£…çš„ç¨‹åº**
```bash
ls -alh /usr/bin/
ls -alh /sbin/
dpkg -l
rpm -qa
ls -alh /var/cache/apt/archivesO
ls -alh /var/cache/yum/
```

**update-alternatives**
```bash
# update-alternatives å‘½ä»¤ç”¨äºå¤„ç† linux ç³»ç»Ÿä¸­è½¯ä»¶ç‰ˆæœ¬çš„åˆ‡æ¢,åœ¨å„ä¸ª linux å‘è¡Œç‰ˆä¸­å‡æä¾›äº†è¯¥å‘½ä»¤,å‘½ä»¤å‚æ•°ç•¥æœ‰åŒºåˆ«,ä½†å¤§è‡´æ˜¯ä¸€æ ·çš„.

# æ³¨å†Œè½¯ä»¶
	update-alternatives --install <link> <name> <path> <priority>
	update-alternatives --install /usr/bin/java java /opt/jdk1.8.0_91/bin/java 200
	# ä»¥jdkä¸ºä¾‹,å®‰è£…äº† jdk ä»¥å,å…ˆè¦åœ¨ update-alternatives å·¥å…·ä¸­æ³¨å†Œ
	update-alternatives --install /usr/bin/java java /opt/jdk1.8.0_111/bin/java 300

	# ç¬¬ä¸€ä¸ªå‚æ•° --install è¡¨ç¤ºæ³¨å†ŒæœåŠ¡å.
	# ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ³¨å†Œæœ€ç»ˆåœ°å€,æˆåŠŸåå°†ä¼šæŠŠå‘½ä»¤åœ¨è¿™ä¸ªå›ºå®šçš„ç›®çš„åœ°å€åšçœŸå®å‘½ä»¤çš„è½¯é“¾,ä»¥åç®¡ç†å°±æ˜¯ç®¡ç†è¿™ä¸ªè½¯é“¾;
	# ç¬¬ä¸‰ä¸ªå‚æ•°:æœåŠ¡å,ä»¥åç®¡ç†æ—¶ä»¥å®ƒä¸ºå…³è”ä¾æ®.
	# ç¬¬å››ä¸ªå‚æ•°,è¢«ç®¡ç†çš„å‘½ä»¤ç»å¯¹è·¯å¾„.
	# ç¬¬äº”ä¸ªå‚æ•°,ä¼˜å…ˆçº§,æ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜.

# æŸ¥çœ‹å·²æ³¨å†Œåˆ—è¡¨
	update-alternatives --display java

# ä¿®æ”¹å‘½ä»¤ç‰ˆæœ¬
	update-alternatives --config java
	# è¾“å…¥æ•°å­—,é€‰æ‹©ç›¸åº”ç‰ˆæœ¬
	update-alternatives --auto java								# æŒ‰ç…§ä¼˜å…ˆçº§é«˜è‡ªåŠ¨é€‰æ‹©
	update-alternatives --set java /opt/jdk1.8.0_91/bin/java	# ç›´æ¥æŒ‡å®š
```

### æº

`æœ€æ–°ç‰ˆçš„ linux ç³»ç»Ÿä¸‹,yum å’Œ apt éƒ½æ”¯æŒè‡ªåŠ¨ä½¿ç”¨è¾ƒå¿«çš„æº`

**æœ¬åœ° yum æº**

æŒ‚è½½åˆ°/mnt/cdrom
```bash
mkdir /mnt/cdrom
mount /dev/cdrom /mnt/cdrom/
```

è¿›å…¥ /etc/yum.repos.d ç›®å½•,å°†å…¶ä¸­ä¸‰ä¸ªæ”¹åæˆ–è€…å‰©ä¸‹æ‰€æœ‰éƒ½ç§»èµ°ç•™ä¸‹ CentOS-Base.repo
```bash
cd /etc/yum.repos.d
rm  CentOS-Media.repo
rm  CentOS-Vault.repo
```

ç¼–è¾‘ CentOS-Base.repo
```vim
vim CentOS-Base.repo

baseurl=file:///mnt/cdrom/	# è¿™é‡Œä¸ºæœ¬åœ°æºè·¯å¾„
gpgcheck=0
enabled=1					# å¼€å¯æœ¬åœ°æº
```
`yum list` çœ‹ä¸€ä¸‹åŒ…

**Alibaba yum æº**

ç›´æ¥ä¸‹è½½æº
```bash
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
```

åˆ·æ–° YUM çš„ç¼“å­˜çŠ¶æ€:
```bash
yum clean all
yum makecache
```

**ubuntu æº**
```bash
lsb_release -c		# æŸ¥çœ‹ç³»ç»Ÿç‰ˆå·

cd /etc/apt/
mv sources.list sources.list.bak
```
```vim
vim sources.list

deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
```

enable the "Universe" repository
```bash
add-apt-repository universe
apt-get update
```

**Kali æº**
```vim
vim /etc/apt/sources.list

# æ¸…åæº
deb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free
deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free

# å®˜æ–¹æº
deb http://http.kali.org/kali kali-rolling main non-free contrib
deb-src http://http.kali.org/kali kali-rolling main non-free contrib

# ä¸­ç§‘å¤§
deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib
deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib

# æµ™å¤§
deb http://mirrors.zju.edu.cn/kali kali-rolling main contrib non-free
deb-src http://mirrors.zju.edu.cn/kali kali-rolling main contrib non-free

# ä¸œè½¯å¤§å­¦
deb http://mirrors.neusoft.edu.cn/kali kali-rolling/main non-free contrib
deb-src http://mirrors.neusoft.edu.cn/kali kali-rolling/main non-free contrib
```
`apt-get update && apt-get upgrade && apt-get dist-upgrade`

**Pacman æº**
```bash
pacman-mirrors -i -c China -m rank		# æ›´æ–°é•œåƒæ’å
pacman -Syy    						# æ›´æ–°æ•°æ®æº
pacman -S archlinux-keyring
```

### Binary

```bash
yum install make
yum install gcc
yum install gcc-c++
./configure --prefix=/opt	# é…ç½®,è¡¨ç¤ºå®‰è£…åˆ°/optç›®å½•
make						# ç¼–è¯‘
make install				# å®‰è£…
```

### dpkg

dpkg å‘½ä»¤æ˜¯ Debian Linux ç³»ç»Ÿç”¨æ¥å®‰è£…ã€åˆ›å»ºå’Œç®¡ç†è½¯ä»¶åŒ…çš„å®ç”¨å·¥å…·.

```bash
# deb æ˜¯ debian linuxçš„å®‰è£…æ ¼å¼,è·Ÿ red hat çš„ rpm éå¸¸ç›¸ä¼¼,æœ€åŸºæœ¬çš„å®‰è£…å‘½ä»¤æ˜¯:dpkg -i file.deb

dpkg -i xxxxx.deb  			# å®‰è£…è½¯ä»¶
dpkg -R /usr/local/src		# å®‰è£…è·¯å¾„ä¸‹æ‰€æœ‰åŒ…
dpkg -L 					# æŸ¥çœ‹è½¯ä»¶å®‰è£…ä½ç½®
```

### Pacman

pacman æ˜¯ Arch çš„åŒ…ç®¡ç†å·¥å…·.

```bash
pacman -S <package>			# å®‰è£…æˆ–è€…å‡çº§å•ä¸ªè½¯ä»¶åŒ…
pacman -R <package>			# åˆ é™¤å•ä¸ªè½¯ä»¶åŒ…,ä¿ç•™å…¶å…¨éƒ¨å·²ç»å®‰è£…çš„ä¾èµ–å…³ç³»
pacman -Ss <package>		# æŸ¥è¯¢è½¯ä»¶åŒ…

# å¸¸ç”¨è½¯ä»¶
pacman -S vim
pacman -S fish
```

### rpm

rpm å‘½ä»¤æ˜¯ RPM è½¯ä»¶åŒ…çš„ç®¡ç†å·¥å…·.

```bash
rpm -qa 					# æœç´¢ rpm åŒ…
rpm -qf /etc/my.conf		# æŸ¥è¯¢æ–‡ä»¶æ¥è‡ªå“ªä¸ªåŒ…
rpm â€“ivh xxxx.rpm			# å®‰è£…æœ¬åœ°åŒ…
rpm -e xxx					# å¸è½½
rpm -U						# å‡çº§
rpm -V						# éªŒè¯
```

### yum

yum å‘½ä»¤æ˜¯åœ¨ Fedora å’Œ RedHat ä»¥åŠ SUSE ä¸­åŸºäº rpm çš„è½¯ä»¶åŒ…ç®¡ç†å™¨

```bash
yum update && yum upgrade 	# æ›´æ–°å’Œå‡çº§ rpm è½¯ä»¶åŒ…
yum repolist				# æŸ¥çœ‹ä»“åº“åˆ—è¡¨
yum provides ifconfig 		# æŸ¥çœ‹å“ªä¸ªåŒ…æä¾› ifconfig

# /var/run/yum.pid å·²è¢«é”å®š,PID ä¸º xxxx çš„å¦ä¸€ä¸ªç¨‹åºæ­£åœ¨è¿è¡Œ.
rm -f /var/run/yum.pid		# å¼ºåˆ¶è§£é”å ç”¨
```

### apt

apt çš„å…¨ç§°æ˜¯ Advanced Packaging Tool æ˜¯ Linux ç³»ç»Ÿä¸‹çš„ä¸€æ¬¾å®‰è£…åŒ…ç®¡ç†å·¥å…·.

```bash
# æ›´æ–°æº:
apt-get update

# å¯¹è½¯ä»¶è¿›è¡Œä¸€æ¬¡æ•´ä½“æ›´æ–°:
apt-get update & apt-get upgrade
apt-get dist-upgrade
apt-get clean

# æ— æ³•è·å¾—é” /var/lib/apt/lists/lock - open (11: èµ„æºæš‚æ—¶ä¸å¯ç”¨)
rm -rf /var/cache/apt/archives/lock
rm -rf /var/lib/dpkg/lock-frontend
rm -rf /var/lib/dpkg/lock		# å¼ºåˆ¶è§£é”å ç”¨
```

**Gdebi**

Gdebi æ˜¯ä¸€ä¸ªå®‰è£… .deb è½¯ä»¶åŒ…çš„å·¥å…·.æä¾›äº†å›¾å½¢åŒ–çš„ä½¿ç”¨ç•Œé¢

```bash
apt update
apt install gdebi
```

### å¸¸ç”¨è½¯ä»¶

**bash-insulter**
```bash
git clone https://github.com/No-Github/bash-insulter.git bash-insulter
cp bash-insulter/src/bash.command-not-found /etc/
chmod 777 /etc/bash.command-not-found
source /etc/bash.command-not-found
```
```bash
vim /etc/bashrc æˆ– vim /etc/bash.bashrc

. /etc/bash.command-not-found
echo "$(tput cuf 10) $(tput setab 1)FBI WARNING$(tput sgr 0)"
echo ""
echo "Federal Law provides severe civil and criminal penalties for
the unauthorized reproduction, distribution, or exhibition of
copyrighted motion pictures (Title 17, United States Code,
Sections 501 and 508). The Federal Bureau of Investigation
investigates allegations of criminal copyright infringement"
echo "$(tput cuf 5) (Title 17, United States Code, Section 506)."
```

**Fish**
```bash
echo /usr/bin/fish | sudo tee -a /etc/shells	# åŠ é»˜è®¤
usermod -s /usr/bin/fish <USERNAME>
```

**zsh**
```bash
apt install zsh		# å®‰è£… zsh
chsh -s /bin/zsh	# åˆ‡æ¢é»˜è®¤çš„ shell ä¸º zsh
sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"	# å®‰è£… oh-my-zsh
git clone git://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions	# ä¸‹è½½å‘½ä»¤è¡¥å…¨æ’ä»¶

# zshrc é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å¦‚ä¸‹å†…å®¹
vim ~/.zshrc

plugins=(git zsh-autosuggestions)

zsh					# é‡æ–°åŠ è½½ zsh é…ç½®

# æ›´å¤šä¸»é¢˜è§æ­¤ https://github.com/robbyrussell/oh-my-zsh/wiki/themes
```

**Powerline-shell**

`pip install powerline-shell`
```vim
vim ~/.config/fish/config.fish

function fish_prompt
	powerline-shell --shell bare $status
end
```

æ›´å¤šå…³äºlinuxå·¥å…·çš„å†…å®¹å‚è€ƒç¬”è®° [å·¥å…·](./ç¬”è®°/å·¥å…·.md)

---

# ğŸ¦‹ç³»ç»Ÿç®¡ç†
## ç³»ç»Ÿè®¾ç½®
### æ—¶é—´

```bash
date							# æŸ¥çœ‹å½“å‰æ—¶é—´
date -R							# æŸ¥çœ‹å½“å‰æ—¶åŒº
data -s "2019-03-31 13:12:29"	# ä¿®æ”¹ç³»ç»Ÿæ—¶é—´

ntpdate		# è®¾ç½®æœ¬åœ°æ—¥æœŸå’Œæ—¶é—´
	ntpdate 0.rhel.pool.ntp.org	# ç½‘ç»œåŒæ­¥æ—¶é—´

hwclock	   	# ç¡¬ä»¶æ—¶é’Ÿè®¿é—®å·¥å…·
	hwclock â€“w 					# å°†ç³»ç»Ÿæ—¶é’ŸåŒæ­¥åˆ°ç¡¬ä»¶æ—¶é’Ÿ,å°†å½“å‰æ—¶é—´å’Œæ—¥æœŸå†™å…¥ BIOS,é¿å…é‡å¯åå¤±æ•ˆ
	hwclock -s 					# å°†ç¡¬ä»¶æ—¶é’ŸåŒæ­¥åˆ°ç³»ç»Ÿæ—¶é’Ÿ

cal			# æŸ¥çœ‹æ—¥å†
```

**tips**
- **ntpd ä¸ ntpdate çš„åŒºåˆ«**
	- ntpd åœ¨å®é™…åŒæ­¥æ—¶é—´æ—¶æ˜¯ä¸€ç‚¹ç‚¹çš„æ ¡å‡†è¿‡æ¥æ—¶é—´çš„,æœ€ç»ˆæŠŠæ—¶é—´æ…¢æ…¢çš„æ ¡æ­£å¯¹.è€Œ ntpdate ä¸ä¼šè€ƒè™‘å…¶ä»–ç¨‹åºæ˜¯å¦ä¼šé˜µç—›,ç›´æ¥è°ƒæ•´æ—¶é—´.
	- ä¸€ä¸ªæ˜¯æ ¡å‡†æ—¶é—´,ä¸€ä¸ªæ˜¯è°ƒæ•´æ—¶é—´.
	- https://blog.csdn.net/tuolaji8/article/details/79971591

### è¯­è¨€

`echo  $LANG` æŸ¥çœ‹å½“å‰æ“ä½œç³»ç»Ÿçš„è¯­è¨€
```bash
vim /etc/locale.conf

set LANG en_US.UTF-8	# æ›´æ”¹é»˜è®¤è¯­è¨€
	 zh_CN.UTF-8
```
`source   /etc/locale.conf`

### å¯åŠ¨é¡¹-è®¡åˆ’ä»»åŠ¡

**æŸ¥çœ‹è®¡åˆ’å·¥ä½œ**
```bash
chkconfig --list
crontab -l
ls -alh /var/spool/cron
ls -al /etc/ | grep cron
ls -al /etc/cron*
cat /etc/cron*
cat /etc/at.allow
cat /etc/at.deny
cat /etc/cron.allow
cat /etc/cron.deny
cat /etc/crontab
cat /etc/anacrontab
cat /var/spool/cron/crontabs/root
```

**crontab**
```bash
vim /etc/crontab		# ç³»ç»Ÿä»»åŠ¡è°ƒåº¦çš„é…ç½®æ–‡ä»¶

# å‰5ä¸ªæ˜Ÿå·åˆ†åˆ«ä»£è¡¨:åˆ†é’Ÿ,å°æ—¶,å‡ å·,æœˆä»½,æ˜ŸæœŸå‡ 
* * * * * command		# æ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ command
3,15 * * * * command	# æ¯å°æ—¶çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ
@reboot	command			# å¼€æœºå¯åŠ¨

# ä¾‹å­
0 */2 * * * /sbin/service httpd restart	# æ„æ€æ˜¯æ¯ä¸¤ä¸ªå°æ—¶é‡å¯ä¸€æ¬¡ apache
50 7 * * * /sbin/service sshd start		# æ„æ€æ˜¯æ¯å¤©7:50å¼€å¯ ssh æœåŠ¡
50 22 * * * /sbin/service sshd stop		# æ„æ€æ˜¯æ¯å¤©22:50å…³é—­ ssh æœåŠ¡
0 0 1,15 * * fsck /home					# æ¯æœˆ1å·å’Œ15å·æ£€æŸ¥ /home ç£ç›˜
1 * * * * /home/bruce/backup			# æ¯å°æ—¶çš„ç¬¬ä¸€åˆ†æ‰§è¡Œ /home/bruce/backup è¿™ä¸ªæ–‡ä»¶
00 03 * * 1-5 find /home "*.xxx" -mtime +4 -exec rm {} \;	# æ¯å‘¨ä¸€è‡³å‘¨äº”3ç‚¹é’Ÿ,åœ¨ç›®å½• /home ä¸­,æŸ¥æ‰¾æ–‡ä»¶åä¸º *.xxx çš„æ–‡ä»¶,å¹¶åˆ é™¤4å¤©å‰çš„æ–‡ä»¶.
30 6 */10 * * ls						# æ„æ€æ˜¯æ¯æœˆ 1ã€11ã€21ã€31 æ—¥çš„ 6:30 æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤
```

**at**

> åœ¨ç‰¹å®šçš„æ—¶é—´æ‰§è¡Œä¸€æ¬¡æ€§çš„ä»»åŠ¡
```bash
at now +1 minutes
echo "test" > test.txt
<ctrl+d>

atq		# åˆ—å‡ºç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡,å¦‚æœæ˜¯è¶…çº§ç”¨æˆ·å°†åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·çš„ä»»åŠ¡,ç»“æœçš„è¾“å‡ºæ ¼å¼ä¸º:ä½œä¸šå·ã€æ—¥æœŸã€å°æ—¶ã€é˜Ÿåˆ—å’Œç”¨æˆ·å
atrm	# æ ¹æ® Job number åˆ é™¤ at ä»»åŠ¡
```

**/etc/rc.local**

åœ¨æ–‡ä»¶æœ«å°¾ (exit 0 ä¹‹å‰) åŠ ä¸Šä½ å¼€æœºéœ€è¦å¯åŠ¨çš„ç¨‹åºæˆ–æ‰§è¡Œçš„å‘½ä»¤å³å¯ (æ‰§è¡Œçš„ç¨‹åºéœ€è¦å†™ç»å¯¹è·¯å¾„,æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡çš„é™¤å¤–) ,å¦‚

**/etc/profile.d/**

å°†å†™å¥½çš„è„šæœ¬ (.sh æ–‡ä»¶) æ”¾åˆ°ç›®å½• `/etc/profile.d/` ä¸‹,ç³»ç»Ÿå¯åŠ¨åå°±ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰ shell è„šæœ¬

### è´¦å·ç®¡æ§

**è´¦å·**
```bash
id									# æ˜¾ç¤ºçœŸå®æœ‰æ•ˆçš„ç”¨æˆ· ID(UID)å’Œç»„ ID(GID)
whoami								# å½“å‰ç”¨æˆ·
groups								# å½“å‰ç»„
cut -d: -f1 /etc/passwd				# æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·

useradd <username>					# åˆ›å»ºç”¨æˆ·
useradd -d /home/<username> -s /sbin/nologin <username>		# åˆ›å»ºç”¨æˆ·å¹¶æŒ‡å®šå®¶ç›®å½•å’Œ shell
passwd <username>					# è®¾ç½®ç”¨æˆ·å¯†ç 

addgroup <groupname>				# åˆ›å»ºç»„
addgroup <username> <groupname>		# ç§»åŠ¨ç”¨æˆ·åˆ°ç»„

newgrp <groupname>					# åˆ›å»ºç»„

usermod -g <groupname> <username>	# ä¿®æ”¹ç”¨æˆ·çš„ä¸»ç»„
usermod -G <é™„åŠ ç»„> <username>		# ä¿®æ”¹ç”¨æˆ·çš„é™„åŠ ç»„
usermod -s /bin/bash <username>		# ä¿®æ”¹ç”¨æˆ·ç™»å½•çš„ Shell
usermod -L <username>  				# é”å®šç”¨æˆ·
usermod -U <username> 				# è§£é”ç”¨æˆ·

userdel <username>					# åªåˆ é™¤ç”¨æˆ·ä¸åˆ é™¤å®¶ç›®å½•
userdel -r <username>				# åŒæ—¶åˆ é™¤å®¶ç›®å½•
userdel -f <username>				# å¼ºåˆ¶åˆ é™¤,å³ä½¿ç”¨æˆ·è¿˜åœ¨ç™»é™†ä¸­
sudo passwd							# é…ç½® su å¯†ç 

chage		# ä¿®æ”¹å¸å·å’Œå¯†ç çš„æœ‰æ•ˆæœŸé™
	chage -l <username>				# æŸ¥çœ‹ä¸€ä¸‹ç”¨æˆ·å¯†ç çŠ¶æ€
	chage -d <username>				# æŠŠå¯†ç ä¿®æ”¹æ›°æœŸå½’é›¶äº†,è¿™æ ·ç”¨æˆ·ä¸€ç™»å½•å°±è¦ä¿®æ”¹å¯†ç 

passwd -l <username>  				# é”å®šç”¨æˆ·
passwd -u <username>  				# è§£é”ç”¨æˆ·

su <username>						# åˆ‡æ¢è´¦å·
su - <username>                     # åˆ‡æ¢è´¦å·å¹¶æ”¹å˜å·¥ä½œç›®å½•è‡³ä½¿ç”¨è€…çš„å®¶ç›®å½•
```

**æƒé™**
```bash
chown named.named <File/Folder>		# å°†æ–‡ä»¶ç»™æŒ‡å®šç”¨æˆ·åŠç»„

chmod <number> <File>				# ç»™æ–‡ä»¶æƒé™
# ç”¨æˆ· rwxã€ç»„ rwxã€å…¶ä»–ç”¨æˆ· rwx  4.2.1 åˆ†åˆ«ä»£è¡¨è¯»,å†™,æ‰§è¡Œ
	chmod 777 <File>
	chmod o=rw <File>				# ä»£è¡¨åªç»™å…¶ä»–ç”¨æˆ·åˆ†é…è¯»å†™æƒé™
	chmod u=rw,g=r,o= <File>
	chown -R u+x <Folder>			# å¯¹æ–‡ä»¶å¤¹åŠå…¶å­ç›®å½•æ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…å¢åŠ æ‰§è¡Œæƒé™

	chmod u+s test_file				# ç»™æ–‡ä»¶å¢åŠ  SUID å±æ€§
	chmod g+s test_dir     			# ç»™ç›®å½•å¢åŠ  SGID å±æ€§
	chmod o+t test_dir     			# ç»™ç›®å½•å¢åŠ  Sticky å±æ€§

chgrp				# æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•æ‰€å±çš„ç”¨æˆ·ç»„
	chgrp user1 file.txt			# Change the owning group of the file file.txt to the group named user1.
	chgrp -hR staff /office/files	# Change the owning group of /office/files, and all subdirectories, to the group staff.

umask 002			# é…ç½®åç ,ä»£è¡¨åˆ›å»ºæ–‡ä»¶æƒé™æ˜¯ 664 å³ rw-rw-r--,é»˜è®¤ 0022(é‡å¯åæ¶ˆå¤±)
# umask å€¼ 002 æ‰€å¯¹åº”çš„æ–‡ä»¶å’Œç›®å½•åˆ›å»ºç¼ºçœæƒé™åˆ†åˆ«ä¸º 6 6 4 å’Œ 7 7 5
# éœ€è¦é•¿æœŸä¿®æ”¹,å¯ä»¥ç›´æ¥æ”¹ vim /etc/profile ä¸­ umask å€¼

chattr				# å¯ä¿®æ”¹æ–‡ä»¶çš„å¤šç§ç‰¹æ®Šå±æ€§
	chattr +i <File>		# å¢åŠ å,ä½¿æ–‡ä»¶ä¸èƒ½è¢«åˆ é™¤ã€é‡å‘½åã€è®¾å®šé“¾æ¥æ¥ã€å†™å…¥ã€æ–°å¢æ•°æ®
	chattr +a <File>		# å¢åŠ è¯¥å±æ€§å,åªèƒ½è¿½åŠ ä¸èƒ½åˆ é™¤,érootç”¨æˆ·ä¸èƒ½è®¾å®šè¯¥å±æ€§
	chattr +c <File>		# è‡ªåŠ¨å‹ç¼©è¯¥æ–‡ä»¶,è¯»å–æ—¶ä¼šè‡ªåŠ¨è§£å‹.Note: This attribute has no effect in the ext2, ext3, and ext4 filesystems.

lsattr <File>		# è¯¥å‘½ä»¤ç”¨æ¥è¯»å–æ–‡ä»¶æˆ–è€…ç›®å½•çš„ç‰¹æ®Šæƒé™
```
```bash
visudo	# åŠ  sudo æƒé™

user1 ALL=(ALL)     ALL
```
åŠ  sudo æƒé™(ä»…é™ Ubuntu)
```bash
adduser user1 sudo	# å°† user1 åŠ åˆ° sudo ç»„ä¸­
deluser user1 sudo	# å°† user1 ä» sudo ç»„ä¸­åˆ é™¤
```
```bash
sudo -v # æŸ¥çœ‹ sudo ä¿¡æ¯
sudo -l # æŸ¥çœ‹å½“å‰æƒé™
```

**ACL**
```bash
setfacl -m u:apache:rwx <File/Folder>	# é…ç½® ACL
getfacl <File/Folder>					# æŸ¥çœ‹ ACL æƒé™
setfacl -b <File/Folder>				# åˆ é™¤ ACL
```

å…³äº linux çš„è´¦å·å’Œè®¤è¯æ›´å¤šå†…å®¹å‚è€ƒç¬”è®° [è®¤è¯](./ç¬”è®°/è®¤è¯.md)

### SELinux

**æŸ¥çœ‹ SELinux çŠ¶æ€**
```bash
getenforce			# æŸ¥çœ‹ selinux çŠ¶æ€
/usr/sbin/sestatus	# æŸ¥çœ‹å®‰å…¨ç­–ç•¥
```

**å…³é—­Â SELinux**
- éœ€è¦é‡å¯
	```vim
	vimÂ /etc/selinux/config

	SELINUX=disabled
	```

- ä¸éœ€è¦é‡å¯

	`setenforce 0`

---

## ç³»ç»Ÿä¿¡æ¯

```bash
uname -a			# æ‰“å°å½“å‰ç³»ç»Ÿç›¸å…³ä¿¡æ¯
cat /etc/os-release
cat /proc/version

lshw				# æŸ¥çœ‹ç¡¬ä»¶ä¿¡æ¯
ulimit      		# æ˜¾ç¤ºç³»ç»Ÿèµ„æºé™åˆ¶çš„ä¿¡æ¯
lpstat -a           # æ˜¾ç¤º CUPS ä¸­æ‰“å°æœºçš„çŠ¶æ€ä¿¡æ¯
```

æ›´å¤šæŸ¥çœ‹ä¸»æœºä¿¡æ¯å†…å®¹å‚è€ƒç¬”è®° [ä¿¡æ¯](./ç¬”è®°/ä¿¡æ¯.md)

### è¿›ç¨‹ç®¡ç†

**æœåŠ¡ç®¡ç†**
```bash
service <ç¨‹åº> status/start/restart/stop	# æ§åˆ¶ç³»ç»ŸæœåŠ¡çš„å®ç”¨å·¥å…·
systemctl	# ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨æŒ‡ä»¤
	systemctl enable crond.service	# è®©æŸä¸ªæœåŠ¡å¼€æœºè‡ªå¯(.service å¯ä»¥çœç•¥)
	systemctl disable crond			# ä¸è®©å¼€æœºè‡ªå¯
	systemctl status crond			# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
	systemctl start crond			# å¯åŠ¨æŸä¸ªæœåŠ¡
	systemctl stop crond			# åœæ­¢æŸä¸ªæœåŠ¡
	systemctl restart crond			# é‡å¯æŸä¸ªæœåŠ¡
	systemctl reload *				# é‡æ–°åŠ è½½æœåŠ¡é…ç½®æ–‡ä»¶
	systemctl is-enabled crond		# æŸ¥è¯¢æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨

chkconfig	# æ£€æŸ¥ã€è®¾ç½®ç³»ç»Ÿçš„å„ç§æœåŠ¡
	chkconfig --list		# åˆ—å‡ºæ‰€æœ‰çš„ç³»ç»ŸæœåŠ¡
	chkconfig --add httpd	# å¢åŠ  httpd æœåŠ¡
	chkconfig --del httpd	# åˆ é™¤ httpd æœåŠ¡
	chkconfig --level httpd 2345 on	# è®¾ç½® httpd åœ¨è¿è¡Œçº§åˆ«ä¸º 2ã€3ã€4ã€5 çš„æƒ…å†µä¸‹éƒ½æ˜¯ on(å¼€å¯)çš„çŠ¶æ€,å¦å¤–å¦‚æœä¸ä¼ å…¥å‚æ•° --level,åˆ™é»˜è®¤é’ˆå¯¹çº§åˆ« 2/3/4/5 æ“ä½œ.

# ä» CentOS7 å¼€å§‹,CentOS çš„æœåŠ¡ç®¡ç†å·¥å…·ç”± SysV æ”¹ä¸ºäº† systemd,ä½†å³ä½¿æ˜¯åœ¨ CentOS7 é‡Œ,ä¹Ÿä¾ç„¶å¯ä»¥ä½¿ç”¨ chkconfig è¿™ä¸ªåŸæœ¬å‡ºç°åœ¨ SysV é‡Œçš„å‘½ä»¤.
```

**ç›‘è§†è¿›ç¨‹**

```bash
ps -aux	    # æŸ¥çœ‹è¿›ç¨‹
ps aux | grep root	# æŸ¥çœ‹ root è¿è¡Œçš„ç¨‹åº
ps -ef | grep root	# æŸ¥çœ‹ root è¿è¡Œçš„ç¨‹åº

jobs	    # æ˜¾ç¤º Linux ä¸­çš„ä»»åŠ¡åˆ—è¡¨åŠä»»åŠ¡çŠ¶æ€
	jobs -l		    # æ˜¾ç¤ºè¿›ç¨‹å·

pidof program	    # æ‰¾å‡º program ç¨‹åºçš„è¿›ç¨‹ PID
pidof -x script     # æ‰¾å‡º shell è„šæœ¬ script çš„è¿›ç¨‹ PID

top					# å®æ—¶åŠ¨æ€åœ°æŸ¥çœ‹ç³»ç»Ÿçš„æ•´ä½“è¿è¡Œæƒ…å†µ
free-h				# æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæœªä½¿ç”¨çš„å’Œå·²ä½¿ç”¨çš„å†…å­˜æ•°ç›®
vmstat 1			# æ˜¾ç¤ºè™šæ‹Ÿå†…å­˜çŠ¶æ€
ps					# æŠ¥å‘Šå½“å‰ç³»ç»Ÿçš„è¿›ç¨‹çŠ¶æ€
	ps -aux			# æ˜¾ç¤ºç°åœ¨æ‰€æœ‰ç”¨æˆ·æ‰€æœ‰ç¨‹åº
	# ç”±äºpså‘½ä»¤èƒ½å¤Ÿæ”¯æŒçš„ç³»ç»Ÿç±»å‹ç›¸å½“çš„å¤š,æ‰€ä»¥é€‰é¡¹å¤šçš„ç¦»è°±,è¿™é‡Œç•¥
pidstat -u -p ALL	# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„ CPU ä½¿ç”¨æƒ…å†µ

watch <Command>		# ä»¥å‘¨æœŸæ€§çš„æ–¹å¼æ‰§è¡Œç»™å®šçš„æŒ‡ä»¤,æŒ‡ä»¤è¾“å‡ºä»¥å…¨å±æ–¹å¼æ˜¾ç¤º.
	-n : æŒ‡å®šæŒ‡ä»¤æ‰§è¡Œçš„é—´éš”æ—¶é—´(ç§’);
	-d : é«˜äº®æ˜¾ç¤ºæŒ‡ä»¤è¾“å‡ºä¿¡æ¯ä¸åŒä¹‹å¤„;
	-t : ä¸æ˜¾ç¤ºæ ‡é¢˜.
```

**è¿›ç¨‹å¤„ç†**

```bash
# æ€è¿›ç¨‹
kill
kill -s STOP <PID>						# åˆ é™¤æ‰§è¡Œä¸­çš„ç¨‹åºæˆ–å·¥ä½œ
	kill -l								# æ˜¾ç¤ºä¿¡å·
	kill -HUP <pid>						# æ›´æ”¹é…ç½®è€Œä¸éœ€åœæ­¢å¹¶é‡æ–°å¯åŠ¨æœåŠ¡
	kill -9 <PID> && kill -KILL <pid> 	# ä¿¡å·(SIGKILL)æ— æ¡ä»¶ç»ˆæ­¢è¿›ç¨‹
killall <PID>							# ä½¿ç”¨è¿›ç¨‹çš„åç§°æ¥æ€æ­»è¿›ç¨‹

ctrl+z # å°†å‰å°è¿è¡Œçš„ä»»åŠ¡æš‚åœ,ä»…ä»…æ˜¯æš‚åœ,è€Œä¸æ˜¯å°†ä»»åŠ¡ç»ˆæ­¢.
bg		# è½¬åå°è¿è¡Œ
fg		# è½¬å‰å°è¿è¡Œ
```
```bash
cmdline
# åœ¨Linuxç³»ç»Ÿä¸­,æ ¹æ®è¿›ç¨‹å·å¾—åˆ°è¿›ç¨‹çš„å‘½ä»¤è¡Œå‚æ•°,å¸¸è§„çš„åšæ³•æ˜¯è¯»å– /proc/{PID}/cmdline,å¹¶ç”¨'\0'åˆ†å‰²å…¶ä¸­çš„å­—ç¬¦ä¸²å¾—åˆ°è¿›ç¨‹çš„ args[],ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­:
	# xxd /proc/7771/cmdline
	0000000: 2f69 746f 612f 6170 702f 6d61 7665 2f62  /itoa/app/mave/b
	0000010: 696e 2f6d 6176 6500 2d70 002f 6974 6f61  in/mave.-p./itoa
	0000020: 2f61 7070 2f6d 6176 6500                 /app/mave.
	é€šè¿‡åˆ†å‰²å…¶ä¸­çš„ 0x00(C è¯­è¨€å­—ç¬¦ä¸²ç»“æŸç¬¦),å¯ä»¥æŠŠè¿™ä¸ªè¿›ç¨‹ args[],è§£æå‡ºæ¥:
	args[0]=/itoa/app/mave/bin/mave
	args[1]=-p
	args[2]=/itoa/app/mave
```

**ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤**
```bash
nohup	# nohup å‘½ä»¤è¿è¡Œç”± Commandå‚æ•°å’Œä»»ä½•ç›¸å…³çš„ Argå‚æ•°æŒ‡å®šçš„å‘½ä»¤,å¿½ç•¥æ‰€æœ‰æŒ‚æ–­(SIGHUP)ä¿¡å·.åœ¨æ³¨é”€åä½¿ç”¨ nohup å‘½ä»¤è¿è¡Œåå°ä¸­çš„ç¨‹åº.è¦è¿è¡Œåå°ä¸­çš„ nohup å‘½ä»¤,æ·»åŠ  & ( è¡¨ç¤º"and"çš„ç¬¦å·)åˆ°å‘½ä»¤çš„å°¾éƒ¨.
	nohup COMMAND &			# ä½¿å‘½ä»¤æ°¸ä¹…çš„åœ¨åå°æ‰§è¡Œ
	sh test.sh &			# å°† sh test.sh ä»»åŠ¡æ”¾åˆ°åå° ,å…³é—­xshell,å¯¹åº”çš„ä»»åŠ¡ä¹Ÿè·Ÿç€åœæ­¢.
	nohup sh test.sh		# å°† sh test.sh ä»»åŠ¡æ”¾åˆ°åå°,å…³é—­æ ‡å‡†è¾“å…¥,ç»ˆç«¯ä¸å†èƒ½å¤Ÿæ¥æ”¶ä»»ä½•è¾“å…¥(æ ‡å‡†è¾“å…¥),é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯åˆ°å½“å‰ç›®å½•ä¸‹çš„ nohup.out æ–‡ä»¶,å³ä½¿å…³é—­ xshell é€€å‡ºå½“å‰ session ä¾ç„¶ç»§ç»­è¿è¡Œ.
	nohup sh test.sh  & 	# å°† sh test.sh ä»»åŠ¡æ”¾åˆ°åå°,ä½†æ˜¯ä¾ç„¶å¯ä»¥ä½¿ç”¨æ ‡å‡†è¾“å…¥,ç»ˆç«¯èƒ½å¤Ÿæ¥æ”¶ä»»ä½•è¾“å…¥,é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯åˆ°å½“å‰ç›®å½•ä¸‹çš„ nohup.out æ–‡ä»¶,å³ä½¿å…³é—­ xshell é€€å‡ºå½“å‰ session ä¾ç„¶ç»§ç»­è¿è¡Œ.

setsid		# setsid ä¸»è¦æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ª session,å­è¿›ç¨‹ä»çˆ¶è¿›ç¨‹ç»§æ‰¿äº† SessionIDã€è¿›ç¨‹ç»„ ID å’Œæ‰“å¼€çš„ç»ˆç«¯,å­è¿›ç¨‹å¦‚æœè¦è„±ç¦»çˆ¶è¿›ç¨‹,ä¸å—çˆ¶è¿›ç¨‹æ§åˆ¶,æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ª setsid å‘½ä»¤
	setsid ping baidu.com	# setsid åå­è¿›ç¨‹ä¸å—ç»ˆç«¯å½±å“,ç»ˆç«¯é€€å‡º,ä¸å½±å“å­è¿›ç¨‹
	# åˆ«æ€¥,  ps -ef | grep ping ,æ‰¾åˆ° PID kill ç›¸åº”çš„ PID å°±å¯ä»¥å…³æ‰äº†ğŸ˜‚

disown		# ä½¿ä½œä¸šå¿½ç•¥ HUP ä¿¡å·
	# ç¤ºä¾‹1,å¦‚æœæäº¤å‘½ä»¤æ—¶å·²ç»ç”¨"&"å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œ,åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨"disown"
	ping www.baidu.com &
	jobs
	disown -h %1
	ps -ef |grep ping

	# ç¤ºä¾‹2,å¦‚æœæäº¤å‘½ä»¤æ—¶æœªä½¿ç”¨"&"å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œ,å¯ä½¿ç”¨ CTRL-z å’Œ"bg"å°†å…¶æ”¾å…¥åå°,å†ä½¿ç”¨"disown"
	ping www.baidu.com
	bg %1
	jobs
	disown -h %1
	ps -ef |grep ping
```

æ›´å¤šè¿›ç¨‹ç®¡ç†å†…å®¹å‚è€ƒç¬”è®° [è¿›ç¨‹](./ç¬”è®°/è¿›ç¨‹.md)

---

# ğŸ› è®¾å¤‡ç®¡ç†
## ç¡¬ç›˜-æ•°æ®

**ç£ç›˜é…é¢**
- quota

**åˆ†åŒº**
```bash
fdiskÂ -l			# æŸ¥çœ‹ç£ç›˜æƒ…å†µ
fdiskÂ /dev/sdb		# åˆ›å»ºç³»ç»Ÿåˆ†åŒº
	n	# æ·»åŠ ä¸€ä¸ªåˆ†åŒº
	p	# å»ºç«‹ä¸»åˆ†åŒº
	1	# åˆ†åŒºå·
	åé¢éƒ½æ˜¯é»˜è®¤,ç›´æ¥å›è½¦

	t	# è½¬æ¢åˆ†åŒºæ ¼å¼
	8e	# LVM æ ¼å¼

	w	# å†™å…¥åˆ†åŒºè¡¨
```

å¦‚æœæœºå™¨æ²¡æœ‰å®‰è£… swap åˆ†åŒºå¯ä»¥è‡ªå·±åˆ†é…ä¸€ä¸ª
```bash
dd if=/dev/zero of=/home/swap bs=1024 count=512000
/sbin/mkswap /home/swap
/sbin/swapon /home/swap
```
```bash
free -h	# æŸ¥çœ‹ swap åˆ†åŒº
```

**æŒ‚è½½**
```bash
cat /etc/fstab
mount

mount /dev/sdd1 /mnt/sdd		# æŒ‚è½½æ–°ç¡¬ç›˜åˆ°æ“ä½œç³»ç»Ÿçš„æŸä¸ªèŠ‚ç‚¹ä¸Š
mount /dev/cdrom /mnt/cdrom/	# æŒ‚è½½ CD é•œåƒ
mount -t vfstype				# æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹,é€šå¸¸ä¸å¿…æŒ‡å®š.mount ä¼šè‡ªåŠ¨é€‰æ‹©æ­£ç¡®çš„ç±»å‹.

vi /etc/fstab					# è‡ªåŠ¨æŒ‚è½½
/dev/cdrom /mnt/cdrom iso9660 defaults 0 0
```

**åˆ é™¤**
```bash
rm <File>	# åˆ é™¤æŒ‡å®šæ–‡ä»¶
	rm -r <Folder>	# åˆ é™¤æ–‡ä»¶å¤¹
	rm -i <File>	# åˆ é™¤å‰ç¡®è®¤
	rm -f <File>	# å¼ºåˆ¶åˆ é™¤
	rm -v <File>	# æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯

shred -zvu -n  5 <File>	# ä¸»è¦ç”¨äºæ–‡ä»¶è¦†ç›–å†…å®¹,ä¹Ÿå¯ä»¥åˆ é™¤
	# -z - ç”¨é›¶æ·»åŠ æœ€åçš„è¦†ç›–ä»¥éšè—ç¢åŒ–
	# -v - æ˜¾ç¤ºæ“ä½œè¿›åº¦
	# -u - è¦†ç›–åæˆªæ–­å¹¶åˆ é™¤æ–‡ä»¶
	# -n - æŒ‡å®šè¦†ç›–æ–‡ä»¶å†…å®¹çš„æ¬¡æ•°(é»˜è®¤å€¼ä¸º3)
```

**æ•°æ®æ¢å¤**
- [æ•°æ®æ¢å¤](./Secure-Linux.md#æ–‡ä»¶æ¢å¤)

**å ç”¨**
```bash
df	# æŠ¥å‘Šé©±åŠ¨å™¨çš„ç©ºé—´ä½¿ç”¨æƒ…å†µ
	df -H	# ä»¥äººç±»å¯è¯»çš„æ ¼å¼è¿›è¡Œæ˜¾ç¤º
	df -ah	# æŸ¥çœ‹ç£ç›˜å ç”¨å¤§çš„æ–‡ä»¶å¤¹

du	# æŠ¥å‘Šç›®å½•çš„ç©ºé—´ä½¿ç”¨æƒ…å†µ
	du -h /etc/yum | sort	# ä»¥äººç±»å¯è¯»çš„æ ¼å¼è¿›è¡Œæ˜¾ç¤º,æ’åºæ˜¾ç¤º
	du -sh /etc/yum			# ç‰¹å®šç›®å½•çš„æ€»ä½¿ç”¨é‡
	du --max-depth=1 -h		# æŸ¥çœ‹æ–‡ä»¶å¤¹ä¸‹å„ä¸ªæ–‡ä»¶å¤¹çš„ç£ç›˜å ç”¨
```

**dd**
```bash
dd
	dd if=/dev/zero of=sun.txt bs=1M count=1
	# if ä»£è¡¨è¾“å…¥æ–‡ä»¶.å¦‚æœä¸æŒ‡å®š if,é»˜è®¤å°±ä¼šä» stdin ä¸­è¯»å–è¾“å…¥.
	# of ä»£è¡¨è¾“å‡ºæ–‡ä»¶.å¦‚æœä¸æŒ‡å®š of,é»˜è®¤å°±ä¼šå°† stdout ä½œä¸ºé»˜è®¤è¾“å‡º.
	# ibs=bytes:ä¸€æ¬¡è¯»å…¥ bytes ä¸ªå­—èŠ‚,å³æŒ‡å®šä¸€ä¸ªå—å¤§å°ä¸º bytes ä¸ªå­—èŠ‚.
	# obs=bytes:ä¸€æ¬¡è¾“å‡º bytes ä¸ªå­—èŠ‚,å³æŒ‡å®šä¸€ä¸ªå—å¤§å°ä¸º bytes ä¸ªå­—èŠ‚.
	# bs ä»£è¡¨å­—èŠ‚ä¸ºå•ä½çš„å—å¤§å°.
	# count ä»£è¡¨è¢«å¤åˆ¶çš„å—æ•°.
	# /dev/zero æ˜¯ä¸€ä¸ªå­—ç¬¦è®¾å¤‡,ä¼šä¸æ–­è¿”å› 0 å€¼å­—èŠ‚(\0).
```

**LVM**
```bash
pvcreate /dev/sdb1						# åˆå§‹åŒ–ç‰©ç†å·
vgcreate -s 16M datastoreÂ /dev/sdb1		# åˆ›å»ºç‰©ç†å·
lvcreate -L 8GÂ -nÂ databaseÂ datastore	# åˆ›å»ºé€»è¾‘å·
lvdisplay 								# æŸ¥çœ‹é€»è¾‘å·çš„å±æ€§
```

**å—è®¾å¤‡ä¿¡æ¯**
```bash
lsblk	# æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å—è®¾å¤‡çš„ä¿¡æ¯
	lsblk -m	# æ˜¾ç¤ºè®¾å¤‡æ‰€æœ‰è€…ç›¸å…³çš„ä¿¡æ¯,åŒ…æ‹¬æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·ã€æ‰€å±ç»„ä»¥åŠæ–‡ä»¶ç³»ç»ŸæŒ‚è½½çš„æ¨¡å¼

blkid   # è¾“å‡ºæ‰€æœ‰å¯ç”¨çš„è®¾å¤‡ã€UUIDã€æ–‡ä»¶ç³»ç»Ÿç±»å‹ä»¥åŠå·æ ‡
	blkid /dev/sda1
	blkid -U d3b1dcc2-e3b0-45b0-b703-d6d0d360e524
	blkid -po udev /dev/sda1	# è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯
	blkid -g					# æ¸…ç† blkid çš„ç¼“å­˜
```
